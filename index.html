<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIlury Learn</title>
    <style>
        :root {
            --bbg-color: #E9E9EF;
            --bg-color: #fff;
            --pbg-color: #D9D9D9;
            --text-color: #000;
            --accent-color: #8C52FF;
            --progress-bar-fill1: #8C52FF;
            --progress-bar-fill2: #CB6CE6;
            --progress-bar-fill3: #FF66C4;
            --progress-bar-fill4: #FF5757;
            --green-color1: #00BF63;
            --green-color2: #7ED957;
            --orange-color1: #FFBD59;
            --orange-color2: #FFDE59;
            --red-color1: #FF3131;
            --red-color2: #FF6D4D;
            --default-fbg-color: #fcfcfc;
            --default-bbg-color: #cfcfcf;
            --font-size: 1.3em;
            --sidebar-width: 25vw;
            --chat-sidebar-width: 25vw;
        }
        
        * {
            box-sizing: border-box;
        }
        body, #content-container {
            margin: 0;
            padding: 0;
            background-color: var(--bbg-color);
            color: var(--text-color);
            font-size: 20px;
            height: 100dvh;
            width: 100vw;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            font-family: "Arial Rounded MT Bold", "Arial", sans-serif;
        }
        @keyframes progressBarAnimation {
            from {
                margin-top: -100px;
            }
            to {
                margin-top: 0;
            }
        }
        @keyframes progressBarAnimationOut {
            from {
                margin-top: 0;
            }
            to {
                margin-top: -100px;
            }
        }
        #progress-bar-bar-container {
            display: flex;
            justify-content: center;
            align-items: center;
            flex: 1;
        }
        #progress-bar-container {
            padding: 20px;
            border: none;
            border-radius: 30px;
            background-color: var(--bg-color);
            display: none;
            margin-top: -100px;
            transition: 0.3s;
            border-bottom-right-radius: 10px;
            border-bottom-left-radius: 10px;
        }
        #progress-bar {
            width: 100%;
            height: 10px;
            border-radius: 10px;
            background-color: var(--pbg-color);
            display: flex;
            align-items: left;
            padding: 0;
            margin: 0;
            position: relative;
            align-items: center;
            justify-content: center;
        }
        .progress-bar-fill {
            height: 10px;
            border-radius: 10px;
            margin: 0;
            transition: 0.3s;
            position: absolute;
            left: 0;
            top: 0;
        }
        #Fill1 {
            background-color: var(--progress-bar-fill1);
            width: 0%;
            z-index: 4;
        }
        #Fill2 {
            background-color: var(--progress-bar-fill2);
            width: 0%;
            z-index: 3;
        }
        #Fill3 {
            background-color: var(--progress-bar-fill3);
            width: 0%;
            z-index: 2;
        }
        #Fill4 {
            background-color: var(--progress-bar-fill4);
            width: 0%;
            z-index: 1;
        }
        .section {
          height: 100dvh;
          width: 100vw;
          display: none;
          flex-direction: column;
          overflow: hidden;
          max-width: 1000px;
        }
        .sidebarEnabled .section {
            max-width: calc(100vw - var(--sidebar-width));
        }
        #learncontainer {
            display: flex;
        }
        #content, .sec-content {
            margin: 0;
            margin-top: 5px;
            flex: 1;
            background-color: var(--bg-color);
            border-radius: 10px;
            border-bottom-right-radius: 20px;
            border-bottom-left-radius: 20px;
            display: flex;
            align-items: left;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }
        .content {
            display: none;
            padding: 20px;
            overflow-y: auto;
            transition: 0.3s;
            /*flex-direction: column;*/
            position: relative;
            width: 100%;
            height: 100%;
        }
        .section > .content {
            display: flex;
        }
        @keyframes buttonAnimation {
            from {
                opacity: 0;
                transform: translateY(-20px);
                box-shadow: 0px 20px 50px rgba(0, 0, 0, 0.3);
            }
            to {
                opacity: 1;
                transform: translateY(0);
                box-shadow: none;
            }
        }
        @keyframes easeinlefttoright {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        @keyframes easeinbottomtotop {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .content button:not(.audio-button) {
            background-color: var(--bg-color);
            font-size: 3em;
            color: var(--bg-color);
            font-weight: bold;
            border: none;
            border-radius: 7px;
            text-align: center;
            margin: 0;
            margin-top: 7px;
            padding: 20px;
            font-family: "Arial Rounded MT Bold", "Arial", sans-serif;
            width: 100%;
            text-shadow: 
                -2px -2px 0 var(--text-color),  
                 2px -2px 0 var(--text-color),
                -2px  2px 0 var(--text-color),
                 2px  2px 0 var(--text-color);
            background-position: 0;
            background-size: 100%;
            width: 100%;
            animation: buttonAnimation 2s ease;
        }
        .content p {
            font-size: var(--font-size);
        }
        #choose-content {
            display: flex;
            flex-direction: column;
            flex: 1;
        }
        @keyframes easein {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        #loading {
            height: 100%;
            width: 100%;
            background-color: rgba(0, 0, 0, 0.3);
            display: none;
            justify-content: center;
            align-items: center;
            position: absolute;
            top: 0;
            left: 0;
            animation: easein 0.3s ease-in;
            z-index: 1000;
        }
        @keyframes loading {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }
        #spinner {
            border: 5px solid rgba(0, 0, 0, 0.3);
            border-left: 5px solid white;
            background: transparent;
            height: 60px;
            width: 60px;
            animation: loading 0.7s ease-in-out infinite;
            border-radius: 50%;
        }
        @keyframes optionAnimation {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        .optionBtn {
            width: 100%;
            font-weight: bold;
            font-family: "Arial Rounded MT Bold", "Arial", sans-serif;
            font-size: 1.5em;
            background: linear-gradient(90deg, var(--bg-color), var(--default-fbg-color));
            border-radius: 10px;
            display: flex;
            margin-top: 7px;
            
            position: relative;
            padding: 15px;
            color: transparent;
            animation: optionAnimation 0.5s ease;
        }
        .optionBtn.defaultBg {
            background: var(--default-fbg-color);
        }
        .optionFill {
            height: 100%;
            width: 0px;
            border-radius: 10px;
            transition: 0.5s;
            padding: 15px;
            top: 0;
            left: 0;
            position: absolute;
            color: transparent;
        }
        .optionFill.defaultFill {
            background: var(--default-bbg-color);
        }
        .optionTitle {
            position: relative;
            color: var(--text-color);
            height: 100%;
            width: 100%;
        }
        .location {
            height: 30px;
            width: 30px;
            border-radius: 20px;
            border-bottom-right-radius: 0;
            background-color: var(--accent-color);
            transform: rotate(45deg);
            position: absolute;
            left: 0;
            bottom: 0;
            z-index: 50;
            box-shadow: 15px 15px 20px rgba(0, 0, 0, 0.5);
            border: 2px solid var(--text-color);
            transition: 0.5s;
        }
        .location .name {
            position: absolute;
            top: 15px;
            left: calc(50% + 15px);
            transform: translateX(-50%) rotate(-45deg);
            font-size: 0.5em;
            text-align: center;
        }
        .location.green1, .location.red1, .location.orange1 {
            z-index: 80;
            transform: rotate(45deg) scale(1.5);
        }
        .location.green1 {
            z-index: 90;
        }
        .location.green1 .name, .location.red1 .name, .location.orange1 .name {
            background: var(--bg-color);
            border-radius: 5px;
            padding: 3px;
            top: 18px;
            left: calc(50% + 18px);
            text-align: left;
        }
        #continentsMapContainer .location .name {
            top: 22px;
            left: calc(50% + 22px);
        }
        .NumberGrid {
            width: 100%;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            grid-template-rows: repeat(10, 1fr);
            gap: 2px;
            margin-top: 10px;
            animation: buttonAnimation 2s ease;
        }
        .gridNumber {
            height: 100%;
            width: 100%;
            background-color: var(--bbg-color);
            border: none;
            border-radius: 2px;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
            font-size: 0.7em;
            transition: 0.3s;
        }
        .green1 {
            background-color: var(--green-color1);
        }
        .orange1 {
            background-color: var(--orange-color1);
        }
        .red1 {
            background-color: var(--red-color1);
        }
        .green2 {
            background-color: var(--green-color2);
        }
        .orange2 {
            background-color: var(--orange-color2);
        }
        .red2 {
            background-color: var(--red-color2);
        }
        #timer-container {
            margin: 10px;
            padding: 10px;
            position: absolute;
            right: 15px;
            top: 0;
            display: none;
        }
        #icon {
            color: var(--text-color);
            font-size: 1.5em;
            background: transparent;
            border: none;
            padding: 5px;
        }
        #time {
            color: var(--text-color);
            font-size: 1.1em;
            background: transparent;
            border: none;
            padding: 5px;
            font-weight: bold;
            font-family: "Arial Rounded MT Bold", "Arial", sans-serif;
        }
        #learn-content {
            padding-top: 60px;
            max-width: 700px;
            width: 100%;
        }
        .learnOp {
            padding: 10px;
            font-size: 1.1em;
            color: var(--text-color);
            border: none;
            border-radius: 10px;
            font-family: "Arial Rounded MT Bold", "Arial", sans-serif;
            position: absolute;
            display: none;
            animation: buttonAnimation 1.5s ease;
            background-color: var(--bbg-color);
        }
        #backBtn {
            top: 15px;
            left: 15px;
        }
        #skipBtn {
            top: 15px;
            right: 15px;
        }
        @keyframes pointAnimation {
            30% {
                text-shadow: 0px 0px 10px var(--progress-bar-fill1);
                transform: rotate(10deg) scale(1.2);
                color: var(--progress-bar-fill1);
            }
            60% {
                text-shadow: 0px 0px 10px var(--progress-bar-fill1);
                transform: rotate(-10deg) scale(1.2);
                color: var(--progress-bar-fill1);
            }
        }
        #points {
            margin-left: 5px;
        }
        #pointsIcon {
            color: var(--accent-color);
        }
        #pointsContainer {
            margin-left: 15px;
            display: flex;
            animation: pointAnimation 2s ease;
        }
        #sidebar {
            margin: 0;
            width: var(--sidebar-width);
            height: 100%;
            display: none;
            position: relative;
        }
        .sidebarEnabled #sidebar {
            display: block;
        }
        #sidebar-button-container {
            padding: 7px;
        }
        #sidebar button{
            padding: 15px;
            padding-left: 20px;
            font-size: 1.2em;
            color: var(--text-color);
            font-family: "Arial Rounded MT Bold", "Arial", sans-serif;
            width: 100%;
            border: none;
            border-radius: 10px;
            text-align: left;
            margin-top: 15px;
            transition: 0.3s;
            background-color: var(--bbg-color);
        }
        #sidebar button.Active {
            background-color: var(--bg-color);
            border-top-right-radius: 0;
            border-bottom-right-radius: 0;
            color: var(--accent-color);
            position: relative;
        }
        .sidebarEnabled #sidebar button.Active {
            width: calc(100% + 7px);
        }
        .sidebarEnabled #sidebar button.Active:after {
            content: "";
            position: absolute;
            height: 30px;
            width: 30px;
            top: -30px;
            right: 0;
            background-color: transparent;
            border-radius: 10px;
            border-top-right-radius: 0;
            border-bottom-left-radius: 0;
            box-shadow: 5px 5px 0px var(--bg-color);
        }
        .sidebarEnabled #sidebar button.Active:before {
            content: "";
            position: absolute;
            height: 30px;
            width: 30px;
            bottom: -30px;
            right: 0;
            background-color: transparent;
            border-radius: 10px;
            border-bottom-right-radius: 0;
            border-top-left-radius: 0;
            box-shadow: 5px -5px 0px var(--bg-color);
        }
        #profile {
            width: 100%;
            border-bottom: 2px solid var(--bg-color);
            padding: 10px;
            display: flex;
        }
        #profilePicContainer {
            height: 100px;
            width: 100px;
            border-radius: 50%;
            display: flex;
            overflow: hidden;
            overflow-x: auto;
            scroll-snap-type: x mandatory;
        }
        #profilePic {
            height: 100px;
            width: 100px;
            border-radius: 3px;
            background-color: var(--bg-color);
            object-fit: cover;
            scroll-snap-align: start;
            margin-right: 5px;
        }
        #userName {
            font-weight: bold;
            font-size: 1.3em;
            color: var(--text-color);
            padding: 0;
            margin: 0;
        }
        #extraUserInfo {
            padding: 0;
            margin: 0;
            margin-top: 5px;
        }
        #profileInfo {
            margin-left: 10px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        #chat-container {
            padding: 15px;
            justify-content: space-between;
        }
        #chat-sidebar {
            width: var(--chat-sidebar-width);
            height: 100%;
            border-radius: 20px;
            background-color: var(--bbg-color);
            display: none;
            flex-direction: column;
            animation: easeinlefttoright 1s ease;
        }
        .chatSidebarEnabled #chat-sidebar {
            display: flex;
        }
        #chat-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        #emptyChatText {
            flex: 1;
            height: 100%;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            font-size: 1.6em;
            font-family: "Arial Rounded MT Bold", "Arial", sans-serif;
            position: absolute;
        }
        #message-form {
            display: flex;
            border: none;
            margin-left: 15px;
            animation: easeinbottomtotop 1s ease;
        }
        #message-form button {
            padding: 10px;
            background: var(--bbg-color);
            border: none;
            border-radius: 15px;
            margin-left: 1px;
            border-top-left-radius: 0;
            border-bottom-left-radius: 0;
            color: var(--accent-color);
            font-size: 0.8em;
            font-weight: bold;
        }
        #message-form textarea {
            color: var(--text-color);
            background: var(--bbg-color);
            border: none;
            border-radius: 0;
            font-size: 1em;
            padding: 13px;
            box-sizing: border-box;
            width: 100%;
            display: flex;
            flex: 1;
            resize: none;
            overflow: hidden;
            min-height: 40px;
            max-height: 40dvh;
            border-top-left-radius: 15px;
            border-bottom-left-radius: 15px;
            overflow-y: auto;
        }
        input[type="text"] {
            border: none;
            border-radius: 10px;
            font-size: 1em;
            font-family: "Arial Rounded MT Bold", "Arial", sans-serif;
            background-color: var(--bg-color);
            padding: 15px;
            margin: 5px;
            animation: buttonAnimation 1s ease;
        }
        input[type="text"]:focus, textarea:focus {
            outline: none;
        }
        ::placeholder {
            color: var(--text-color);
            opacity: 0.4;
        }
        #chat-messages {
            flex: 1;
            overflow: hidden;
            position: relative;
        }
        #chat-sidebar h2 {
            padding: 20px;
            font-size: 1.2em;
            font-family: "Arial Rounded MT Bold", "Arial", sans-serif;
            border-bottom: 2px solid var(--bg-color);
            margin: 0;
        }
        .cursorElement {
            color: var(--accent-color);
        }
        #server-container {
            width: 100%;
            height: 100%;
            overflow: hidden;
            overflow-y: auto;
        }
        .resizesidebarbar {
            position: absolute;
            right: -10px;
            top: 0;
            background: transparent;
            height: 100dvh;
            width: 50px;
            z-index: 6;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            box-sizing: border-box;
            font-size: 1.7em;
            color: var(--bg-color);
            transform: scaleX(0.4);
            cursor: ew-resize;
            font-family: "Arial Rounded MT Bold", "Arial", sans-serif;
            transition: backgroundColor 0.3s;
        }
        #continentsMapContainer, #europeMapContainer, #northAmericaMapContainer, #africaMapContainer {
            width: 100%;
            overflow: hidden;
            position: relative;
            animation: buttonAnimation 2s ease;
            border-radius: 15px;
        }
        #continentsMapContainer img, #europeMapContainer img, #northAmericaMapContainer img, #africaMapContainer img {
            object-fit: cover;
            height: 100%;
            width: 100%;
        }
        #continentsMapContainer #asia {
            position: absolute;
            bottom: 78%;
            left: 60%;
        }
        #continentsMapContainer #africa {
            position: absolute;
            bottom: 52%;
            left: 44%;
        }
        #continentsMapContainer #europe {
            position: absolute;
            bottom: 84%;
            left: 46%;
        }
        #continentsMapContainer #northamerica {
            position: absolute;
            bottom: 82%;
            left: 11%;
        }
        #continentsMapContainer #southamerica {
            position: absolute;
            bottom: 36%;
            left: 20%;
        }
        #continentsMapContainer #australia {
            position: absolute;
            bottom: 31%;
            left: 76%;
        }
        #continentsMapContainer #antarctica {
            position: absolute;
            bottom: 6%;
            left: 50%;
        }
        /* europe */
        #europeMapContainer .location {
            height: 15px;
            width: 15px;
        }
        #europeMapContainer #iceland {
            position: absolute;
            bottom: 84%;
            left: 8%;
        }
        #europeMapContainer #ireland {
            position: absolute;
            bottom: 54%;
            left: 18%;
        }
        #europeMapContainer #unitedkingdom {
            position: absolute;
            bottom: 56%;
            left: 27%;
        }
        #europeMapContainer #norway {
            position: absolute;
            bottom: 75%;
            left: 45%;
        }
        #europeMapContainer #sweden {
            position: absolute;
            bottom: 78%;
            left: 54%;
        }
        #europeMapContainer #finland {
            position: absolute;
            bottom: 80%;
            left: 69%;
        }
        #europeMapContainer #estonia {
            position: absolute;
            bottom: 69%;
            left: 69%;
        }
        #europeMapContainer #livia {
            position: absolute;
            bottom: 65%;
            left: 68%;
        }
        #europeMapContainer #lithuania {
            position: absolute;
            bottom: 60%;
            left: 67%;
        }
        #europeMapContainer #belarus {
            position: absolute;
            bottom: 56%;
            left: 73%;
        }
        #europeMapContainer #ukraine {
            position: absolute;
            bottom: 45%;
            left: 78%;
        }
        #europeMapContainer #russia {
            position: absolute;
            bottom: 68%;
            left: 85%;
        }
        #europeMapContainer #slovakia {
            position: absolute;
            bottom: 43%;
            left: 60%;
        }
        #europeMapContainer #moldova {
            position: absolute;
            bottom: 39%;
            left: 74%;
        }
        #europeMapContainer #romania {
            position: absolute;
            bottom: 35%;
            left: 68%;
        }
        #europeMapContainer #bulgaria {
            position: absolute;
            bottom: 26%;
            left: 69%;
        }
        #europeMapContainer #germany {
            position: absolute;
            bottom: 50%;
            left: 45%;
        }
        #europeMapContainer #poland {
            position: absolute;
            bottom: 52%;
            left: 60%;
        }
        #europeMapContainer #netherlands {
            position: absolute;
            bottom: 52%;
            left: 38%;
        }
        #europeMapContainer #belgium {
            position: absolute;
            bottom: 48%;
            left: 37%;
        }
        #europeMapContainer #luxemburg {
            position: absolute;
            bottom: 45.5%;
            left: 39%;
        }
        #europeMapContainer #france {
            position: absolute;
            bottom: 38%;
            left: 32%;
        }
        #europeMapContainer #sweetzerland {
            position: absolute;
            bottom: 38%;
            left: 42%;
        }
        #europeMapContainer #italy {
            position: absolute;
            bottom: 27%;
            left: 48%;
        }
        #europeMapContainer #spain {
            position: absolute;
            bottom: 20%;
            left: 22%;
        }
        #europeMapContainer #portugal {
            position: absolute;
            bottom: 18%;
            left: 14%;
        }
        #europeMapContainer #georgia {
            position: absolute;
            bottom: 25%;
            left: 98%;
        }
        #europeMapContainer #turkey {
            position: absolute;
            bottom: 18%;
            left: 86%;
        }
        #europeMapContainer #cyprus {
            position: absolute;
            bottom: 5.5%;
            left: 83.5%;
        }
        #europeMapContainer #greece {
            position: absolute;
            bottom: 17%;
            left: 64%;
        }
        #europeMapContainer #albania {
            position: absolute;
            bottom: 23%;
            left: 61%;
        }
        #europeMapContainer #macedonia {
            position: absolute;
            bottom: 24%;
            left: 63.5%;
        }
        #europeMapContainer #serbia {
            position: absolute;
            bottom: 30%;
            left: 62%;
        }
        #europeMapContainer #slovania {
            position: absolute;
            bottom: 35.5%;
            left: 52%;
        }
        #europeMapContainer #croatia {
            position: absolute;
            bottom: 34%;
            left: 55%;
        }
        #europeMapContainer #bosnia {
            position: absolute;
            bottom: 31%;
            left: 57%;
        }
        #europeMapContainer #hungary {
            position: absolute;
            bottom: 38%;
            left: 60%;
        }
        #europeMapContainer #czechrepublic {
            position: absolute;
            bottom: 46%;
            left: 53%;
        }
        #europeMapContainer #austria {
            position: absolute;
            bottom: 40%;
            left: 52%;
        }
        #europeMapContainer #denmark {
            position: absolute;
            bottom: 62%;
            left: 45%;
        }
        #europeMapContainer #montenegro {
            position: absolute;
            bottom: 27%;
            left: 59.5%;
        }
        /* north america */
        #northAmericaMapContainer .location {
            height: 20px;
            width: 20px;
        }
        #northAmericaMapContainer #greenland {
            position: absolute;
            bottom: 85%;
            left: 70%;
        }
        #northAmericaMapContainer #unitedstatesofamerica {
            position: absolute;
            bottom: 39%;
            left: 45%;
        }
        #northAmericaMapContainer #unitedstatesofamerica2 {
            position: absolute;
            bottom: 75%;
            left: 17%;
        }
        #northAmericaMapContainer #canada {
            position: absolute;
            bottom: 64%;
            left: 43%;
        }
        #northAmericaMapContainer #mexico {
            position: absolute;
            bottom: 20%;
            left: 40%;
        }
        #northAmericaMapContainer #guatemala {
            position: absolute;
            bottom: 11%;
            left: 53%;
        }
        #northAmericaMapContainer #belize {
            position: absolute;
            bottom: 14%;
            left: 56.5%;
        }
        #northAmericaMapContainer #elsalvador {
            position: absolute;
            bottom: 10%;
            left: 57%;
        }
        #northAmericaMapContainer #honduras {
            position: absolute;
            bottom: 12%;
            left: 60%;
        }
        #northAmericaMapContainer #nicaragua {
            position: absolute;
            bottom: 9%;
            left: 62%;
        }
        #northAmericaMapContainer #costarica {
            position: absolute;
            bottom: 6%;
            left: 64%;
        }
        #northAmericaMapContainer #panama {
            position: absolute;
            bottom: 4.5%;
            left: 68%;
        }
        #northAmericaMapContainer #cuba {
            position: absolute;
            bottom: 21%;
            left: 69%;
        }
        #northAmericaMapContainer #jamaica {
            position: absolute;
            bottom: 17%;
            left: 70.5%;
        }
        #northAmericaMapContainer #puertorico {
            position: absolute;
            bottom: 20.5%;
            left: 84%;
        }
        #northAmericaMapContainer #dominicanrepublic {
            position: absolute;
            bottom: 20%;
            left: 78.5%;
        }
        /* africa map */
        #africaMapContainer .location {
            height: 20px;
            width: 20px;
        }
        #africaMapContainer #marroco {
            position: absolute;
            bottom: 93%;
            left: 20%;
        }
        #africaMapContainer #egypt {
            position: absolute;
            bottom: 87%;
            left: 63%;
        }
        #africaMapContainer #algeria {
            position: absolute;
            bottom: 88%;
            left: 30%;
        }
        #africaMapContainer #libya {
            position: absolute;
            bottom: 88%;
            left: 48%;
        }
        #africaMapContainer #tunisia {
            position: absolute;
            bottom: 96%;
            left: 39%;
        }
        #africaMapContainer #westernsahara {
            position: absolute;
            bottom: 84%;
            left: 12%;
        }
        #africaMapContainer #senegal {
            position: absolute;
            bottom: 70%;
            left: 12%;
        }
        #africaMapContainer #gambia {
            position: absolute;
            bottom: 67.8%;
            left: 9%;
        }
        #africaMapContainer #mauritania {
            position: absolute;
            bottom: 77%;
            left: 15%;
        }
        #africaMapContainer #mali {
            position: absolute;
            bottom: 75%;
            left: 25%;
        }
        #africaMapContainer #niger {
            position: absolute;
            bottom: 74%;
            left: 40%;
        }
        #africaMapContainer #chade {
            position: absolute;
            bottom: 73%;
            left: 51%;
        }
        #africaMapContainer #sudan {
            position: absolute;
            bottom: 73%;
            left: 64%;
        }
        #africaMapContainer #eritrea {
            position: absolute;
            bottom: 72%;
            left: 74%;
        }
        #africaMapContainer #guineabissau {
            position: absolute;
            bottom: 66%;
            left: 9.5%;
        }
        #africaMapContainer #guinea {
            position: absolute;
            bottom: 65%;
            left: 14%;
        }
        #africaMapContainer #sierraleona {
            position: absolute;
            bottom: 61%;
            left: 14%;
        }
        #africaMapContainer #liberia {
            position: absolute;
            bottom: 59%;
            left: 16.5%;
        }
        #africaMapContainer #cotedivoire {
            position: absolute;
            bottom: 60%;
            left: 21%;
        }
        #africaMapContainer #burkinafaso {
            position: absolute;
            bottom: 67%;
            left: 26%;
        }
        #africaMapContainer #ghana {
            position: absolute;
            bottom: 61%;
            left: 26.5%;
        }
        #africaMapContainer #togo {
            position: absolute;
            bottom: 60%;
            left: 29.5%;
        }
        #africaMapContainer #benin {
            position: absolute;
            bottom: 63%;
            left: 31.3%;
        }
        #africaMapContainer #nigeria {
            position: absolute;
            bottom: 62.5%;
            left: 37%;
        }
        #africaMapContainer #cameroon {
            position: absolute;
            bottom: 57%;
            left: 43%;
        }
        #africaMapContainer #centralafricanrepublic {
            position: absolute;
            bottom: 59%;
            left: 52.5%;
        }
        #africaMapContainer #southsudan {
            position: absolute;
            bottom: 59%;
            left: 64.5%;
        }
        #africaMapContainer #ethiopia {
            position: absolute;
            bottom: 62%;
            left: 75%;
        }
        #africaMapContainer #somalia {
            position: absolute;
            bottom: 61%;
            left: 87%;
        }
        #africaMapContainer #kenya {
            position: absolute;
            bottom: 50%;
            left: 74%;
        }
        #africaMapContainer #uganda {
            position: absolute;
            bottom: 51%;
            left: 67.5%;
        }
        #africaMapContainer #democraticrepublicofthecongo {
            position: absolute;
            bottom: 48%;
            left: 57%;
        }
        #africaMapContainer #republicofthecongo {
            position: absolute;
            bottom: 48%;
            left: 47%;
        }
        #africaMapContainer #gabon {
            position: absolute;
            bottom: 48%;
            left: 42%;
        }
        #africaMapContainer #equatorialguinea {
            position: absolute;
            bottom: 51.5%;
            left: 41%;
        }
        #africaMapContainer #djibouti {
            position: absolute;
            bottom: 66%;
            left: 80%;
        }
        #africaMapContainer #rwanda {
            position: absolute;
            bottom: 47%;
            left: 64.6%;
        }
        #africaMapContainer #burundi {
            position: absolute;
            bottom: 44.5%;
            left: 64.6%;
        }
        #africaMapContainer #tanzania {
            position: absolute;
            bottom: 40.5%;
            left: 70%;
        }
        #africaMapContainer #angola {
            position: absolute;
            bottom: 32%;
            left: 49%;
        }
        #africaMapContainer #zambia {
            position: absolute;
            bottom: 29.5%;
            left: 60%;
        }
        #africaMapContainer #malawi {
            position: absolute;
            bottom: 31%;
            left: 69%;
        }
        #africaMapContainer #mozambique {
            position: absolute;
            bottom: 25%;
            left: 70%;
        }
        #africaMapContainer #zimbabwe {
            position: absolute;
            bottom: 23%;
            left: 64%;
        }
        #africaMapContainer #botswana {
            position: absolute;
            bottom: 20%;
            left: 57%;
        }
        #africaMapContainer #namibia {
            position: absolute;
            bottom: 20%;
            left: 49%;
        }
        #africaMapContainer #southafrica {
            position: absolute;
            bottom: 9%;
            left: 57%;
        }
        #africaMapContainer #lesotho {
            position: absolute;
            bottom: 9%;
            left: 61%;
        }
        #africaMapContainer #swaziland {
            position: absolute;
            bottom: 13%;
            left: 65.5%;
        }
        #africaMapContainer #madagascar {
            position: absolute;
            bottom: 23%;
            left: 84%;
        }
        /* math btn option designs */
        .MathLevelOption, .TimeLevelOption {
            height: 200px;
            width: 100%;
            border-radius: 20px;
            position: relative;
            overflow: hidden;
            animation: buttonAnimation 2s ease;
            margin-bottom: 20px;
        }
        .MathLevelOption.hard {
            background: linear-gradient(135deg, red, darkred);
        }
        .TimeLevelOption.hard {
            background: linear-gradient(135deg, pink, purple);
        }
        .MathLevelOption.medium {
            background: linear-gradient(135deg, orange, darkorange);
        }
        .TimeLevelOption.medium {
            background: linear-gradient(135deg, lightblue, darkblue);
        }
        .MathLevelOption.easy {
            background: linear-gradient(135deg, green, darkgreen);
        }
        .TimeLevelOption.easy {
            background: linear-gradient(135deg, yellow, orange);
        }
        .MathLevelOption .mathsimbol, .TimeLevelOption .mathsimbol {
            font-size: 1em;
            color: #fff;
            opacity: 0.5;
            position: absolute;
        }
        .MathLevelOption .btngrid, .TimeLevelOption .btngrid {
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 100%;
            background-size: 20px 20px;
            background-image: linear-gradient(#fff 1px, transparent 1px),
                linear-gradient(90deg, #fff 1px, transparent 1px);
            opacity: 0.2;
        }
        .MathLevelOption .text, .TimeLevelOption .text {
            font-size: 50px;
            font-weight: bold;
            color: white;
            height: 100%;
            width: 100%;
            position: absolute;
            top: 0;
            left: 0;
            justify-content: center;
            align-items: center;
            display: flex;
            font-family: 'Orbitron', sans-serif;
        }
        .hinge .part1 {
            height: 2px;
            width: 20px;
            background-color: #fff;
            position: absolute;
            transform: rotate(50deg) translateY(-10px);
            
        }
        .hinge .part1:after {
            content: "";
            height: 5px;
            width: 5px;
            border-radius: 5px;
            background-color: #fff;
            position: absolute;
            left: -2.5px;
            top: -1.5px;
        }
        .hinge .part2 {
            height: 2px;
            width: 20px;
            background-color: #fff;
            position: absolute;
            transform: rotate(-50deg) translateY(10px);
            
        }
        .hinge .part2:after {
            content: "";
            height: 5px;
            width: 5px;
            border-radius: 5px;
            background-color: #fff;
            position: absolute;
            left: -2.5px;
            top: -1.5px;
        }
        .hinge .part2:before {
            content: "";
            height: 5px;
            width: 5px;
            border-radius: 5px;
            background-color: #fff;
            position: absolute;
            right: -1px;
            top: -2px;
        }
        .greenColor1 {
            color: var(--green-color1);
        }
        .green2.greenColor1, .red1.greenColor1, .orange1.greenColor1 {
            color: var(--text-color);
        }
        .LearnInputField, input[type="text"].LearnInputField {
            padding: 15px;
            border: 2px solid var(--text-color);
            border-radius: 10px;
            font-size: 0.9em;
            color: var(--text-color);
            background-color: var(--bg-color);
            transition: 0.3s;
        }
        input[type="text"].LearnInputField.green2 {
            background-color: var(--green-color2);
        }
        input[type="text"].LearnInputField.orange1 {
            background-color: var(--orange-color1);
        }
        input[type="text"].LearnInputField.red1 {
            background-color: var(--red-color1);
        }
        /*shapes*/
        .shape-container {
            background: var(--bg-color);
            display: inline-flex;
            justify-content: center;
            align-items: center;
            touch-action: none;
            margin-right: 10px;
            overflow: hidden;
            padding: 30px;
        }
        @keyframes sceneAnimation {
            from {
                opacity: 0;
                transform: translateY(-20px) rotateX(0) rotateY(0);
                box-shadow: 0px 20px 50px rgba(0, 0, 0, 0.3);
            }
            to {
                opacity: 1;
                transform: translateY(0) rotateX(-19deg) rotateY(6deg);
                box-shadow: none;
            }
        }
        .scene {
            width: 145px;
            height: 150px;
            transform-style: preserve-3d;
            display: flex;
            transition: transform 0.1s ease;
            border: 2px dashed var(--text-color);
            animation: sceneAnimation 2s ease;
            transform: rotateX(-19deg) rotateY(6deg);
        }
        /* square-based pyramid*/
        .pyramid {
            position: relative;
            transform-style: preserve-3d;
        }
        
        .pyramid .face {
            position: absolute;
            width: 0;
            height: 0;
            border-style: solid;
            opacity: 0.9;
        }
        
        .pyramid .base {
            width: 140px;
            height: 140px;
            background: #0135FF;
            transform: rotateX(90deg) translateZ(-39px);
            position: absolute;
            opacity: 0.7;
            top: 0;
            left: 0;
        }
        
        .pyramid .face1 {
            border-width: 0 70px 120px 70px;
            border-color: transparent transparent #e74c3c transparent;
            transform: rotateY(0deg) translateZ(35px) rotateX(36deg);
        }
        
        .pyramid .face2 {
            border-width: 0 70px 120px 70px;
            border-color: transparent transparent #27ae60 transparent;
            transform: rotateY(90deg) translateZ(35px) rotateX(36deg);
        }
        
        .pyramid .face3 {
            border-width: 0 70px 120px 70px;
            border-color: transparent transparent #2980b9 transparent;
            transform: rotateY(180deg) translateZ(35px) rotateX(36deg);
        }
        
        .pyramid .face4 {
            border-width: 0 70px 120px 70px;
            border-color: transparent transparent #f1c40f transparent;
            transform: rotateY(-90deg) translateZ(35px) rotateX(36deg);
        }
        /* cylinder */
        .cylinder {
            position: relative;
            width: 140px;
            height: 120px;
            transform-style: preserve-3d;
            transform: translateY(10px);
        }
        
        .cylinder .cylinder-top,
        .cylinder .cylinder-bottom {
            position: absolute;
            width: 140px;
            height: 140px;
            border-radius: 50%;
            background: #2ecc71;
            transform: rotateX(90deg);
            opacity: 0.7;
            left: 0;
            top: 0;
        }
        
        .cylinder .cylinder-top {
            transform: rotateX(90deg) translateZ(60px);
            background: #2ecc71;
        }
        
        .cylinder .cylinder-bottom {
            transform: rotateX(90deg) translateZ(-60px);
            background: #f1c40f;
        }
        
        .cylinder .cylinder-side {
            position: absolute;
            width: 140px;
            height: 120px;
            transform-style: preserve-3d;
            top: 10px;
            left: 0;
        }
        
        .cylinder .segment {
            position: absolute;
            width: 13px;
            height: 120px;
            background: #e74c3c;
            left: 63.5px;
            transform-origin: center center;
            opacity: 0.9;
        }
        /* cone */
        .cone {
            position: relative;
            transform-style: preserve-3d;
        }
        
        .cone .cone-side {
            position: absolute;
            width: 200px;
            height: 200px;
            transform-style: preserve-3d;
        }
        
        .cone .segment {
            position: absolute;
            width: 10px;
            height: 0;
            border-left: 3px solid transparent;
            border-right: 3px solid transparent;
            border-bottom: 120px solid #e67e22;
            transform-origin: bottom center;
            top: 59px;
            left: 65px;
        }
        
        .cone .cone-base {
            width: 140px;
            height: 140px;
            background: #2980b9;
            border-radius: 50%;
            transform: rotateX(90deg) translateZ(-60px);
            position: absolute;
            top: 0;
            left: 0;
            opacity: 0.7;
        }
        /* triangular prism */
        .triangular-prism {
            position: relative;
            transform-style: preserve-3d;
        }
        
        .triangular-prism .face {
            position: absolute;
            opacity: 0.9;
        }
        
        .triangular-prism .triangle {
            width: 0;
            height: 0;
            border-left: 70px solid transparent;
            border-right: 70px solid transparent;
            border-bottom: 120px solid #e74c3c;
        }
        
        .triangular-prism .rectangle {
            width: 140px;
            height: 120px;
            background: #27ae60;
        }
        
        .triangular-prism .face1 {
            transform: translateZ(70px);
        }
        
        .triangular-prism .face2 {
            transform: rotateY(180deg) translateZ(70px);
        }
        
        .triangular-prism .face3 {
            background: #2980b9;
            transform: rotateX(90deg) translateY(70px) translateZ(20px);
            width: 140px;
            height: 140px;
            transform-origin: bottom;
        }
        
        .triangular-prism .face4 {
            background: #f1c40f;
            width: 140px;
            height: 139px;
            transform: rotateY(90deg) rotateX(-30deg) translateX(-70px) translateZ(25.5px) translateY(-26px);
            transform-origin: left;
        }
        
        .triangular-prism .face5 {
            background: #9b59b6;
            width: 140px;
            height: 139px;
            transform: rotateY(-90deg) rotateX(-30deg) translateX(70px) translateZ(25.5px) translateY(-26px);
            transform-origin: right;
        }
        /* cuboid */
        .cuboid {
            position: relative;
            transform-style: preserve-3d;
            width: 140px;
            height: 140px;
            transform: translateZ(-70px);
        }
        
        .cuboid .face {
            position: absolute;
            background: rgba(0, 0, 0, 0.1);
            border: 1px solid #333;
            opacity: 0.9;
        }
        
        .cuboid .face-front {
            width: 140px;
            height: 120px;
            background: #e74c3c;
            transform: translateY(10px) translateX(0) translateZ(195px);
        }
        
        .cuboid .face-back {
            width: 140px;
            height: 120px;
            background: #27ae60;
            transform: rotateY(180deg) translateY(10px) translateX(0) translateZ(45px);
        }
        
        .cuboid .face-left {
            width: 240px;
            height: 120px;
            background: #2980b9;
            transform: rotateY(-90deg) translateY(10px) translateX(75px) translateZ(-20px);
        }
        
        .cuboid .face-right {
            width: 240px;
            height: 120px;
            background: #f1c40f;
            transform: rotateY(90deg) translateY(10px) translateX(-75px) translateZ(-120px);
        }
        
        .cuboid .face-top {
            width: 140px;
            height: 240px;
            background: #8e44ad;
            transform: rotateX(90deg) translateY(75px) translateX(0) translateZ(110px);
        }
        
        .cuboid .face-bottom {
            width: 140px;
            height: 240px;
            background: #3498db;
            transform: rotateX(-90deg) translateY(-75px) translateX(0) translateZ(10px);
        }
        /* cube */
        .cube {
            position: relative;
            transform-style: preserve-3d;
            width: 140px;
            height: 140px;
            transform: translateZ(-70px); /* half-depth */
        }
    
        .cube .face {
            position: absolute;
            background: rgba(0,0,0,0.1);
            border: 1px solid #333;
            opacity: 0.9;
        }
    
        .cube .face-front {
          width: 140px;
          height: 140px;
          background: #e74c3c;
          transform: translateY(0) translateX(0) translateZ(145px);
        }
        
        .cube .face-back {
            width: 140px;
            height: 140px;
            background: #27ae60;
            transform: rotateY(180deg) translateY(0) translateX(0) translateZ(-5px);
        }
    
        .cube .face-left {
          width: 140px;
          height: 140px;
          background: #2980b9;
          transform: rotateY(-90deg) translateY(0) translateX(75px) translateZ(-70px);
        }
    
        .cube .face-right {
            width: 140px;
            height: 140px;
            background: #f1c40f;
            transform: rotateY(90deg) translateY(0) translateX(-75px) translateZ(-70px);
        }
    
        .cube .face-top {
            width: 140px;
            height: 140px;
            background: #8e44ad;
            transform: rotateX(90deg) translateY(75px) translateX(0) translateZ(70px);
        }
    
        .cube .face-bottom {
            width: 140px;
            height: 140px;
            background: #3498db;
            transform: rotateX(-90deg) translateY(-75px) translateX(0) translateZ(70px);
        }
        /* tetrahedron */
        .tetrahedron {
            position: relative;
            transform-style: preserve-3d;
        }
        
        .tetrahedron .triangle-face {
            position: absolute;
            width: 0;
            height: 0;
            border-left: 60px solid transparent;
            border-right: 60px solid transparent;
            border-bottom: 105px solid red;
            opacity: 0.9;
            transform-origin: bottom center;
        }
        
        .tetrahedron .face1 {
            transform: rotateX(-19.5deg) translateZ(-37px) translateY(21px) translateX(10px);
            border-bottom: 105px solid #f1c40f;
        }
        
        .tetrahedron .face2 {
            transform: rotateY(120deg) rotateX(-19.5deg) translateZ(-19px) translateX(1px) translateY(15px);
            border-bottom: 105px solid #e74c3c;
        }
        
        .tetrahedron .face3 {
            transform: rotateY(-120deg) rotateX(-19.5deg) translateZ(-35px) translateX(-11px) translateY(21px);
            border-bottom: 105px solid #27ae60;
        }
        
        .tetrahedron .base {
            position: absolute;
            width: 0;
            height: 0;
            border-left: 60px solid transparent;
            border-right: 60px solid transparent;
            border-top: 105px solid blue;
            transform: rotateX(90deg) translateZ(-60px) translateY(10px) translateX(10px);
            opacity: 0.7;
        }
        @keyframes audiobtneaseinAnimation {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        @keyframes audiobtnbeforeeaseinAnimation {
            from {
                width: 0px;
                left: 0;
            }
            to {
                width: 30px;
                left: -30px;
            }
        }
        @keyframes audiobtnaftereaseinAnimation {
            from {
                height: 0px;
                bottom: 0;
            }
            to {
                height: 30px;
                bottom: -30px;
            }
        }
        .audio-button {
            background: var(--accent-color);
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            color: white;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background 0.3s ease;
            position: absolute;
            top: -15px;
            right: -15px;
            z-index: 2;
            animation: audiobtneaseinAnimation 1s ease-in;
        }
        .audio-button:before {
            content: "";
            height: 1px;
            width: 30px;
            background-color: var(--accent-color);
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            left: -30px;
            border: none;
            border-radius: 0;
            border-top-left-radius: 70%;
            border-bottom-left-radius: 70%;
            opacity: 0.2;
            animation: audiobtnbeforeeaseinAnimation 2s ease-in;
        }
        .audio-button:after {
            content: "";
            width: 1px;
            height: 30px;
            background-color: var(--accent-color);
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            bottom: -30px;
            border: none;
            border-radius: 0;
            border-bottom-left-radius: 70%;
            border-bottom-right-radius: 70%;
            opacity: 0.2;
            animation: audiobtnaftereaseinAnimation 2s ease-in;
        }
        .questionTextpTag {
            position: relative;
            overflow: visible;
            padding-top: 10px;
            padding-right: 10px;
        }
        #exerciseScoreContainer {
            background: var(--bg-color);
            width: 100%;
            height: 100%;
            display: none;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            margin: 0;
            padding: 0;
            left: 0;
            top: 0;
            position: absolute;
            z-index: 100;
        }
        #exerciseScoreContainer p {
            font-size: 1.5em;
        }
        @keyframes exerciseScoreBarFillAnimation {
            0% {
                transform: scale(3);
            }
            100% {
                transform: scale(1);
            }
        }
        #exerciseScoreBar {
            width: 80%;
            max-width: 300px;
            height: 60px;
            background: var(--default-fbg-color);
            display: flex;
            justify-content: left;
            align-items: left;
            padding: 0;
            margin: 0;
            overflow: hidden;
            border-radius: 5px;
            position: relative;
            animation: exerciseScoreBarFillAnimation 0.8s ease-in;
        }
        #exerciseScoreBarFill {
            height: 100%;
            width: 0;
            background: var(--progress-bar-fill4);
            /*transition: 2s;*/
        }
        #exerciseScoreBarFill.barFill1 {
            background: var(--progress-bar-fill1);
        }
        #exerciseScoreBarFill.barFill2 {
            background: var(--progress-bar-fill2);
        }
        #exerciseScoreBarFill.barFill3 {
            background: var(--progress-bar-fill3);
        }
        #exerciseScoreBarFill.barFill4 {
            background: var(--progress-bar-fill4);
        }
        #claimExercisePoints {
            font-size: 1.1em;
            color: var(--text-color);
            font-family: "Arial Rounded MT Bold", "Arial", sans-serif;
            width: 80%;
            max-width: 300px;
            border: none;
            border-radius: 5px;
            padding: 0;
            margin-top: 10px;
            background: var(--bg-color);
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 55px;
            overflow: hidden;
        }
        #exerciseScoreText {
            font-size: 1.1em;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        #claimBtnContent {
            background: var(--bg-color);
            width: calc(100% - 4px);
            height: calc(100% - 4px);
            border-radius: 5px;
            position: absolute;
            top: 2px;
            left: 2px;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        #rotating-circle {
            width: 150%;
            height: 700%;
            border-radius: 0;
            position: absolute;
            background: linear-gradient(
              90deg,
              red,
              orange,
              yellow,
              cyan,
              blue,
              violet
              
            );
            animation: rotate 6s linear infinite;
        }
        .clock {
            position: relative;
            border: 4px solid var(--text-color);
            border-radius: 50%;
            display: flex;
            padding: 0;
            margin: 0;
            box-sizing: content-box;
        }
        
        .clock:after {
            content: "";
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--text-color);
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        .clock .hand {
            position: absolute;
            bottom: 50%;
            left: 50%;
            transform-origin: bottom;
            background: var(--accent-color);
        }
        
        .clock .number {
            position: absolute;
            text-align: center;
            transform: translate(-50%, -50%);
            font-weight: bold;
            font-size: 0.6em;
            margin: 0;
        }
        
        .digital {
            font-size: 2em;
            letter-spacing: 2px;
            display: inline-block;
        }
        #messageOptionContainer {
            position: absolute;
            bottom: 0;
            left: 0;
            width: calc(100% - 15px);
            max-height: 200px;
            overflow-y: auto;
            margin-left: 15px;
        }
        #bottomFade {
            width: calc(100% - 15px);
            margin-left: 15px;
            height: 30px;
            background: linear-gradient(0, var(--bg-color), transparent);
            position: absolute;
            bottom: 0;
            left: 0;
            pointer-events: none;
        }
        #messageContainer {
            height: 100%;
            width: 100%;
            display: flex;
            flex-direction: column;
            padding: 15px;
            overflow: hidden;
            overflow-y: auto;
            padding-bottom: 40dvh;
        }
        .messageOptions {
            font-size: 1em;
            padding: 14px;
            border: none;
            border-radius: 10px;
            margin-bottom: 4px;
            background: var(--bbg-color);
        }
        
        .user-chat-message {
            text-align: left;
            background: var(--bbg-color);
            border-radius: 10px;
            margin-bottom: 7px;
            padding: 10px;
            font-size: 0.9em;
            border-bottom-right-radius: 0;
            max-width: 450px;
            align-self: flex-end;
        }
        .bot-chat-message {
            text-align: left;
            background: var(--bg-color);
            border-radius: 10px;
            margin-bottom: 7px;
            padding: 10px;
            font-size: 0.9em;
        }
        @keyframes rotate {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }
        @keyframes easeoutAnimation {
            from {
                opacity: 1;
                filter: blur(0);
            }
            to {
                opacity: 0;
                filter: blur(20px);
            }
        }
        @media(max-width: 900px) {
            .resizesidebarbar {
                display: none;
            }
            #chat-sidebar {
                position: absolute;
                top: 15px;
                left: 15px;
                height: 100%;
            }
        }
    </style>
</head>
<body>
    <section id="content-container" class="sidebarEnabled">
        <section id="sidebar">
            <div id="profile" onclick="showSection('accountcontainer', this)">
                <div id="profilePicContainer">
                    <img id="profilePic" src="/src/person.png">
                    <img id="profilePic" src="/src/person2.png">
                </div>
                <div id="profileInfo">
                    <h4 id="userName">Name</h4>
                    <p id="extraUserInfo">age</p>
                </div>
            </div>
            <div id="sidebar-button-container">
                <button id="learnbtn" class="Active" onclick="showSection('learncontainer', this)">learn</button>
                <button id="chatbtn" onclick="showSection('chatcontainer', this)">chat</button>
                <button id="calendarbtn" onclick="showSection('calendarcontainer', this)">calendar</button>
                <button id="savedbtn" onclick="showSection('shopcontainer', this)">shop</button>
            </div>
            <div class="resizesidebarbar">></div>
        </section>
        <section class="section" id="learncontainer">
            <div id="progress-bar-container">
                <div id="progress-bar-bar-container">
                    <div id="progress-bar">
                        <div class="progress-bar-fill" id="Fill1"></div>
                        <div class="progress-bar-fill" id="Fill2"></div>
                        <div class="progress-bar-fill" id="Fill3"></div>
                        <div class="progress-bar-fill" id="Fill4"></div>
                    </div>
                </div>
                <div id="pointsContainer">
                    <div id="pointsIcon">
                        #
                    </div>
                    <div id="points">
                        0
                    </div>
                </div>
            </div>
            <div id="content">
                <div class="content" id="choose-content">
                    
                </div>
                <div class="content" id="learn-content"></div>
                <div class="content" id="help-content"></div>
                <div id="timer-container">
                    <button id="icon"></button>
                    <button id="time">00:09</button>
                </div>
                <button class="learnOp" id="backBtn">quit</button>
                <button class="learnOp" id="skipBtn">skip</button>
                <div id="exerciseScoreContainer">
                    <p>Exercise Score</p>
                    <div id="exerciseScoreBar">
                        <div id="exerciseScoreBarFill"></div>
                        <div id="exerciseScoreText">0</div>
                    </div>
                    <button id="claimExercisePoints">
                        <div id="rotating-circle"></div>
                        <div id="claimBtnContent">claim</div>
                    </button>
                </div>
            </div>
            <div id="loading">
                <div id="spinner"></div>
            </div>
        </section>
        <section class="section" id="chatcontainer">
                <div class="sec-content chatSidebarEnabled" id="chat-container">
                    <section id="chat-sidebar">
                        <h2>chat</h2>
                        <input type="text" oninput="searchForServer()" placeholder="search...">
                        <div id="server-container"></div>
                    </section>
                    <section id="chat-content">
                        <div id="chat-messages">
                            <div id="messageContainer">
                                <span id="emptyChatText">start a chat</span>
                            </div>
                            <div id="messageOptionContainer">
                            </div>
                            <div id="bottomFade"></div>
                        </div>
                        <form id="message-form" onsubmit="sendMessage(event)">
                            <textarea id="message-input" placeholder="Type a message..." maxlength="100000" oninput="searchForMessageOption()" required></textarea>
                            <button type="submit">Send</button>
                        </form>
                    </section>
                </div>
        </section>
        <section class="section" id="calendarcontainer">
            <div class="sec-content" id="calendar-content">
                
            </div>
        </section>
        <section class="section" id="shopcontainer">
            <div class="sec-content" id="shop-content">
                
            </div>
        </section>
        <section class="section" id="accountcontainer">
            <div class="sec-content" id="account-content">
                
            </div>
        </section>
    </section>
    <script>
        const progress1 = document.getElementById('Fill1');
        const progress2 = document.getElementById('Fill2');
        const progress3 = document.getElementById('Fill3');
        const progress4 = document.getElementById('Fill4');
        const progresses = [progress1, progress2, progress3, progress4];
        const chooseContent = document.getElementById('choose-content');
        const learnContent = document.getElementById('learn-content');
        const helpContent = document.getElementById('help-content');
        const progressBarContainer = document.getElementById('progress-bar-container');
        const loading = document.getElementById('loading');
        const countDownTimeDisplay = document.getElementById('time');
        const timerContainer = document.getElementById('timer-container');
        const backBtn = document.getElementById('backBtn');
        const skipBtn = document.getElementById('skipBtn');
        const pointsElement = document.getElementById('points');
        const pointsContainer = document.getElementById('pointsContainer');
        
        const emptyChatText = document.getElementById('emptyChatText');
        const messageContainer = document.getElementById('messageContainer');
        const messageOptionContainer = document.getElementById('messageOptionContainer');
        
        const exerciseScoreContainer = document.getElementById('exerciseScoreContainer');
        const exerciseScoreBarFill = document.getElementById('exerciseScoreBarFill');
        const exerciseScoreText = document.getElementById('exerciseScoreText');
        const claimExercisePoints = document.getElementById('claimExercisePoints');
        
        const messageInput = document.getElementById('message-input');
        
        let points = parseInt(localStorage.getItem('AIluryLearnPoints'));
        if (!points) points = 0;
        pointsElement.textContent = points;
        let progress = 0;
        let maxprogress = 10;
        let currentProgress = 0;
        let ignoredmR = 0;
        let textTTSenabled = true;
        let currentProgressElement = 0;
        const countDownTime = 5; // from 9 to 1
        const maxlooptries = 10;
        let skipdisplay = "inline";
        let quitdisplay = "inline";
        let ttsRunning = false;
        let currentActiveQuestionType = null;
        let currentChatMessageOptions = {};
        async function sendMessage(e = null) {
            if (e) {
                e.preventDefault();
            }
            if (!currentChatMessageOptions.options) return;
            emptyChatText.style.display = "none";
            let answerFound = false;
            for (let key in currentChatMessageOptions.options) {
                if (key.trim().split(' ').join('').toLowerCase().includes(messageInput.value.trim().split(' ').join('').toLowerCase())) {
                    answerFound = true;
                    const newUserMessage = document.createElement("div");
                    const newBotMessage = document.createElement("div");
                    newUserMessage.className = "user-chat-message";
                    newBotMessage.className = "bot-chat-message";
                    newUserMessage.textContent = key;
                    newBotMessage.textContent = "";
                    messageContainer.appendChild(newUserMessage);
                    messageContainer.appendChild(newBotMessage);
                    messageInput.value = "";
                    await typeEffect(
                        newBotMessage,
                        currentChatMessageOptions.options[key][
                            Math.floor(Math.random() * currentChatMessageOptions.options[key].length)
                        ],
                        10
                    );
                    break;
                }
            }
            if (!answerFound) {
                const newUserMessage = document.createElement("div");
                const newBotMessage = document.createElement("div");
                newUserMessage.className = "user-chat-message";
                newBotMessage.className = "bot-chat-message";
                newUserMessage.textContent = key;
                newBotMessage.textContent = "";
                messageContainer.appendChild(newUserMessage);
                messageContainer.appendChild(newBotMessage);
                typeEffect(newBotMessage, "Sorry but I don't know how to answer your question. Try one of the options, above the input field.", 10);
            }
        }
        function addQuestionMessageOptions() {
            messageOptionContainer.innerHTML = "";
            if (!currentChatMessageOptions.options) return;
            for (let key in currentChatMessageOptions.options) {
                if (key.includes(messageInput.value)) {
                    const newMessageOption = document.createElement("div");
                    newMessageOption.className = "messageOptions";
                    newMessageOption.textContent = key;
                    messageOptionContainer.appendChild(newMessageOption);
                    newMessageOption.onclick = () => {
                        messageInput.value = key;
                        sendMessage();
                    };
                }
            }
        }
        function searchForMessageOption() {
            messageOptionContainer.querySelectorAll('.messageOptions').forEach(op => {
                if (op.textContent.trim().split(' ').join('').toLowerCase().includes(messageInput.value.trim().split(' ').join('').toLowerCase())) {
                    op.style.display = "flex";
                } else {
                    op.style.display = "none";
                }
            });
        }
        const TTS = (() => {
            const synth = window.speechSynthesis;
            let currentUtterance = null;
            
            const supportedLangs = ['en-US', 'de-DE', 'es-ES', 'pt-BR', 'fr-FR'];
            
            function getAvailableVoice(lang) {
                const voices = synth.getVoices();
                return voices.find(v => v.lang === lang) || null;
            }
            
            function speak(text, lang = 'auto') {
                if (!text || typeof text !== 'string') return;
                
                // Stop any current speech safely
                stop();
                
                let selectedLang = (lang === 'auto') ? detectLanguage(text) : lang;
                
                // Fallback auf bekannte Sprache, wenn nicht untersttzt
                if (!supportedLangs.includes(selectedLang)) {
                    selectedLang = 'en-US';
                }
                
                const voice = getAvailableVoice(selectedLang);
                
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = selectedLang;
                if (voice) utterance.voice = voice;
                
                utterance.onend = () => {
                    currentUtterance = null;
                    ttsRunning = false;
                    document.querySelectorAll('.audio-button').forEach(btn => {
                        btn.textContent = "";
                    });
                };
                
                utterance.onerror = (e) => {
                    console.warn('Speech synthesis error:', e.error || e.type);
                    currentUtterance = null;
                };
                
                currentUtterance = utterance;
                synth.speak(utterance);
            }
            
            function stop() {
                if (synth.speaking || synth.pending) {
                    synth.cancel();
                }
                currentUtterance = null;
            }
            
            function detectLanguage(text) {
                const t = text.toLowerCase();
                if (/[]/.test(t)) return 'de-DE';
                if (/[]/.test(t)) return 'es-ES';
                if (/[]/.test(t)) return 'fr-FR';
                if (/[]/.test(t)) return 'pt-BR';
                if (/[a-z]/.test(t)) return 'en-US';
                return 'en-US';
            }
            
            // Lade Stimmen frhzeitig (Safari bentigt das)
            if (synth.onvoiceschanged !== undefined) {
                synth.onvoiceschanged = () => synth.getVoices();
            }
            
            return {
                speak,
                stop
            };
        })();
        function addAudioButton(el, text = "") {
            if (textTTSenabled) {
                const ttsBtn = document.createElement('button');
                ttsBtn.className = "audio-button";
                ttsBtn.textContent = "";
                el.appendChild(ttsBtn);
                ttsBtn.onclick = () => {
                    if (ttsRunning == false) {
                        ttsRunning = true;
                        document.querySelectorAll('.audio-button').forEach(btn => {
                            btn.textContent = "";
                        });
                        ttsBtn.textContent = "";
                        TTS.speak(text);
                    } else {
                        ttsRunning = false;
                        ttsBtn.textContent = "";
                        TTS.stop();
                    }
                };
            }
        }
        let isResizingSidebar = false;
        async function UpdateExerciseScoreNumber(bar, el, number, goalNum) {
            if (goalNum > number) {
                for (let i = number; i <= goalNum; i++) {
                    el.textContent = i;
                    bar.style.width = i + "%";
                    await new Promise(resolve => setTimeout(resolve, 30)); // optional schneller
                }
            } else {
                for (let i = number; i >= goalNum; i--) {
                    el.textContent = i;
                    bar.style.width = i + "%";
                    await new Promise(resolve => setTimeout(resolve, 30));
                }
            }
        }
        function claimPointsOverlay(maxProgressIndex = 19, callback) {
            exerciseScoreContainer.style.display = "flex";
            const barFillProgressPercent =  currentProgress / (maxProgressIndex + 1);
            exerciseScoreBarFill.style.width = barFillProgressPercent + "%";
            if (barFillProgressPercent < 25) {
                exerciseScoreBarFill.classList.add('barFill4');
            } else if (barFillProgressPercent < 50) {
                exerciseScoreBarFill.classList.add('barFill3');
            } else if (barFillProgressPercent < 75) {
                exerciseScoreBarFill.classList.add('barFill2');
            } else {
                exerciseScoreBarFill.classList.add('barFill1');
            }
            const claimablePoints = Math.round(barFillProgressPercent);
            exerciseScoreText.innerHTML = "#";
            const exerciseScoreTextSpan = document.createElement('span');
            exerciseScoreTextSpan.textContent = claimablePoints;
            exerciseScoreText.appendChild(exerciseScoreTextSpan);
            claimExercisePoints.onclick = () => {
                points += claimablePoints;
                if (progressBarContainer.style.display == "none") {
                    progressBarContainer.style.display = "flex";
                    progressBarContainer.style.animation = "none";
                    void progressBarContainer.offsetWidth;
                    progressBarContainer.style.animation = "progressBarAnimation 0.5s ease";
                    setTimeout(() => {
                        progressBarContainer.style.marginTop = "0";
                    }, 300);
                }
                UpdateExerciseScoreNumber(exerciseScoreBarFill, exerciseScoreTextSpan, claimablePoints, 0);
                updatePoints(() => {
                    exerciseScoreContainer.style.animation = "none";
                    void exerciseScoreContainer.offsetWidth;
                    exerciseScoreContainer.style.animation = "easeoutAnimation 1s ease";
                    setTimeout(() => {
                        exerciseScoreContainer.style.display = "none";
                        exerciseScoreBarFill.style.width = "0";
                        exerciseScoreContainer.style.animation = "none";
                        void exerciseScoreContainer.offsetWidth;
                    }, 1000);
                    callback();
                });
            };
        }
        
        function createAnalogClock(container, hours, minutes, size = 240) {
            const clock = document.createElement('div');
            clock.className = 'clock';
            clock.style.width = size + 'px';
            clock.style.height = size + 'px';
            const radius = size / 2;
            const numberRadius = radius * 0.85;
            
            // Zahlen
            for (let i = 1; i <= 12; i++) {
                const angle = (i * 30 - 90) * Math.PI / 180;
                const x = radius + Math.cos(angle) * numberRadius;
                const y = radius + Math.sin(angle) * numberRadius;
                
                const number = document.createElement('div');
                number.className = 'number';
                number.textContent = i;
                number.style.left = `${x}px`;
                number.style.top = `${y}px`;
                clock.appendChild(number);
            }
            
            // Zeiger
            const hourHand = document.createElement('div');
            hourHand.className = 'hand';
            hourHand.style.width = '6px';
            hourHand.style.height = radius * 0.6 + 'px';
            
            const minuteHand = document.createElement('div');
            minuteHand.className = 'hand';
            minuteHand.style.width = '4px';
            minuteHand.style.height = radius * 0.85 + 'px';
            
            // Rotation berechnen
            const hourDeg = ((hours % 12) + minutes / 60) * 30;
            const minuteDeg = minutes * 6;
            
            hourHand.style.transform = `translateX(-50%) rotate(${hourDeg}deg)`;
            minuteHand.style.transform = `translateX(-50%) rotate(${minuteDeg}deg)`;
            
            clock.appendChild(hourHand);
            clock.appendChild(minuteHand);
            
            container.appendChild(clock);
        }
        
        function createDigitalClock(container, hours, minutes) {
            const digital = document.createElement('div');
            digital.className = 'digital';
            const paddedH = hours.toString().padStart(2, '0');
            const paddedM = minutes.toString().padStart(2, '0');
            digital.textContent = `${paddedH}:${paddedM}`;
            container.appendChild(digital);
        }
        
        document.querySelector('.resizesidebarbar').addEventListener('touchstart', (e) => {
            isResizingSidebar = true;
        });
        
        window.addEventListener('touchmove', (e) => {
            if (!isResizingSidebar) return;
            e.preventDefault();
            const viewportWidth = document.documentElement.clientWidth;
            const vw = (e.touches[0].clientX / viewportWidth) * 100;
            document.documentElement.style.setProperty('--sidebar-width', `${vw}vw`);
        });
        
        window.addEventListener('touchend', () => {
            isResizingSidebar = false;
        });
        
        document.querySelector('.resizesidebarbar').addEventListener('mousedown', (e) => {
            isResizingSidebar = true;
        });
        
        window.addEventListener('mousemove', (e) => {
            if (!isResizingSidebar) return;
            const viewportWidth = document.documentElement.clientWidth;
            const vw = (e.clientX / viewportWidth) * 100;
            document.documentElement.style.setProperty('--sidebar-width', `${vw}vw`);
        });
        
        window.addEventListener('mouseup', () => {
            isResizingSidebar = false;
        });
        
        const textarea = document.getElementById('message-input');
        
        textarea.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = this.scrollHeight + 'px';
        });
        async function typeEffect(element, rtext, typeDelay = 10) {
            let text = rtext;
            if (Array.isArray(text)) {
                text = text[Math.floor(Math.random() * text.length)];
            }
            let allLetters = text.split('').reverse();
            for (let i = 0; i < text.length; i++) {
                if (!element || !element.parentElement) break;
                element.querySelectorAll('.cursorElement').forEach(el => el.remove());
                element.textContent += allLetters.pop();
                if (i != text.length - 1) {
                    const cursorSpan = document.createElement('span');
                    cursorSpan.textContent = "|";
                    cursorSpan.className = "cursorElement";
                    element.appendChild(cursorSpan);
                }
                await new Promise(resolve => setTimeout(resolve, typeDelay));
            }
        }
        function showSection(sectionid, btn) {
            document.querySelectorAll('.section').forEach(sec => sec.style.display = "none");
            document.getElementById(sectionid).style.display = "flex";
            document.querySelectorAll('#sidebar-button-container .Active').forEach(el => el.classList.remove('Active'));
            if (sectionid == "chatcontainer") {
                emptyChatText.textContent = "";
                if (emptyChatText.style.display != "none") {
                    typeEffect(emptyChatText, "start a chat", 90);
                }
                addQuestionMessageOptions();
            }
            btn.classList.add('Active');
        }
        async function UpdateNumber(el, number, goalNum) {
            if (goalNum > number) {
                for (let i = number; i <= goalNum; i++) {
                    el.textContent = i;
                    await new Promise(resolve => setTimeout(resolve, 30)); // optional schneller
                }
            } else {
                for (let i = number; i >= goalNum; i--) {
                    el.textContent = i;
                    await new Promise(resolve => setTimeout(resolve, 30));
                }
            }
        }
        async function updatePoints(callback) {
            localStorage.setItem('AIluryLearnPoints', points);
            let number = parseInt(pointsElement.textContent);
            if (isNaN(number)){
                number = 0;
            }
            if (points > number) {
                pointsContainer.style.animation = "none";
                void pointsContainer.offsetWidth;
                pointsContainer.style.animation = "pointAnimation 2s ease";
            }
            await UpdateNumber(pointsElement, number, points);
            if (typeof callback === 'function') {
                callback();
            }
        }
        function startLoad() {
            loading.style.display = "flex";
        }
        function stopLoad() {
            loading.style.display = "none";
        }
        let continueLoop = false;
        async function countDown(callback) {
            timerContainer.style.display = "block";
            skipBtn.style.display = "none";
            continueLoop = true;
            timerContainer.onclick = () => {
                timerContainer.onclick = null;
                continueLoop = false;
                timerContainer.style.display = "none";
                skipBtn.style.display = skipdisplay;
            };
            for (let i = countDownTime; i >= 0; i--) {
                if (continueLoop) {
                    countDownTimeDisplay.textContent = "00:" + (i < 10 ? "0" + i : i);
                    await new Promise(resolve => setTimeout(resolve, 1000));
                }
            }
            timerContainer.style.display = "none";
            skipBtn.style.display = skipdisplay;
            callback();
        }
        
        function shuffleArray(array) {
            const arr = array.slice();
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
            return arr;
        }
        function cutArray(array, maxArraySize = 20) {
            if (array.length < maxArraySize) return array;
            return array
                .slice()
                .sort(() => Math.random() - 0.5)
                .slice(0, maxArraySize);
        }
        async function addQuestionText(text, el, clearContent = true) {
            if (clearContent) {
                el.innerHTML = "";
            }
            const questionptag = document.createElement("p");
            questionptag.className = "questionTextpTag";
            //questionptag.textContent = `${text}`;
            el.appendChild(questionptag);
            await typeEffect(questionptag, text, 10);
            addAudioButton(questionptag, text);
        }
        const locationNames = {
            "westernsahara": "Western Sahara",
            "guineabissau": "Guinea-bissau",
            "centralafricanrepublic": "Central African Republic",
            "southsudan": "South Sudan",
            "republicofthecongo": "Republic of the Congo",
            "democraticrepublicofthecongo": "Democratic Republic of the Congo",
            "equatorialguinea": "Equatorial Guinea",
            "southafrica": "South Africa",
            "czechrepublic": "Czech Republic",
            "unitedkingdom": "United Kingdom",
            "dominicanrepublic": "Dominican Republic",
            "unitedstatesofamerica": "United States of America",
            "unitedstatesofamerica2": "United States of America",
            "elsalvador": "El Salvador",
            "costarica": "Costa Rica"
        };
        
        function filterLocationName(name) {
            if (locationNames[name]) {
                return locationNames[name];
            }
            return name.charAt(0).toUpperCase() + name.slice(1);
        }
        function timeDifferencePercent(time1, time2) {
            function toMinutes(t) {
                const [h, m] = t.split(":").map(Number);
                return h * 60 + m;
            }
            
            let diff = Math.abs(toMinutes(time1) - toMinutes(time2));
            
            if (diff > 500) diff = 500;
            
            const percent = (diff / 500) * 100;
            return percent;
        }
        function minuteDifferencePercent(time1, time2) {
            function toMinutes(t) {
                const [h, m] = t.split(":").map(Number);
                return h * 60 + m;
            }
            
            let diff = Math.abs(toMinutes(time1) - toMinutes(time2));
            
            if (diff === 0) return 0;
            if (diff > 59) return 100;
            
            const percent = (diff / 59) * 100;
            return percent;
        }
        function normalizeTimeString(timeStr) {
            if (typeof timeStr !== "string") return "00:00";
            
            const parts = timeStr.split(":");
            if (parts.length !== 2) return "00:00";
            
            const [hStr, mStr] = parts;
            const h = Number(hStr);
            const m = Number(mStr);
            
            if (
                Number.isNaN(h) || Number.isNaN(m) ||
                h < 0 || h > 23 ||
                m < 0 || m > 59
            ) {
                return "00:00";
            }
            
            const hh = h.toString().padStart(2, "0");
            const mm = m.toString().padStart(2, "0");
            
            return `${hh}:${mm}`;
        }
        
        function stripLeadingZeros(timeStr) {
            const [h, m] = timeStr.split(":");
            return `${parseInt(h, 10)}:${parseInt(m, 10)}`;
        }
        function addQuestion(data, callback, lastindex = -0) {
            let qindex = lastindex + 1;
            
            let currentdata = data[qindex];
            if (!currentdata) {
                claimPointsOverlay(maxprogress, () => {
                    stopQuestions();
                    fetchQuestions("/questions/questions.json");
                });
                return;
            }
            if (currentProgressElement != progresses.length - 1) {
                skipBtn.onclick = () => {
                    currentProgressElement++;
                    if (currentProgressElement == progresses.length - 1) {
                        skipdisplay = "none";
                        skipBtn.style.display = "none";
                    }
                    callback(qindex);
                };
            }
            addQuestionText(currentdata.text, learnContent);
            maxprogress = data.length;
            currentChatMessageOptions = {
                options: {
                    "How do i skip ?": [
                        `Click the skip button, in the top right corner. if you don't see the button there, you have reached your skip limit.`,
                        `Click the skip botton. if you do not see the skip button, in the top right corner, then you have probably reached your skip limit.`,
                        `If you can't see the skip button, you have probably reached your skip limit.`,
                        `If you don't see the skip button, you probably reached the skip limit.`
                    ],
                    "How many questions are left ?": [
                        `you got only ${maxprogress - progress} questions to go `,
                        `you got ${maxprogress - progress} questions to go `,
                        `there are ${maxprogress - progress} questions left`,
                        `there are ${maxprogress - progress} more questions to go `,
                        `there are ${maxprogress - progress} unanswered questions left`,
                        `you are almost done. only ${maxprogress - progress} more questions to go `
                    ],
                    "How many questions have I answered ?": [
                        `you have answered ${progress} questions`,
                        `you answered ${progress} questions `
                    ],
                    "how many questions are there ?": [
                        `${maxprogress} questions`,
                        `there are ${maxprogress} questions`,
                        `there are ${maxprogress} questions, in your current exercize`,
                        `${maxprogress} questions, not too little and not too much`
                    ]
                }
            }
            if (currentdata.options) {
                currentChatMessageOptions.options["How do i give my answer ?"] = [
                    `Click one of the countries, on the map, below the question`,
                    `Click on one the ${currentdata.options.length} countries, below the question`,
                    `Click on one of the ${currentdata.options.length} countries`,
                    `Choose one of the ${currentdata.options.length} countries, below the current question`
                ];
                if (currentdata.type == "multiop") {
                    const currentArray = shuffleArray(currentdata.options);
                    currentArray.forEach((op, index) => {
                        const div1 = document.createElement('div');
                        const div2 = document.createElement('div');
                        const div3 = document.createElement('div');
                        div1.className = "optionBtn";
                        div2.className = "optionFill";
                        div1.id = "optionBtn" + index;
                        div2.id = "optionFill" + index;
                        if (isNaN(op.text) && op.text.trim() !== "") {
                            addAudioButton(div1, op.text);
                        }
                        div1.onclick = (event) => {
                            if (event.target && event.target.classList.contains('audio-button')) return;
                            if (parseInt(op.percent) > 85) {
                                div1.classList.add("green2");
                            } else if (parseInt(op.percent) > 35) {
                                div1.classList.add("orange2");
                            } else {
                                div1.classList.add("red2");
                            }
                            if (parseInt(op.percent) > 85) {
                                div2.classList.add("green1");
                            } else if (parseInt(op.percent) > 35) {
                                div2.classList.add("orange1");
                            } else {
                                div2.classList.add("red1");
                            }
                            currentProgress += parseInt(op.percent);
                            if (parseInt(op.percent) > 50) {
                                points += Math.round(parseInt(op.percent) / 10);
                            } else {
                                points -= Math.round((100 - parseInt(op.percent)) / 20);
                            }
                            updatePoints();
                            div2.style.width = op.percent + "%";
                            div1.onclick = null;
                            currentArray.forEach((el, index2) => {
                                if (index != index2) {
                                    const op = document.getElementById("optionBtn" + index2);
                                    const opfill = document.getElementById("optionFill" + index2);
                                    const opText = document.getElementById("optionTitle" + index2);
                                    opfill.style.width = el.percent + "%";
                                    op.onclick = null;
                                    if (el.correct == true && op && opfill) {
                                        opfill.classList.add("green1");
                                        op.classList.add("green2");
                                    } else if (op && opfill) {
                                        opfill.classList.add("defaultFill");
                                        op.classList.add("defaultBg");
                                        //opText.textContent = el.result;
                                    }
                                }
                            });
                            progress = qindex;
                            maxprogress = data.length - 1;
                            const percentage = (progress / maxprogress) * 100;
                            progresses[currentProgressElement].style.width = `${percentage}%`;
                            countDown(() => {
                                callback(qindex);
                            });
                        };
                        div3.className = "optionTitle";
                        div3.id = "optionTitle" + index;
                        div3.textContent = op.text;
                        //div2.textContent = op.percent;
                        //div1.textContent = "option" + index;
                        div1.appendChild(div2);
                        div1.appendChild(div3);
                        div1.style.pointerEvents = "none";
                        setTimeout(() => {
                            learnContent.appendChild(div1);
                            if (index == currentArray.length - 1) {
                                skipBtn.style.display = skipdisplay;
                                backBtn.style.display = quitdisplay;
                                currentArray.forEach((el, index2) => {
                                    const op = document.getElementById("optionBtn" + index2);
                                    op.style.pointerEvents = "auto";
                                });
                            }
                        }, index * 100);
                    });
                }
                else if (currentdata.type === "continentPick") {
                    const continentsMapContainer = document.createElement('div');
                    continentsMapContainer.id = "continentsMapContainer";
                    
                    const img = document.createElement('img');
                    img.src = "/src/continentMap.png";
                    continentsMapContainer.appendChild(img);
                    
                    const allContinents = currentdata.options;
                    
                    allContinents.forEach(continent => {
                        const location = document.createElement('span');
                        location.id = continent.text;
                        location.className = "location";
                        const locationName = document.createElement('span');
                        locationName.textContent = filterLocationName(continent.text);
                        locationName.className = "name";
                        location.appendChild(locationName);
                        continentsMapContainer.appendChild(location);
                        
                        location.onclick = () => {
                            /*if (continent.correct === true) {
                                points += 10;
                            } else {
                                points -= 10;
                            }*/
                            if (parseInt(continent.percent) > 50) {
                                points += Math.round(parseInt(continent.percent) / 10);
                            } else {
                                points -= Math.round((100 - parseInt(continent.percent)) / 20);
                            }
                            const percent = parseInt(continent.percent, 10);
                            if (percent > 85) {
                                location.classList.add("green1");
                            } else if (percent > 35) {
                                location.classList.add("orange1");
                            } else {
                                location.classList.add("red1");
                            }
                            currentProgress += percent;
                            
                            updatePoints();
                            
                            // Disable all click events after selection
                            allContinents.forEach(c => {
                                const loc = continentsMapContainer.querySelector(`#${CSS.escape(c.text)}`);
                                if (loc) {
                                    loc.onclick = null;
                                    if (c.correct == true && loc.id != continent.text) {
                                        loc.classList.add("green1");
                                    }
                                    else if (loc.id != continent.text) {
                                        loc.style.backgroundColor = "var(--default-bbg-color)";
                                    }
                                }
                            });
                            
                            progress = qindex;
                            maxprogress = data.length - 1;
                            const percentage = (progress / maxprogress) * 100;
                            progresses[currentProgressElement].style.width = `${percentage}%`;
                            
                            countDown(() => {
                                callback(qindex);
                            });
                        };
                    });
                    const randomQuestionIndex = Math.floor(Math.random() * currentdata.text.length);
                    addQuestionText(currentdata.text[randomQuestionIndex], learnContent);
                    learnContent.appendChild(continentsMapContainer);
                    skipBtn.style.display = skipdisplay;
                    backBtn.style.display = quitdisplay;
                }
                else if (currentdata.type === "EuropeCountryPick") {
                    const europeMapContainer = document.createElement('div');
                    europeMapContainer.id = "europeMapContainer";
                    
                    const img = document.createElement('img');
                    img.src = "/src/europeMap.jpeg";
                    europeMapContainer.appendChild(img);
                    
                    const allCountries = currentdata.options;
                    
                    allCountries.forEach(continent => {
                        const location = document.createElement('span');
                        location.id = continent.text;
                        location.className = "location";
                        const locationName = document.createElement('span');
                        locationName.textContent = filterLocationName(continent.text);
                        locationName.className = "name";
                        location.appendChild(locationName);
                        europeMapContainer.appendChild(location);
                        
                        location.onclick = () => {
                            /*if (continent.correct === true) {
                                points += 10;
                            } else {
                                points -= 10;
                            }*/
                            
                            if (parseInt(continent.percent) > 50) {
                                points += Math.round(parseInt(continent.percent) / 10);
                            } else {
                                points -= Math.round((100 - parseInt(continent.percent)) / 20);
                            }
                            const percent = parseInt(continent.percent, 10);
                            if (percent > 85) {
                                location.classList.add("green1");
                            } else if (percent > 35) {
                                location.classList.add("orange1");
                            } else {
                                location.classList.add("red1");
                            }
                            currentProgress += percent;
                            
                            updatePoints();
                            
                            // Disable all click events after selection
                            const locs = Array.from(europeMapContainer.querySelectorAll(`.location`));
                            allCountries.forEach((con, index) => {
                                const loc = locs[index];
                                if (loc) {
                                    loc.onclick = null;
                                    if (con.correct == true && loc.id != continent.text) {
                                        loc.classList.add("green1");
                                    }
                                    else if (loc.id != continent.text && con.correct == false) {
                                        loc.style.backgroundColor = "var(--default-bbg-color)";
                                    }
                                }
                            });
                            
                            progress = qindex;
                            maxprogress = data.length - 1;
                            const percentage = (progress / maxprogress) * 100;
                            progresses[currentProgressElement].style.width = `${percentage}%`;
                            
                            countDown(() => {
                                callback(qindex);
                            });
                        };
                    });
                    const randomQuestionIndex = Math.floor(Math.random() * currentdata.text.length);
                    addQuestionText(currentdata.text[randomQuestionIndex], learnContent);
                    learnContent.appendChild(europeMapContainer);
                    skipBtn.style.display = skipdisplay;
                    backBtn.style.display = quitdisplay;
                }
                else if (currentdata.type === "NorthAmericanCountryPick") {
                    const northAmericaMapContainer = document.createElement('div');
                    northAmericaMapContainer.id = "northAmericaMapContainer";
                    
                    const img = document.createElement('img');
                    img.src = "/src/northAmericaMap.jpeg";
                    northAmericaMapContainer.appendChild(img);
                    
                    const allCountries = currentdata.options;
                    
                    allCountries.forEach(continent => {
                        const location = document.createElement('span');
                        location.id = continent.text;
                        location.className = "location";
                        const locationName = document.createElement('span');
                        locationName.textContent = filterLocationName(continent.text);
                        locationName.className = "name";
                        location.appendChild(locationName);
                        northAmericaMapContainer.appendChild(location);
                        
                        location.onclick = () => {
                            /*if (continent.correct === true) {
                                points += 10;
                            } else {
                                points -= 10;
                            }*/
                            
                            if (parseInt(continent.percent) > 50) {
                                points += Math.round(parseInt(continent.percent) / 10);
                            } else {
                                points -= Math.round((100 - parseInt(continent.percent)) / 20);
                            }
                            const percent = parseInt(continent.percent, 10);
                            if (percent > 85) {
                                location.classList.add("green1");
                            } else if (percent > 35) {
                                location.classList.add("orange1");
                            } else {
                                location.classList.add("red1");
                            }
                            currentProgress += percent;
                            
                            updatePoints();
                            
                            // Disable all click events after selection
                            const locs = Array.from(northAmericaMapContainer.querySelectorAll(`.location`));
                            allCountries.forEach((con, index) => {
                                const loc = locs[index];
                                if (loc) {
                                    loc.onclick = null;
                                    if (con.correct == true && loc.id != continent.text) {
                                        loc.classList.add("green1");
                                    }
                                    else if (loc.id != continent.text && con.correct == false) {
                                        loc.style.backgroundColor = "var(--default-bbg-color)";
                                    }
                                }
                            });
                            
                            progress = qindex;
                            maxprogress = data.length - 1;
                            const percentage = (progress / maxprogress) * 100;
                            progresses[currentProgressElement].style.width = `${percentage}%`;
                            
                            countDown(() => {
                                callback(qindex);
                            });
                        };
                    });
                    const randomQuestionIndex = Math.floor(Math.random() * currentdata.text.length);
                    addQuestionText(currentdata.text[randomQuestionIndex], learnContent);
                    learnContent.appendChild(northAmericaMapContainer);
                    skipBtn.style.display = skipdisplay;
                    backBtn.style.display = quitdisplay;
                }
                else if (currentdata.type === "AfricaCountryPick") {
                    const africaMapContainer = document.createElement('div');
                    africaMapContainer.id = "africaMapContainer";
                    
                    const img = document.createElement('img');
                    img.src = "/src/africaMap.svg";
                    africaMapContainer.appendChild(img);
                    
                    const allCountries = currentdata.options;
                    
                    allCountries.forEach(continent => {
                        const location = document.createElement('span');
                        location.id = continent.text;
                        location.className = "location";
                        const locationName = document.createElement('span');
                        locationName.textContent = filterLocationName(continent.text);
                        locationName.className = "name";
                        location.appendChild(locationName);
                        africaMapContainer.appendChild(location);
                        
                        location.onclick = () => {
                            /*if (continent.correct === true) {
                                points += 10;
                            } else {
                                points -= 10;
                            }*/
                            
                            if (parseInt(continent.percent) > 50) {
                                points += Math.round(parseInt(continent.percent) / 10);
                            } else {
                                points -= Math.round((100 - parseInt(continent.percent)) / 20) ;
                            }
                            const percent = parseInt(continent.percent, 10);
                            if (percent > 85) {
                                location.classList.add("green1");
                            } else if (percent > 35) {
                                location.classList.add("orange1");
                            } else {
                                location.classList.add("red1");
                            }
                            currentProgress += percent;
                            
                            updatePoints();
                            
                            // Disable all click events after selection
                            const locs = Array.from(africaMapContainer.querySelectorAll(`.location`));
                            allCountries.forEach((con, index) => {
                                const loc = locs[index];
                                if (loc) {
                                    loc.onclick = null;
                                    if (con.correct == true && loc.id != continent.text) {
                                        loc.classList.add("green1");
                                    }
                                    else if (loc.id != continent.text && con.correct == false) {
                                        loc.style.backgroundColor = "var(--default-bbg-color)";
                                    }
                                }
                            });
                            
                            progress = qindex;
                            maxprogress = data.length - 1;
                            const percentage = (progress / maxprogress) * 100;
                            progresses[currentProgressElement].style.width = `${percentage}%`;
                            
                            countDown(() => {
                                callback(qindex);
                            });
                        };
                    });
                    const randomQuestionIndex = Math.floor(Math.random() * currentdata.text.length);
                    skipBtn.style.display = skipdisplay;
                    backBtn.style.display = quitdisplay;
                    
                    addQuestionText(currentdata.text[randomQuestionIndex], learnContent);
                    learnContent.appendChild(africaMapContainer);
                }
            }
        }
        function addMathOptions(data, callback) {
            learnContent.innerHTML = ""; // alte Buttons entfernen
            
            const keys = Object.keys(data);
            for (const key of keys) {
                if (key == "hard") {
                    const mathLevelOption = document.createElement("div");
                    mathLevelOption.className = "MathLevelOption hard";
                    const btngrid = document.createElement("div");
                    btngrid.className = "btngrid";
                    mathLevelOption.appendChild(btngrid);
                    const text = document.createElement("div");
                    text.className = "text";
                    const hinge = document.createElement("div");
                    hinge.className = "hinge";
                    const part1 = document.createElement("div");
                    part1.className = "part1";
                    hinge.appendChild(part1);
                    const part2 = document.createElement("div");
                    part2.className = "part2";
                    hinge.appendChild(part2);
                    text.textContent = key;
                    text.appendChild(hinge);
                    mathLevelOption.appendChild(text);
                    mathLevelOption.addEventListener("click", () => {
                        callback(key); // z.B. "easy", "medium", "hard"
                    });
                    learnContent.appendChild(mathLevelOption);
                }else if (key == "medium") {
                    const mathLevelOption = document.createElement("div");
                    mathLevelOption.className = "MathLevelOption medium";
                    const text = document.createElement("div");
                    text.className = "text";
                    const mathSymbols = [
                      '+', '-', '', '', '', '/',
                      '=', '', '<', '>', '', '', '', '',
                      '', '', '', '', '', '', '', '', '',
                      '', '', '', '', '', '', '', '', '{}',
                      '', '', '', '', '',
                      '', '', '', '', '', '', '',
                      'f(x)', 'f(x)', 'f(x)', '', '', '', '', 'lim',
                      '', '', '', '', '|x|', '!', ''
                    ];
                    for (let i = 0; i < 50; i++) {
                        const symbol = document.createElement("div");
                        symbol.className = "mathsimbol";
                        symbol.textContent = mathSymbols[Math.floor(Math.random() * mathSymbols.length)];
                        mathLevelOption.appendChild(symbol);
                        const x = Math.floor(Math.random() * 100);
                        const y = Math.floor(Math.random() * 100);
                        symbol.style.top = y + "%";
                        symbol.style.left = i * 2 + "%";
                    }
                    text.textContent = key;
                    mathLevelOption.appendChild(text);
                    mathLevelOption.addEventListener("click", () => {
                        callback(key); // z.B. "easy", "medium", "hard"
                    });
                    learnContent.appendChild(mathLevelOption);
                }else if (key == "easy") {
                    const mathLevelOption = document.createElement("div");
                    mathLevelOption.className = "MathLevelOption easy";
                    const text = document.createElement("div");
                    text.className = "text";
                    text.textContent = key;
                    mathLevelOption.appendChild(text);
                    mathLevelOption.addEventListener("click", () => {
                        callback(key); // z.B. "easy", "medium", "hard"
                    });
                    learnContent.appendChild(mathLevelOption);
                }
            }
        }
        function confirmCorrectAnswer(questionsection, correctAnswer) {
            const resultspantag = document.createElement('span');
            resultspantag.textContent = " correct ";
            questionsection.appendChild(resultspantag);
        }
        function addMathQuestions(rdata, level) {
            const fileName = "questions/math/" + level + "math.json";
            startLoad();
            fetch(fileName)
                .then(response => {
                    if (response.ok) {
                        return response.json();
                    }
                })
                .then(data => {
                    stopLoad();
                    const shuffled = shuffleArray(cutArray(data));
                    function addQuestionAuto(rindex = -0) {
                        skipBtn.style.display = "none";
                        maxprogress = 19;
                        if (rindex == maxprogress) {
                            claimPointsOverlay(maxprogress, () => {
                                stopQuestions();
                                fetchQuestions("/questions/questions.json");
                            });
                            return;
                        }
                        let randomTypeOfExercise = rdata[Math.floor(Math.random() * rdata.length)];
                        while (randomTypeOfExercise == "quiz" && (!data || data.length === 0)) {
                            randomTypeOfExercise = rdata[Math.floor(Math.random() * rdata.length)];
                        }
                        if (currentProgressElement != progresses.length - 1) {
                            skipBtn.onclick = () => {
                                currentProgressElement++;
                                rindex++;
                                if (currentProgressElement == progresses.length - 1) {
                                    skipdisplay = "none";
                                    skipBtn.style.display = "none";
                                }
                                addQuestionAuto(rindex);
                            };
                        }
                        function shuffleArray(array) {
                            for (let i = array.length - 1; i > 0; i--) {
                                const j = Math.floor(Math.random() * (i + 1)); // random index from 0 to i
                                [array[i], array[j]] = [array[j], array[i]]; // swap
                            }
                            return array;
                        }
                        function formatNumberSmart(num) {
                            return parseFloat(num.toFixed(2));
                        }
                        function addCorrectAnswerToSection(questionsection, correctAnswer) {
                            const resultspantag = document.createElement('span');
                            resultspantag.textContent = " correct answer: " + correctAnswer;
                            questionsection.appendChild(resultspantag);
                        }
                        if (randomTypeOfExercise == "quiz"){
                            const randomObject = shuffled[Math.floor(Math.random() * shuffled.length)];
                            const questionText = randomObject.text[Math.floor(Math.random() * randomObject.text.length)];
                            addQuestionText(questionText, learnContent);
                            const alloptions = shuffleArray(randomObject.options);
                            currentChatMessageOptions = {
                                options: {
                                    "How do i give my answer ?": [
                                        `Click one of the options below the question`,
                                        `Click on one the ${alloptions.length} options, below the question`,
                                        `Click on one of the ${alloptions.length} options`,
                                        `Choose one of the ${alloptions.length} options, below the current question`
                                    ],
                                    "How do i skip ?": [
                                        `Click the skip button, in the top right corner. if you don't see the button there, you have reached your skip limit.`,
                                        `Click the skip botton. if you do not see the skip button, in the top right corner, then you have probably reached your skip limit.`,
                                        `If you can't see the skip button, you have probably reached your skip limit.`,
                                        `If you don't see the skip button, you probably reached the skip limit.`
                                    ],
                                    "How many questions are left ?": [
                                        `you got only ${maxprogress - progress} questions to go `,
                                        `you got ${maxprogress - progress} questions to go `,
                                        `there are ${maxprogress - progress} questions left`,
                                        `there are ${maxprogress - progress} more questions to go `,
                                        `there are ${maxprogress - progress} unanswered questions left`,
                                        `you are almost done. only ${maxprogress - progress} more questions to go `
                                    ],
                                    "How many questions have I answered ?": [
                                        `you have answered ${progress} questions`,
                                        `you answered ${progress} questions `
                                    ],
                                    "how many questions are there ?": [
                                        `${maxprogress} questions`,
                                        `there are ${maxprogress} questions`,
                                        `there are ${maxprogress} questions, in your current exercize`,
                                        `${maxprogress} questions, not too little and not too much`
                                    ]
                                }
                            }
                            alloptions.forEach((op, index) => {
                                const div1 = document.createElement('div');
                                const div2 = document.createElement('div');
                                const div3 = document.createElement('div');
                                div1.className = "optionBtn";
                                div2.className = "optionFill";
                                div1.id = "optionBtn" + index;
                                div2.id = "optionFill" + index;
                                if (isNaN(op.text) && op.text.trim() !== "") {
                                    addAudioButton(div1, op.text);
                                }
                                div1.onclick = (event) => {
                                    if (event.target && event.target.classList.contains('audio-button')) return;
                                    if (parseInt(op.percent) > 95) {
                                        div1.classList.add("green2");
                                        div2.classList.add("green1");
                                    } else if (parseInt(op.percent) > 35) {
                                        div1.classList.add("orange2");
                                        div2.classList.add("orange1");
                                    } else {
                                        div1.classList.add("red2");
                                        div2.classList.add("red1");
                                    }
                                    if (parseInt(op.percent) > 50) {
                                        points += Math.round(parseInt(op.percent) / 10);
                                    } else {
                                        points -= Math.round((100 - parseInt(op.percent)) / 20);
                                    }
                                    updatePoints();
                                    currentProgress += parseInt(op.percent);
                                    div2.style.width = op.percent + "%";
                                    div1.onclick = null;
                                    alloptions.forEach((el, index2) => {
                                        if (index != index2) {
                                            const op = document.getElementById("optionBtn" + index2);
                                            const opfill = document.getElementById("optionFill" + index2);
                                            const opText = document.getElementById("optionTitle" + index2);
                                            opfill.style.width = el.percent + "%";
                                            op.onclick = null;
                                            if (el.correct == true && op && opfill) {
                                                opfill.classList.add("green1");
                                                op.classList.add("green2");
                                            } else if (op && opfill) {
                                                opfill.classList.add("defaultFill");
                                                op.classList.add("defaultBg");
                                                //opText.textContent = el.result;
                                            }
                                        }
                                    });
                                    rindex++;
                                    progress = rindex;
                                    const percentage = (progress / maxprogress) * 100;
                                    progresses[currentProgressElement].style.width = `${percentage}%`;
                                    countDown(() => {
                                        addQuestionAuto(rindex);
                                    });
                                };
                                div3.className = "optionTitle";
                                div3.id = "optionTitle" + index;
                                div3.textContent = op.text;
                                //div2.textContent = op.percent;
                                //div1.textContent = "option" + index;
                                div1.appendChild(div2);
                                div1.appendChild(div3);
                                div1.style.pointerEvents = "none";
                                setTimeout(() => {
                                    learnContent.appendChild(div1);
                                    if (index == alloptions.length - 1) {
                                        skipBtn.style.display = skipdisplay;
                                        backBtn.style.display = quitdisplay;
                                        alloptions.forEach((el, index2) => {
                                            const op = document.getElementById("optionBtn" + index2);
                                            op.style.pointerEvents = "auto";
                                        });
                                    }
                                }, index * 100);
                            });
                        }
                        else if (randomTypeOfExercise == "numbergrid") {
                            const startNumber = Math.floor(Math.random() * 100);
                            let endNumber = Math.floor(Math.random() * 100);
                            while (startNumber == endNumber) {
                                endNumber = Math.floor(Math.random() * 100);
                            }
                            let questionText = "bigger or smaller";
                            let smallerNumber = 0;
                            let biggerNumber = 0;
                            if (startNumber > endNumber) {
                                questionText = `What number is ${startNumber - endNumber} smaller than ${startNumber}`;
                                biggerNumber = startNumber;
                                smallerNumber = endNumber;
                            } else if (startNumber < endNumber) {
                                questionText = `What number is ${endNumber - startNumber} bigger than ${startNumber}`;
                                biggerNumber = endNumber;
                                smallerNumber = startNumber;
                            }
                            
                            addQuestionText(questionText, learnContent);
                            
                            function floorToTen(n) {
                                return Math.floor(n / 10) * 10;
                            }
                            
                            function nextTen(n) {
                                return Math.ceil((n + 1) / 10) * 10;
                            }
                            
                            let difference = biggerNumber - smallerNumber;
                            
                            if (difference < 100) {
                                let result = 100 - difference;
                                let randomNum = Math.floor(Math.random() * 3);
                                
                                if (randomNum === 1) {
                                    if (smallerNumber > result) {
                                        smallerNumber -= result;
                                    } else {
                                        // Restbetrag wird biggerNumber zugeschlagen
                                        biggerNumber += result - smallerNumber;
                                        smallerNumber = 0;
                                    }
                                } else if (randomNum === 2) {
                                    let half = Math.round(result / 2);
                                    if (smallerNumber > half) {
                                        smallerNumber -= half;
                                    } else {
                                        biggerNumber += half - smallerNumber;
                                        smallerNumber = 0;
                                    }
                                    biggerNumber += half;
                                } else {
                                    biggerNumber += result;
                                }
                            }
                            currentChatMessageOptions = {
                                options: {
                                    "How do i give my answer ?": [
                                        `Click one of the numbers below the question`,
                                        `Click on one the ${nextTen(biggerNumber) - 1} numbers, below the question`,
                                        `Click on one of the ${nextTen(biggerNumber) - 1} numbers`,
                                        `Choose one of the ${nextTen(biggerNumber) - 1} numbers, below the current question`
                                    ],
                                    "How do i skip ?": [
                                        `Click the skip button, in the top right corner. if you don't see the button there, you have reached your skip limit.`,
                                        `Click the skip botton. if you do not see the skip button, in the top right corner, then you have probably reached your skip limit.`,
                                        `If you can't see the skip button, you have probably reached your skip limit.`,
                                        `If you don't see the skip button, you probably reached the skip limit.`
                                    ],
                                    "How many questions are left ?": [
                                        `you got only ${maxprogress - progress} questions to go `,
                                        `you got ${maxprogress - progress} questions to go `,
                                        `there are ${maxprogress - progress} questions left`,
                                        `there are ${maxprogress - progress} more questions to go `,
                                        `there are ${maxprogress - progress} unanswered questions left`,
                                        `you are almost done. only ${maxprogress - progress} more questions to go `
                                    ],
                                    "How many questions have I answered ?": [
                                        `you have answered ${progress} questions`,
                                        `you answered ${progress} questions `
                                    ],
                                    "how many questions are there ?": [
                                        `${maxprogress} questions`,
                                        `there are ${maxprogress} questions`,
                                        `there are ${maxprogress} questions, in your current exercize`,
                                        `${maxprogress} questions, not too little and not too much`
                                    ]
                                }
                            }
                            const newGridElContainer = document.createElement('span');
                            newGridElContainer.className = "NumberGrid";
                            for (let i = floorToTen(smallerNumber); i <= nextTen(biggerNumber) - 1; i++) {
                                const newGridElSpan = document.createElement('span');
                                newGridElSpan.textContent = i;
                                newGridElSpan.className = "gridNumber";
                                if (i == startNumber) {
                                    newGridElSpan.classList.add("greenColor1");
                                } else if (i == endNumber) {
                                    newGridElSpan.classList.add("correctMathGridAnswer");
                                }
                                newGridElSpan.onclick = () => {
                                    if (i == endNumber) {
                                        newGridElSpan.classList.add("green2");
                                        points += 10;
                                        currentProgress += 100;
                                    } else if (i < endNumber + 10 && i > endNumber - 10) {
                                        newGridElSpan.classList.add("orange1");
                                        points += 5;
                                        currentProgress += 50;
                                    } else {
                                        newGridElSpan.classList.add("red1");
                                        points -= 5;
                                    }
                                    updatePoints();
                                    document.querySelectorAll('.gridNumber').forEach(gn => {
                                        if (gn.classList.contains("correctMathGridAnswer")) {
                                            gn.classList.add("green2");
                                        }
                                        gn.onclick = null;
                                    });
                                    rindex++;
                                    progress = rindex;
                                    //maxprogress = data.length - 1;
                                    const percentage = (progress / maxprogress) * 100;
                                    progresses[currentProgressElement].style.width = `${percentage}%`;
                                    countDown(() => {
                                        addQuestionAuto(rindex);
                                    });
                                };
                                newGridElContainer.appendChild(newGridElSpan);
                            }
                            learnContent.appendChild(newGridElContainer);
                            skipBtn.style.display = skipdisplay;
                        }
                        else if (randomTypeOfExercise == "addition") {
                            function randomNumbeGen() {
                                if (level == "easy") {
                                    return Math.floor(Math.random() * 100);
                                } else if (level == "medium") {
                                    return Math.floor(Math.random() * 500);
                                }
                                return Math.floor(Math.random() * 1000);
                            }
                            const firstNum = randomNumbeGen();
                            const secondNum = randomNumbeGen();
                            addQuestionText(`What is ${firstNum} + ${secondNum} ?`, learnContent);
                            
                            const correctAnswer = firstNum + secondNum;
                            
                            const multiopOrInput = Math.floor(Math.random() * 2);
                            if (multiopOrInput == 1) {
                                let alloptions1 = [
                                    {
                                        "text": `${correctAnswer}`,
                                        "result": "correct",
                                        "percent": "100",
                                        "correct": true
                                    }
                                ];
                                
                                const randomAmout = Math.floor(Math.random() * 5) + 3;
                                let allOps = [correctAnswer];
                                for (let i = 0; i < randomAmout; i ++) {
                                    let firstWrongNum = randomNumbeGen();
                                    let secondWrongNum = randomNumbeGen();
                                    let whileTries = 0;
                                    while (whileTries <= 20 && (allOps.includes(firstWrongNum + secondWrongNum) || !Number.isFinite(firstWrongNum + secondWrongNum))) {
                                        firstWrongNum = randomNumbeGen();
                                        secondWrongNum = randomNumbeGen();
                                        whileTries++;
                                    }
                                    const oneWrongAnswer = firstWrongNum + secondWrongNum;
                                    /*let difference = correctAnswer > oneWrongAnswer ?
                                        correctAnswer - oneWrongAnswer :
                                        oneWrongAnswer - correctAnswer;*/
                                    let difference = Math.abs(correctAnswer - oneWrongAnswer);
                                    let scale = Math.abs(correctAnswer) > 0 ? Math.abs(correctAnswer) : 1;
                                    
                                    let percent = 100 - (difference / scale * 100);
                                    percent = Math.max(0, Math.min(100, percent));
                                    if (!allOps.includes(oneWrongAnswer)) {
                                        allOps.push(oneWrongAnswer);
                                        alloptions1.push({
                                            "text": `${oneWrongAnswer}`,
                                            "result": `Incorrect`,
                                            "percent": percent,
                                            "correct": false
                                        });
                                    }
                                }
                                const alloptions = shuffleArray(alloptions1);
                                currentChatMessageOptions = {
                                    options: {
                                        "What's Addition?": [
                                            "Addition is the process of combining two or more values to find a total. For example, if you have 3 apples and pick 2 more, you now have 3 + 2 = 5 apples. To add, simply count upward from the first number: 3, 4, 5.",
                                            "Imagine you're saving money. One day you save $10, the next day $15. To find out how much you saved in total: 10 + 15 = 25. To add multi-digit numbers, line them up by place value and add column by column, starting from the right.",
                                            "Addition can be visual too. If one row of chairs has 4 seats and the next has 5, you add 4 + 5 = 9 to know there are 9 seats total. You can count on fingers or group objects to find the sum.",
                                            "Suppose you walk 2 kilometers in the morning and 3 in the afternoon. Youve walked 2 + 3 = 5 km in total. To add mentally, start with the bigger number (3), then count on: 4, 5.",
                                            "You bought 7 pens and your friend gave you 6 more. Now you have 7 + 6 = 13 pens. A trick for faster addition is to make tens  for example, 7 + 3 = 10, and then add the remaining 3: 10 + 3 = 13.",
                                            "Addition helps in combining scores too. If your team scores 24 points in the first half and 18 in the second, the total is 24 + 18 = 42. To add larger numbers, break them into parts: (20 + 10) + (4 + 8). Add each part, then combine.",
                                            "If you're baking cookies and make 12 chocolate and 8 vanilla, youve made 12 + 8 = 20 total. To add quickly, round one number up and subtract later: 12 + 8 = (12 + 10) - 2 = 20.",
                                            "You get 5 messages in the morning, 9 during lunch, and 6 in the evening. Total messages: 5 + 9 + 6 = 20. To add several numbers, you can group them: (5 + 6 = 11), then (11 + 9 = 20).",
                                            "Addition is also used in estimating. If something costs $29 and another item costs $31, you can quickly estimate: 30 + 30 = 60. Estimation helps with mental math when exact totals aren't needed right away.",
                                            "To add decimal numbers, like 2.5 + 3.7, line up the decimal points and add each place value just like whole numbers. 2.5 + 3.7 = 6.2. Addition works with all kinds of numbers: small, big, fractions, or decimals."
                                        ],
                                        "How do i give my answer ?": [
                                            `Click one of the options below the question`,
                                            `Click on one the ${alloptions.length} options, below the question`,
                                            `Click on one of the ${alloptions.length} options`,
                                            `Choose one of the ${alloptions.length} options, below the current question`
                                        ],
                                        "How do i skip ?": [
                                            `Click the skip button, in the top right corner. if you don't see the button there, you have reached your skip limit.`,
                                            `Click the skip botton. if you do not see the skip button, in the top right corner, then you have probably reached your skip limit.`,
                                            `If you can't see the skip button, you have probably reached your skip limit.`,
                                            `If you don't see the skip button, you probably reached the skip limit.`
                                        ],
                                        "How many questions are left ?": [
                                            `you got only ${maxprogress - progress} questions to go `,
                                            `you got ${maxprogress - progress} questions to go `,
                                            `there are ${maxprogress - progress} questions left`,
                                            `there are ${maxprogress - progress} more questions to go `,
                                            `there are ${maxprogress - progress} unanswered questions left`,
                                            `you are almost done. only ${maxprogress - progress} more questions to go `
                                        ],
                                        "How many questions have I answered ?": [
                                            `you have answered ${progress} questions`,
                                            `you answered ${progress} questions `
                                        ],
                                        "how many questions are there ?": [
                                            `${maxprogress} questions`,
                                            `there are ${maxprogress} questions`,
                                            `there are ${maxprogress} questions, in your current exercize`,
                                            `${maxprogress} questions, not too little and not too much`
                                        ]
                                    }
                                }
                                alloptions.forEach((op, index) => {
                                    const div1 = document.createElement('div');
                                    const div2 = document.createElement('div');
                                    const div3 = document.createElement('div');
                                    div1.className = "optionBtn";
                                    div2.className = "optionFill";
                                    div1.id = "optionBtn" + index;
                                    div2.id = "optionFill" + index;
                                    div1.onclick = () => {
                                        if (parseInt(op.percent) > 95) {
                                            div1.classList.add("green2");
                                            div2.classList.add("green1");
                                        } else if (parseInt(op.percent) > 35) {
                                            div1.classList.add("orange2");
                                            div2.classList.add("orange1");
                                        } else {
                                            div1.classList.add("red2");
                                            div2.classList.add("red1");
                                        }
                                        currentProgress += parseInt(op.percent);
                                        if (parseInt(op.percent) > 50) {
                                            points += Math.round(parseInt(op.percent) / 10);
                                        } else {
                                            points -= Math.round((100 - parseInt(op.percent)) / 20);
                                        }
                                        updatePoints();
                                        div2.style.width = op.percent + "%";
                                        div1.onclick = null;
                                        alloptions.forEach((el, index2) => {
                                            if (index != index2) {
                                                const op = document.getElementById("optionBtn" + index2);
                                                const opfill = document.getElementById("optionFill" + index2);
                                                const opText = document.getElementById("optionTitle" + index2);
                                                opfill.style.width = el.percent + "%";
                                                op.onclick = null;
                                                if (el.correct == true && op && opfill) {
                                                    opfill.classList.add("green1");
                                                    op.classList.add("green2");
                                                } else if (op && opfill) {
                                                    opfill.classList.add("defaultFill");
                                                    op.classList.add("defaultBg");
                                                    //opText.textContent = el.result;
                                                }
                                            }
                                        });
                                        rindex++;
                                        progress = rindex;
                                        const percentage = (progress / maxprogress) * 100;
                                        progresses[currentProgressElement].style.width = `${percentage}%`;
                                        countDown(() => {
                                            addQuestionAuto(rindex);
                                        });
                                    };
                                    div3.className = "optionTitle";
                                    div3.id = "optionTitle" + index;
                                    div3.textContent = op.text;
                                    //div2.textContent = op.percent;
                                    //div1.textContent = "option" + index;
                                    div1.appendChild(div2);
                                    div1.appendChild(div3);
                                    div1.style.pointerEvents = "none";
                                    setTimeout(() => {
                                        learnContent.appendChild(div1);
                                        if (index == alloptions.length - 1) {
                                            skipBtn.style.display = skipdisplay;
                                            backBtn.style.display = quitdisplay;
                                            alloptions.forEach((el, index2) => {
                                                const op = document.getElementById("optionBtn" + index2);
                                                op.style.pointerEvents = "auto";
                                            });
                                        }
                                    }, index * 100);
                                });
                            } else {
                                currentChatMessageOptions = {
                                    options: {
                                        "What's Addition?": [
                                            "Addition is the process of combining two or more values to find a total. For example, if you have 3 apples and pick 2 more, you now have 3 + 2 = 5 apples. To add, simply count upward from the first number: 3, 4, 5.",
                                            "Imagine you're saving money. One day you save $10, the next day $15. To find out how much you saved in total: 10 + 15 = 25. To add multi-digit numbers, line them up by place value and add column by column, starting from the right.",
                                            "Addition can be visual too. If one row of chairs has 4 seats and the next has 5, you add 4 + 5 = 9 to know there are 9 seats total. You can count on fingers or group objects to find the sum.",
                                            "Suppose you walk 2 kilometers in the morning and 3 in the afternoon. Youve walked 2 + 3 = 5 km in total. To add mentally, start with the bigger number (3), then count on: 4, 5.",
                                            "You bought 7 pens and your friend gave you 6 more. Now you have 7 + 6 = 13 pens. A trick for faster addition is to make tens  for example, 7 + 3 = 10, and then add the remaining 3: 10 + 3 = 13.",
                                            "Addition helps in combining scores too. If your team scores 24 points in the first half and 18 in the second, the total is 24 + 18 = 42. To add larger numbers, break them into parts: (20 + 10) + (4 + 8). Add each part, then combine.",
                                            "If you're baking cookies and make 12 chocolate and 8 vanilla, youve made 12 + 8 = 20 total. To add quickly, round one number up and subtract later: 12 + 8 = (12 + 10) - 2 = 20.",
                                            "You get 5 messages in the morning, 9 during lunch, and 6 in the evening. Total messages: 5 + 9 + 6 = 20. To add several numbers, you can group them: (5 + 6 = 11), then (11 + 9 = 20).",
                                            "Addition is also used in estimating. If something costs $29 and another item costs $31, you can quickly estimate: 30 + 30 = 60. Estimation helps with mental math when exact totals aren't needed right away.",
                                            "To add decimal numbers, like 2.5 + 3.7, line up the decimal points and add each place value just like whole numbers. 2.5 + 3.7 = 6.2. Addition works with all kinds of numbers: small, big, fractions, or decimals."
                                        ],
                                        "How do i give my answer ?": [
                                            `Enter your answer in the input field, below the current question`,
                                            `Type out your answer in the input field, below the current question`,
                                            `Enter your answer in the input field, below the question`,
                                            `Type out your answer in the input field, below the question`
                                        ],
                                        "How do i skip ?": [
                                            `Click the skip button, in the top right corner. if you don't see the button there, you have reached your skip limit.`,
                                            `Click the skip botton. if you do not see the skip button, in the top right corner, then you have probably reached your skip limit.`,
                                            `If you can't see the skip button, you have probably reached your skip limit.`,
                                            `If you don't see the skip button, you probably reached the skip limit.`
                                        ],
                                        "How many questions are left ?": [
                                            `you got only ${maxprogress - progress} questions to go `,
                                            `you got ${maxprogress - progress} questions to go `,
                                            `there are ${maxprogress - progress} questions left`,
                                            `there are ${maxprogress - progress} more questions to go `,
                                            `there are ${maxprogress - progress} unanswered questions left`,
                                            `you are almost done. only ${maxprogress - progress} more questions to go `
                                        ],
                                        "How many questions have I answered ?": [
                                            `you have answered ${progress} questions`,
                                            `you answered ${progress} questions `
                                        ],
                                        "how many questions are there ?": [
                                            `${maxprogress} questions`,
                                            `there are ${maxprogress} questions`,
                                            `there are ${maxprogress} questions, in your current exercize`,
                                            `${maxprogress} questions, not too little and not too much`
                                        ]
                                    }
                                }
                                const inputEl = document.createElement("input");
                                inputEl.type = "text";
                                inputEl.className = "LearnInputField";
                                inputEl.placeholder = "Enter your answer here...";
                                function userAnswerSubmit() {
                                    const inputValue = parseInt(inputEl.value);
                                    
                                    if (isNaN(inputValue)) {
                                        inputEl.classList.add("red1");
                                        points -= 5;
                                        addCorrectAnswerToSection(learnContent, correctAnswer);
                                    } else if (inputValue == correctAnswer) {
                                        inputEl.classList.add("green2");
                                        points += 10;
                                        currentProgress += 100;
                                        confirmCorrectAnswer(learnContent, correctAnswer);
                                    } else if (inputValue < correctAnswer + 10 && inputValue > correctAnswer - 10) {
                                        inputEl.classList.add("orange1");
                                        points += 5;
                                        currentProgress += 50;
                                        addCorrectAnswerToSection(learnContent, correctAnswer);
                                    } else {
                                        inputEl.classList.add("red1");
                                        points -= 5;
                                        addCorrectAnswerToSection(learnContent, correctAnswer);
                                    }
                                    updatePoints();
                                    rindex++;
                                    progress = rindex;
                                    const percentage = (progress / maxprogress) * 100;
                                    progresses[currentProgressElement].style.width = `${percentage}%`;
                                    countDown(() => {
                                        addQuestionAuto(rindex);
                                    });
                                }
                                inputEl.onkeydown = (event) => {
                                    if (event.key == "Enter") {
                                        inputEl.disabled = true;
                                        inputEl.onkeydown = null;
                                        userAnswerSubmit();
                                    }
                                };
                                learnContent.appendChild(inputEl);
                                skipBtn.style.display = skipdisplay;
                            }
                        }
                        else if (randomTypeOfExercise == "subtraction") {
                            function randomNumbeGen() {
                                if (level == "easy") {
                                    return Math.floor(Math.random() * 100);
                                } else if (level == "medium") {
                                    return Math.floor(Math.random() * 500);
                                }
                                return Math.floor(Math.random() * 1000);
                            }
                            const firstNum = randomNumbeGen();
                            const secondNum = randomNumbeGen();
                            
                            addQuestionText(`What is ${firstNum} - ${secondNum} ?`, learnContent);
                            const correctAnswer = firstNum - secondNum;
                            
                            const multiopOrInput = Math.floor(Math.random() * 2);
                            if (multiopOrInput == 1) {
                                let alloptions1 = [
                                    {
                                        "text": `${correctAnswer}`,
                                        "result": "correct",
                                        "percent": "100",
                                        "correct": true
                                    }
                                ];
                                
                                const randomAmout = Math.floor(Math.random() * 5) + 3;
                                let allOps = [correctAnswer];
                                for (let i = 0; i < randomAmout; i ++) {
                                    let firstWrongNum = randomNumbeGen();
                                    let secondWrongNum = randomNumbeGen();
                                    let whileTries = 0;
                                    while (whileTries <= 20 && (allOps.includes(firstWrongNum - secondWrongNum) || !Number.isFinite(firstWrongNum - secondWrongNum))) {
                                        firstWrongNum = randomNumbeGen();
                                        secondWrongNum = randomNumbeGen();
                                        whileTries++;
                                    }
                                    const oneWrongAnswer = firstWrongNum - secondWrongNum;
                                    let difference = Math.abs(correctAnswer - oneWrongAnswer);
                                    let scale = Math.abs(correctAnswer) > 0 ? Math.abs(correctAnswer) : 1;
                                    
                                    let percent = 100 - (difference / scale * 100);
                                    percent = Math.max(0, Math.min(100, percent));
                                    if (!allOps.includes(oneWrongAnswer)) {
                                        allOps.push(oneWrongAnswer);
                                        alloptions1.push({
                                            "text": `${oneWrongAnswer}`,
                                            "result": `Incorrect`,
                                            "percent": percent,
                                            "correct": false
                                        });
                                    }
                                }
                                const alloptions = shuffleArray(alloptions1);
                                currentChatMessageOptions = {
                                    options: {
                                        "What's Subtraction?": [
                                            "If you have 5 cookies and eat 2, how many are left? You can count: 5 - 2 = 3. Subtraction helps you find out what remains after taking something away.",
                                            "Imagine 10 balloons, but 3 float away. You started with 10 and lost 3. So, 10 - 3 = 7 balloons left.",
                                            "You had 8 toy cars, but gave 4 to your friend. Now you only have 4. Thats subtraction: 8 - 4 = 4.",
                                            "If there are 6 apples in a basket and you take out 1, youre left with 5. Thats 6 - 1 = 5. Subtraction tells you whats still there after something is gone.",
                                            "There are 9 ducks swimming. 5 swim away. How many are still there? 9 - 5 = 4. Subtraction shows whats left.",
                                            "You got 7 stickers, but 2 fell off. 7 - 2 = 5 stickers still stuck. Subtraction tells you whats missing or gone.",
                                            "If you build a tower with 10 blocks and remove 3, there are 7 blocks left. Thats 10 - 3 = 7. Subtraction is like taking pieces away.",
                                            "You have 12 candies. You eat 6. Now you have 12 - 6 = 6 candies. Subtraction helps you find out whats left after you use or lose some.",
                                            "Imagine 20 people at a party, and 8 go home. 20 - 8 = 12 people still there. Subtraction is how we count what's left.",
                                            "You saved 15 coins, but you spent 5. Thats 15 - 5 = 10 coins remaining. Subtraction is like checking your balance after spending."
                                        ],
                                        "How do i give my answer ?": [
                                            `Click one of the options below the question`,
                                            `Click on one the ${alloptions.length} options, below the question`,
                                            `Click on one of the ${alloptions.length} options`,
                                            `Choose one of the ${alloptions.length} options, below the current question`
                                        ],
                                        "How do i skip ?": [
                                            `Click the skip button, in the top right corner. if you don't see the button there, you have reached your skip limit.`,
                                            `Click the skip botton. if you do not see the skip button, in the top right corner, then you have probably reached your skip limit.`,
                                            `If you can't see the skip button, you have probably reached your skip limit.`,
                                            `If you don't see the skip button, you probably reached the skip limit.`
                                        ],
                                        "How many questions are left ?": [
                                            `you got only ${maxprogress - progress} questions to go `,
                                            `you got ${maxprogress - progress} questions to go `,
                                            `there are ${maxprogress - progress} questions left`,
                                            `there are ${maxprogress - progress} more questions to go `,
                                            `there are ${maxprogress - progress} unanswered questions left`,
                                            `you are almost done. only ${maxprogress - progress} more questions to go `
                                        ],
                                        "How many questions have I answered ?": [
                                            `you have answered ${progress} questions`,
                                            `you answered ${progress} questions `
                                        ],
                                        "how many questions are there ?": [
                                            `${maxprogress} questions`,
                                            `there are ${maxprogress} questions`,
                                            `there are ${maxprogress} questions, in your current exercize`,
                                            `${maxprogress} questions, not too little and not too much`
                                        ]
                                    }
                                }
                                alloptions.forEach((op, index) => {
                                    const div1 = document.createElement('div');
                                    const div2 = document.createElement('div');
                                    const div3 = document.createElement('div');
                                    div1.className = "optionBtn";
                                    div2.className = "optionFill";
                                    div1.id = "optionBtn" + index;
                                    div2.id = "optionFill" + index;
                                    div1.onclick = () => {
                                        if (parseInt(op.percent) > 85) {
                                            div1.classList.add("green2");
                                            div2.classList.add("green1");
                                        } else if (parseInt(op.percent) > 35) {
                                            div1.classList.add("orange2");
                                            div2.classList.add("orange1");
                                        } else {
                                            div1.classList.add("red2");
                                            div2.classList.add("red1");
                                        }
                                        currentProgress += parseInt(op.percent);
                                        if (parseInt(op.percent) > 50) {
                                            points += Math.round(parseInt(op.percent) / 10);
                                        } else {
                                            points -= Math.round((100 - parseInt(op.percent)) / 20);
                                        }
                                        updatePoints();
                                        div2.style.width = op.percent + "%";
                                        div1.onclick = null;
                                        alloptions.forEach((el, index2) => {
                                            if (index != index2) {
                                                const op = document.getElementById("optionBtn" + index2);
                                                const opfill = document.getElementById("optionFill" + index2);
                                                const opText = document.getElementById("optionTitle" + index2);
                                                opfill.style.width = el.percent + "%";
                                                op.onclick = null;
                                                if (el.correct == true && op && opfill) {
                                                    opfill.classList.add("green1");
                                                    op.classList.add("green2");
                                                } else if (op && opfill) {
                                                    opfill.classList.add("defaultFill");
                                                    op.classList.add("defaultBg");
                                                    //opText.textContent = el.result;
                                                }
                                            }
                                        });
                                        rindex++;
                                        progress = rindex;
                                        const percentage = (progress / maxprogress) * 100;
                                        progresses[currentProgressElement].style.width = `${percentage}%`;
                                        countDown(() => {
                                            addQuestionAuto(rindex);
                                        });
                                    };
                                    div3.className = "optionTitle";
                                    div3.id = "optionTitle" + index;
                                    div3.textContent = op.text;
                                    //div2.textContent = op.percent;
                                    //div1.textContent = "option" + index;
                                    div1.appendChild(div2);
                                    div1.appendChild(div3);
                                    div1.style.pointerEvents = "none";
                                    setTimeout(() => {
                                        learnContent.appendChild(div1);
                                        if (index == alloptions.length - 1) {
                                            skipBtn.style.display = skipdisplay;
                                            backBtn.style.display = quitdisplay;
                                            alloptions.forEach((el, index2) => {
                                                const op = document.getElementById("optionBtn" + index2);
                                                op.style.pointerEvents = "auto";
                                            });
                                        }
                                    }, index * 100);
                                });
                            } else {
                                currentChatMessageOptions = {
                                    options: {
                                        "What's Subtraction?": [
                                            "If you have 5 cookies and eat 2, how many are left? You can count: 5 - 2 = 3. Subtraction helps you find out what remains after taking something away.",
                                            "Imagine 10 balloons, but 3 float away. You started with 10 and lost 3. So, 10 - 3 = 7 balloons left.",
                                            "You had 8 toy cars, but gave 4 to your friend. Now you only have 4. Thats subtraction: 8 - 4 = 4.",
                                            "If there are 6 apples in a basket and you take out 1, youre left with 5. Thats 6 - 1 = 5. Subtraction tells you whats still there after something is gone.",
                                            "There are 9 ducks swimming. 5 swim away. How many are still there? 9 - 5 = 4. Subtraction shows whats left.",
                                            "You got 7 stickers, but 2 fell off. 7 - 2 = 5 stickers still stuck. Subtraction tells you whats missing or gone.",
                                            "If you build a tower with 10 blocks and remove 3, there are 7 blocks left. Thats 10 - 3 = 7. Subtraction is like taking pieces away.",
                                            "You have 12 candies. You eat 6. Now you have 12 - 6 = 6 candies. Subtraction helps you find out whats left after you use or lose some.",
                                            "Imagine 20 people at a party, and 8 go home. 20 - 8 = 12 people still there. Subtraction is how we count what's left.",
                                            "You saved 15 coins, but you spent 5. Thats 15 - 5 = 10 coins remaining. Subtraction is like checking your balance after spending."
                                        ],
                                        "How do i give my answer ?": [
                                            `Enter your answer in the input field, below the current question`,
                                            `Type out your answer in the input field, below the current question`,
                                            `Enter your answer in the input field, below the question`,
                                            `Type out your answer in the input field, below the question`
                                        ],
                                        "How do i skip ?": [
                                            `Click the skip button, in the top right corner. if you don't see the button there, you have reached your skip limit.`,
                                            `Click the skip botton. if you do not see the skip button, in the top right corner, then you have probably reached your skip limit.`,
                                            `If you can't see the skip button, you have probably reached your skip limit.`,
                                            `If you don't see the skip button, you probably reached the skip limit.`
                                        ],
                                        "How many questions are left ?": [
                                            `you got only ${maxprogress - progress} questions to go `,
                                            `you got ${maxprogress - progress} questions to go `,
                                            `there are ${maxprogress - progress} questions left`,
                                            `there are ${maxprogress - progress} more questions to go `,
                                            `there are ${maxprogress - progress} unanswered questions left`,
                                            `you are almost done. only ${maxprogress - progress} more questions to go `
                                        ],
                                        "How many questions have I answered ?": [
                                            `you have answered ${progress} questions`,
                                            `you answered ${progress} questions `
                                        ],
                                        "how many questions are there ?": [
                                            `${maxprogress} questions`,
                                            `there are ${maxprogress} questions`,
                                            `there are ${maxprogress} questions, in your current exercize`,
                                            `${maxprogress} questions, not too little and not too much`
                                        ]
                                    }
                                }
                                const inputEl = document.createElement("input");
                                inputEl.type = "text";
                                inputEl.className = "LearnInputField";
                                inputEl.placeholder = "Enter your answer here...";
                                function userAnswerSubmit() {
                                    const inputValue = parseInt(inputEl.value);
                                    
                                    if (isNaN(inputValue)) {
                                        inputEl.classList.add("red1");
                                        points -= 5;
                                        addCorrectAnswerToSection(learnContent, correctAnswer);
                                    } else if (inputValue == correctAnswer) {
                                        inputEl.classList.add("green2");
                                        points += 10;
                                        currentProgress += 100;
                                        confirmCorrectAnswer(learnContent, correctAnswer);
                                    } else if (inputValue < correctAnswer + 10 && inputValue > correctAnswer - 10) {
                                        inputEl.classList.add("orange1");
                                        points += 5;
                                        currentProgress += 50;
                                        addCorrectAnswerToSection(learnContent, correctAnswer);
                                    } else {
                                        inputEl.classList.add("red1");
                                        points -= 5;
                                        addCorrectAnswerToSection(learnContent, correctAnswer);
                                    }
                                    updatePoints();
                                    rindex++;
                                    progress = rindex;
                                    const percentage = (progress / maxprogress) * 100;
                                    progresses[currentProgressElement].style.width = `${percentage}%`;
                                    countDown(() => {
                                        addQuestionAuto(rindex);
                                    });
                                }
                                inputEl.onkeydown = (event) => {
                                    if (event.key == "Enter") {
                                        inputEl.disabled = true;
                                        inputEl.onkeydown = null;
                                        userAnswerSubmit();
                                    }
                                };
                                learnContent.appendChild(inputEl);
                                skipBtn.style.display = skipdisplay;
                            }
                        
                        }
                        else if (randomTypeOfExercise == "division") {
                            function randomNumbeGen() {
                                if (level == "easy") {
                                    return Math.floor(Math.random() * 20); //parseFloat((Math.random() * 100).toFixed(2));
                                }
                                return Math.floor(Math.random() * 100);//parseFloat((Math.random() * 500).toFixed(2));
                            }
                            const firstNum = randomNumbeGen();
                            const secondNum = randomNumbeGen();
                            
                            addQuestionText(`What is ${firstNum}  ${secondNum} ?`, learnContent);
                            const correctAnswer = formatNumberSmart(firstNum / secondNum);
                            
                            const multiopOrInput = Math.floor(Math.random() * 2);
                            
                            if (multiopOrInput == 1) {
                                let alloptions1 = [
                                    {
                                        "text": `${correctAnswer}`,
                                        "result": "correct",
                                        "percent": "100",
                                        "correct": true
                                    }
                                ];
                                
                                const randomAmout = Math.floor(Math.random() * 5) + 3;
                                let allOps = [correctAnswer];
                                for (let i = 0; i < randomAmout; i ++) {
                                    let firstWrongNum = randomNumbeGen();
                                    let secondWrongNum = randomNumbeGen();
                                    let whileTries = 0;
                                    while (whileTries <= 20 && (allOps.includes(formatNumberSmart(firstWrongNum / secondWrongNum)) || !Number.isFinite(formatNumberSmart(firstWrongNum / secondWrongNum)))) {
                                        firstWrongNum = randomNumbeGen();
                                        secondWrongNum = randomNumbeGen();
                                        whileTries++;
                                    }
                                    const oneWrongAnswer = formatNumberSmart(firstWrongNum / secondWrongNum);
                                    allOps.push(oneWrongAnswer);
                                    let difference = Math.abs(correctAnswer - oneWrongAnswer);
                                    let scale = Math.abs(correctAnswer) > 0 ? Math.abs(correctAnswer) : 1;
                                    
                                    let percent = 100 - (difference / scale * 100);
                                    percent = Math.max(0, Math.min(100, percent));
                                    if (!allOps.includes(oneWrongAnswer)) {
                                        allOps.push(oneWrongAnswer);
                                        alloptions1.push({
                                            "text": `${oneWrongAnswer}`,
                                            "result": `Incorrect`,
                                            "percent": percent,
                                            "correct": false
                                        });
                                    }
                                }
                                const alloptions = shuffleArray(alloptions1);
                                currentChatMessageOptions = {
                                    options: {
                                        "What's Division?": [
                                            "Division is the process of splitting something into equal parts or groups. For example, if you have 12 cookies and 4 people, division helps you figure out how many cookies each person gets: 12  4 = 3. To divide, you ask: How many times does 4 fit into 12? You can count: 4, 8, 12  thats 3 times.",
                                            "Imagine you have 20 pencils and want to pack them into boxes with 5 pencils each. How many boxes do you need? 20  5 = 4. To divide, keep subtracting 5 until you reach 0: 20, 15, 10, 5, 0  you subtracted 5 a total of 4 times. Thats your answer.",
                                            "Division is also repeated subtraction. If you subtract 4 from 16 repeatedly  16, 12, 8, 4, 0  you did that 4 times. So 16  4 = 4. To divide like this, just keep subtracting the divisor (4) until you reach 0, and count the steps.",
                                            "Lets say a pizza has 8 slices and 2 people want to share it evenly. 8  2 = 4. To divide, ask: how many times does 2 fit into 8? Or think: what times 2 gives 8? The answer is 4. You can use multiplication facts to help divide.",
                                            "Suppose you're handing out 30 flyers to 6 students. Each should get the same amount. 30  6 = 5. To divide, think: 6 times what equals 30? The answer is 5. You can write it as a fact family: 6  5 = 30, so 30  6 = 5.",
                                            "Not all divisions are exact. If you have 10 apples and divide them among 4 people, 10  4 = 2.5. First, ask how many whole times 4 fits into 10  thats 2 (4  2 = 8), and then 2 are left. So its 2 with a remainder of 2, or 2.5 if split evenly.",
                                            "Division is closely related to multiplication. If 7  6 = 42, then 42  7 = 6 and 42  6 = 7. To divide, you can reverse a multiplication fact you know. That makes dividing faster and easier.",
                                            "If you have $120 and want to spend it evenly over 4 weeks, divide: 120  4 = 30. To do this, ask how many times 4 goes into 120. You can use long division or break 120 into chunks (40 + 40 + 40). Either way, the result is 30 per week.",
                                            "Division helps in measuring and scaling. For example, a 100-meter race divided into 4 equal parts is 100  4 = 25 meters each. You divide by thinking: how many times does 4 fit into 100? You can break it down as 40 + 40 + 20 (which is 4  25).",
                                            "Whether you're dividing ingredients, time, or tasks, division helps you break things down equally. To divide, take the total amount and subtract or break it into equal parts  either using subtraction, known multiplication facts, or long division  until you reach your result."
                                        ],
                                        "How do i give my answer ?": [
                                            `Click one of the options below the question`,
                                            `Click on one the ${alloptions.length} options, below the question`,
                                            `Click on one of the ${alloptions.length} options`,
                                            `Choose one of the ${alloptions.length} options, below the current question`
                                        ],
                                        "How do i skip ?": [
                                            `Click the skip button, in the top right corner. if you don't see the button there, you have reached your skip limit.`,
                                            `Click the skip botton. if you do not see the skip button, in the top right corner, then you have probably reached your skip limit.`,
                                            `If you can't see the skip button, you have probably reached your skip limit.`,
                                            `If you don't see the skip button, you probably reached the skip limit.`
                                        ],
                                        "How many questions are left ?": [
                                            `you got only ${maxprogress - progress} questions to go `,
                                            `you got ${maxprogress - progress} questions to go `,
                                            `there are ${maxprogress - progress} questions left`,
                                            `there are ${maxprogress - progress} more questions to go `,
                                            `there are ${maxprogress - progress} unanswered questions left`,
                                            `you are almost done. only ${maxprogress - progress} more questions to go `
                                        ],
                                        "How many questions have I answered ?": [
                                            `you have answered ${progress} questions`,
                                            `you answered ${progress} questions `
                                        ],
                                        "how many questions are there ?": [
                                            `${maxprogress} questions`,
                                            `there are ${maxprogress} questions`,
                                            `there are ${maxprogress} questions, in your current exercize`,
                                            `${maxprogress} questions, not too little and not too much`
                                        ]
                                    }
                                }
                                alloptions.forEach((op, index) => {
                                    const div1 = document.createElement('div');
                                    const div2 = document.createElement('div');
                                    const div3 = document.createElement('div');
                                    div1.className = "optionBtn";
                                    div2.className = "optionFill";
                                    div1.id = "optionBtn" + index;
                                    div2.id = "optionFill" + index;
                                    div1.onclick = () => {
                                        if (parseInt(op.percent) > 95) {
                                            div1.classList.add("green2");
                                            div2.classList.add("green1");
                                        } else if (parseInt(op.percent) > 35) {
                                            div1.classList.add("orange2");
                                            div2.classList.add("orange1");
                                        } else {
                                            div1.classList.add("red2");
                                            div2.classList.add("red1");
                                        }
                                        currentProgress += parseInt(op.percent);
                                        if (parseInt(op.percent) > 50) {
                                            points += Math.round(parseInt(op.percent) / 10);
                                        } else {
                                            points -= Math.round((100 - parseInt(op.percent)) / 20);
                                        }
                                        updatePoints();
                                        div2.style.width = op.percent + "%";
                                        div1.onclick = null;
                                        alloptions.forEach((el, index2) => {
                                            if (index != index2) {
                                                const op = document.getElementById("optionBtn" + index2);
                                                const opfill = document.getElementById("optionFill" + index2);
                                                const opText = document.getElementById("optionTitle" + index2);
                                                opfill.style.width = el.percent + "%";
                                                op.onclick = null;
                                                if (el.correct == true && op && opfill) {
                                                    opfill.classList.add("green1");
                                                    op.classList.add("green2");
                                                } else if (op && opfill) {
                                                    opfill.classList.add("defaultFill");
                                                    op.classList.add("defaultBg");
                                                    //opText.textContent = el.result;
                                                }
                                            }
                                        });
                                        rindex++;
                                        progress = rindex;
                                        const percentage = (progress / maxprogress) * 100;
                                        progresses[currentProgressElement].style.width = `${percentage}%`;
                                        countDown(() => {
                                            addQuestionAuto(rindex);
                                        });
                                    };
                                    div3.className = "optionTitle";
                                    div3.id = "optionTitle" + index;
                                    div3.textContent = op.text;
                                    //div2.textContent = op.percent;
                                    //div1.textContent = "option" + index;
                                    div1.appendChild(div2);
                                    div1.appendChild(div3);
                                    div1.style.pointerEvents = "none";
                                    setTimeout(() => {
                                        learnContent.appendChild(div1);
                                        if (index == alloptions.length - 1) {
                                            skipBtn.style.display = skipdisplay;
                                            backBtn.style.display = quitdisplay;
                                            alloptions.forEach((el, index2) => {
                                                const op = document.getElementById("optionBtn" + index2);
                                                op.style.pointerEvents = "auto";
                                            });
                                        }
                                    }, index * 100);
                                });
                            } else {
                                currentChatMessageOptions = {
                                    options: {
                                        "What's Division?": [
                                            "Division is the process of splitting something into equal parts or groups. For example, if you have 12 cookies and 4 people, division helps you figure out how many cookies each person gets: 12  4 = 3. To divide, you ask: How many times does 4 fit into 12? You can count: 4, 8, 12  thats 3 times.",
                                            "Imagine you have 20 pencils and want to pack them into boxes with 5 pencils each. How many boxes do you need? 20  5 = 4. To divide, keep subtracting 5 until you reach 0: 20, 15, 10, 5, 0  you subtracted 5 a total of 4 times. Thats your answer.",
                                            "Division is also repeated subtraction. If you subtract 4 from 16 repeatedly  16, 12, 8, 4, 0  you did that 4 times. So 16  4 = 4. To divide like this, just keep subtracting the divisor (4) until you reach 0, and count the steps.",
                                            "Lets say a pizza has 8 slices and 2 people want to share it evenly. 8  2 = 4. To divide, ask: how many times does 2 fit into 8? Or think: what times 2 gives 8? The answer is 4. You can use multiplication facts to help divide.",
                                            "Suppose you're handing out 30 flyers to 6 students. Each should get the same amount. 30  6 = 5. To divide, think: 6 times what equals 30? The answer is 5. You can write it as a fact family: 6  5 = 30, so 30  6 = 5.",
                                            "Not all divisions are exact. If you have 10 apples and divide them among 4 people, 10  4 = 2.5. First, ask how many whole times 4 fits into 10  thats 2 (4  2 = 8), and then 2 are left. So its 2 with a remainder of 2, or 2.5 if split evenly.",
                                            "Division is closely related to multiplication. If 7  6 = 42, then 42  7 = 6 and 42  6 = 7. To divide, you can reverse a multiplication fact you know. That makes dividing faster and easier.",
                                            "If you have $120 and want to spend it evenly over 4 weeks, divide: 120  4 = 30. To do this, ask how many times 4 goes into 120. You can use long division or break 120 into chunks (40 + 40 + 40). Either way, the result is 30 per week.",
                                            "Division helps in measuring and scaling. For example, a 100-meter race divided into 4 equal parts is 100  4 = 25 meters each. You divide by thinking: how many times does 4 fit into 100? You can break it down as 40 + 40 + 20 (which is 4  25).",
                                            "Whether you're dividing ingredients, time, or tasks, division helps you break things down equally. To divide, take the total amount and subtract or break it into equal parts  either using subtraction, known multiplication facts, or long division  until you reach your result."
                                        ],
                                        "How do i give my answer ?": [
                                            `Enter your answer in the input field, below the current question`,
                                            `Type out your answer in the input field, below the current question`,
                                            `Enter your answer in the input field, below the question`,
                                            `Type out your answer in the input field, below the question`
                                        ],
                                        "How do i skip ?": [
                                            `Click the skip button, in the top right corner. if you don't see the button there, you have reached your skip limit.`,
                                            `Click the skip botton. if you do not see the skip button, in the top right corner, then you have probably reached your skip limit.`,
                                            `If you can't see the skip button, you have probably reached your skip limit.`,
                                            `If you don't see the skip button, you probably reached the skip limit.`
                                        ],
                                        "How many questions are left ?": [
                                            `you got only ${maxprogress - progress} questions to go `,
                                            `you got ${maxprogress - progress} questions to go `,
                                            `there are ${maxprogress - progress} questions left`,
                                            `there are ${maxprogress - progress} more questions to go `,
                                            `there are ${maxprogress - progress} unanswered questions left`,
                                            `you are almost done. only ${maxprogress - progress} more questions to go `
                                        ],
                                        "How many questions have I answered ?": [
                                            `you have answered ${progress} questions`,
                                            `you answered ${progress} questions `
                                        ],
                                        "how many questions are there ?": [
                                            `${maxprogress} questions`,
                                            `there are ${maxprogress} questions`,
                                            `there are ${maxprogress} questions, in your current exercize`,
                                            `${maxprogress} questions, not too little and not too much`
                                        ]
                                    }
                                }
                                const inputEl = document.createElement("input");
                                inputEl.type = "text";
                                inputEl.className = "LearnInputField";
                                inputEl.placeholder = "Enter your answer here...";
                                function userAnswerSubmit() {
                                    const inputValue = formatNumberSmart(parseFloat(inputEl.value));
                                    if (isNaN(inputValue)) {
                                        inputEl.classList.add("red1");
                                        points -= 5;
                                        addCorrectAnswerToSection(learnContent, correctAnswer);
                                    } else if (inputValue == correctAnswer) {
                                        inputEl.classList.add("green2");
                                        points += 10;
                                        currentProgress += 100;
                                        confirmCorrectAnswer(learnContent, correctAnswer);
                                    } else if (inputValue < correctAnswer + 10 && inputValue > correctAnswer - 10) {
                                        inputEl.classList.add("orange1");
                                        points += 5;
                                        currentProgress += 50;
                                        addCorrectAnswerToSection(learnContent, correctAnswer);
                                    } else {
                                        inputEl.classList.add("red1");
                                        points -= 5;
                                        addCorrectAnswerToSection(learnContent, correctAnswer);
                                    }
                                    updatePoints();
                                    rindex++;
                                    progress = rindex;
                                    const percentage = (progress / maxprogress) * 100;
                                    progresses[currentProgressElement].style.width = `${percentage}%`;
                                    countDown(() => {
                                        addQuestionAuto(rindex);
                                    });
                                }
                                inputEl.onkeydown = (event) => {
                                    if (event.key == "Enter") {
                                        inputEl.disabled = true;
                                        inputEl.onkeydown = null;
                                        userAnswerSubmit();
                                    }
                                };
                                learnContent.appendChild(inputEl);
                                skipBtn.style.display = skipdisplay;
                            }
                        }
                        else if (randomTypeOfExercise == "chain") {
                            function randomSmallNumbeGen() {
                                if (level == "easy") {
                                    return Math.floor(Math.random() * 8) + 1;
                                } else if (level == "medium") {
                                    return Math.floor(Math.random() * 24) + 1;
                                }
                                return Math.floor(Math.random() * 99) + 1;
                            }
                            function randomNumbeGen() {
                                if (level == "easy") {
                                    return Math.floor(Math.random() * 99) + 1;
                                } else if (level == "medium") {
                                    return Math.floor(Math.random() * 499) + 1;
                                }
                                return Math.floor(Math.random() * 999) + 1;
                            }
                            function randomAnswerNumbeGen() {
                                let num;
                                if (level == "easy") {
                                    num = Math.random() * 99 + 1;
                                } else if (level == "medium") {
                                    num = Math.random() * 499 + 1;
                                } else {
                                    num = Math.random() * 999 + 1;
                                }
                                
                                return Math.random() < 0.5 ? Math.floor(num) : Math.round(num * 10) / 10;
                            }
                            
                            let randomChainLength = Math.floor(Math.random() * 3) + 3;
                            if (level == "medium") {
                                randomChainLength = Math.floor(Math.random() * 5) + 3;
                            } else if (level == "hard") {
                                randomChainLength = Math.floor(Math.random() * 9) + 3;
                            }
                            const randomEasyOperators = ["+", "-"];
                            const randomMediumOperators = ["*", "/"];
                            const randomOperators = [...randomEasyOperators, ...randomMediumOperators];
                            function generateChainOpResult() {
                                let mathquestiontext = "";
                                for (let i = 0; i < randomChainLength; i++) {
                                    let anotherNum = randomNumbeGen();
                                    const operator = randomOperators[Math.floor(Math.random() * randomOperators.length)];
                                    if (randomMediumOperators.includes(operator)) {
                                        anotherNum = randomSmallNumbeGen();
                                    }
                                    if (i == 0) {
                                        let firstNum = randomNumbeGen();
                                        if (randomMediumOperators.includes(operator)) {
                                            firstNum = randomSmallNumbeGen();
                                        }
                                        mathquestiontext += firstNum + " " + operator + " " + anotherNum;
                                    } else {
                                        mathquestiontext += " " + operator + " " + anotherNum;
                                    }
                                }
                                return mathquestiontext;
                            }
                            
                            let mathquestiongentext = generateChainOpResult();
                            const correctAnswer = formatNumberSmart(eval(mathquestiongentext));
                            
                            addQuestionText("What is " + mathquestiongentext + "?", learnContent);
                            
                            const multiopOrInput = Math.floor(Math.random() * 2);
                            if (multiopOrInput == 1) {
                                let alloptions1 = [
                                    {
                                        "text": `${correctAnswer}`,
                                        "result": "correct",
                                        "percent": "100",
                                        "correct": true
                                    }
                                ];
                                
                                const randomAmout = Math.floor(Math.random() * 5) + 3;
                                let allOps = [correctAnswer];
                                for (let i = 0; i < randomAmout; i ++) {
                                    let wrongNum = generateChainOpResult();
                                    let whileTries = 0;
                                    while (whileTries <= 20 && (allOps.includes(formatNumberSmart(eval(wrongNum))) || !Number.isFinite(formatNumberSmart(eval(wrongNum))))) {
                                        wrongNum = generateChainOpResult();
                                        whileTries++;
                                    }
                                    const oneWrongAnswer = formatNumberSmart(eval(wrongNum));
                                    /*let difference = correctAnswer > oneWrongAnswer ?
                                        correctAnswer - oneWrongAnswer :
                                        oneWrongAnswer - correctAnswer;*/
                                    let difference = Math.abs(correctAnswer - oneWrongAnswer);
                                    let scale = Math.abs(correctAnswer) > 0 ? Math.abs(correctAnswer) : 1;
                                    
                                    let percent = 100 - (difference / scale * 100);
                                    percent = Math.max(0, Math.min(100, percent));
                                    if (!allOps.includes(oneWrongAnswer)) {
                                        allOps.push(oneWrongAnswer);
                                        alloptions1.push({
                                            "text": `${oneWrongAnswer}`,
                                            "result": `Incorrect`,
                                            "percent": percent,
                                            "correct": false
                                        });
                                    }
                                }
                                const alloptions = shuffleArray(alloptions1);
                                currentChatMessageOptions = {
                                    options: {
                                        "What's Multiplication ?": [
                                            "If you hold up 3 fingers and tap them on the table 4 times, thats the same as 3 + 3 + 3 + 3. Instead of adding 3 four times, you can use multiplication: 3  4 = 12. Thats what multiplication does  it repeats a number quickly.",
                                            "Each of your hands has 5 fingers. So if you look at both of them, thats 2 hands  5 fingers per hand = 10 fingers. You can count them one by one, but multiplication helps you find the total faster.",
                                            "Imagine stacking 2 blocks at a time. If you do that 6 times, youve placed 2 + 2 + 2 + 2 + 2 + 2 = 12 blocks. Thats 2  6. Multiplication just means you're repeating the same number multiple times.",
                                            "If you and 3 friends each hold up 4 fingers, thats 4  4. You could add 4 + 4 + 4 + 4, or just multiply: 4  4 = 16. This is like having 4 groups of 4 fingers.",
                                            "If you get 1 sticker every day for 5 days, you could count them: 1 + 1 + 1 + 1 + 1 = 5. Or you can say 1  5 = 5. Multiplying by 1 gives you the same number, just faster.",
                                            "Imagine a room with 5 rows of chairs, and each row has 3 chairs. Thats 5  3 = 15 chairs. Instead of counting each chair one at a time, you group them in rows and multiply.",
                                            "If you give 2 candies to each of 5 people, thats 2  5 = 10 candies. Its like having 5 groups of 2. You can add 2 five times, or multiply once.",
                                            "Lets say each of your 10 fingers has 10 tiny stickers on it. Thats 10  10 = 100 stickers. You could count all of them slowly, or multiply to get the total in one step.",
                                            "Instead of adding the same number again and again, multiplication helps you find the total in fewer steps. For example, 8  4 is the same as 4 + 4 + 4 + 4 + 4 + 4 + 4 + 4 = 32.",
                                            "If you high-five 3 people, and each high five uses your 5 fingers, then you used your hand 3 times. Thats 5  3 = 15 fingers used. Its the same as adding 5 + 5 + 5."
                                        ],
                                        "What's Subtraction?": [
                                            "If you have 5 cookies and eat 2, how many are left? You can count: 5 - 2 = 3. Subtraction helps you find out what remains after taking something away.",
                                            "Imagine 10 balloons, but 3 float away. You started with 10 and lost 3. So, 10 - 3 = 7 balloons left.",
                                            "You had 8 toy cars, but gave 4 to your friend. Now you only have 4. Thats subtraction: 8 - 4 = 4.",
                                            "If there are 6 apples in a basket and you take out 1, youre left with 5. Thats 6 - 1 = 5. Subtraction tells you whats still there after something is gone.",
                                            "There are 9 ducks swimming. 5 swim away. How many are still there? 9 - 5 = 4. Subtraction shows whats left.",
                                            "You got 7 stickers, but 2 fell off. 7 - 2 = 5 stickers still stuck. Subtraction tells you whats missing or gone.",
                                            "If you build a tower with 10 blocks and remove 3, there are 7 blocks left. Thats 10 - 3 = 7. Subtraction is like taking pieces away.",
                                            "You have 12 candies. You eat 6. Now you have 12 - 6 = 6 candies. Subtraction helps you find out whats left after you use or lose some.",
                                            "Imagine 20 people at a party, and 8 go home. 20 - 8 = 12 people still there. Subtraction is how we count what's left.",
                                            "You saved 15 coins, but you spent 5. Thats 15 - 5 = 10 coins remaining. Subtraction is like checking your balance after spending."
                                        ],
                                        "What's Division?": [
                                            "Division is the process of splitting something into equal parts or groups. For example, if you have 12 cookies and 4 people, division helps you figure out how many cookies each person gets: 12  4 = 3. To divide, you ask: How many times does 4 fit into 12? You can count: 4, 8, 12  thats 3 times.",
                                            "Imagine you have 20 pencils and want to pack them into boxes with 5 pencils each. How many boxes do you need? 20  5 = 4. To divide, keep subtracting 5 until you reach 0: 20, 15, 10, 5, 0  you subtracted 5 a total of 4 times. Thats your answer.",
                                            "Division is also repeated subtraction. If you subtract 4 from 16 repeatedly  16, 12, 8, 4, 0  you did that 4 times. So 16  4 = 4. To divide like this, just keep subtracting the divisor (4) until you reach 0, and count the steps.",
                                            "Lets say a pizza has 8 slices and 2 people want to share it evenly. 8  2 = 4. To divide, ask: how many times does 2 fit into 8? Or think: what times 2 gives 8? The answer is 4. You can use multiplication facts to help divide.",
                                            "Suppose you're handing out 30 flyers to 6 students. Each should get the same amount. 30  6 = 5. To divide, think: 6 times what equals 30? The answer is 5. You can write it as a fact family: 6  5 = 30, so 30  6 = 5.",
                                            "Not all divisions are exact. If you have 10 apples and divide them among 4 people, 10  4 = 2.5. First, ask how many whole times 4 fits into 10  thats 2 (4  2 = 8), and then 2 are left. So its 2 with a remainder of 2, or 2.5 if split evenly.",
                                            "Division is closely related to multiplication. If 7  6 = 42, then 42  7 = 6 and 42  6 = 7. To divide, you can reverse a multiplication fact you know. That makes dividing faster and easier.",
                                            "If you have $120 and want to spend it evenly over 4 weeks, divide: 120  4 = 30. To do this, ask how many times 4 goes into 120. You can use long division or break 120 into chunks (40 + 40 + 40). Either way, the result is 30 per week.",
                                            "Division helps in measuring and scaling. For example, a 100-meter race divided into 4 equal parts is 100  4 = 25 meters each. You divide by thinking: how many times does 4 fit into 100? You can break it down as 40 + 40 + 20 (which is 4  25).",
                                            "Whether you're dividing ingredients, time, or tasks, division helps you break things down equally. To divide, take the total amount and subtract or break it into equal parts  either using subtraction, known multiplication facts, or long division  until you reach your result."
                                        ],
                                        "What's Addition?": [
                                            "Addition is the process of combining two or more values to find a total. For example, if you have 3 apples and pick 2 more, you now have 3 + 2 = 5 apples. To add, simply count upward from the first number: 3, 4, 5.",
                                            "Imagine you're saving money. One day you save $10, the next day $15. To find out how much you saved in total: 10 + 15 = 25. To add multi-digit numbers, line them up by place value and add column by column, starting from the right.",
                                            "Addition can be visual too. If one row of chairs has 4 seats and the next has 5, you add 4 + 5 = 9 to know there are 9 seats total. You can count on fingers or group objects to find the sum.",
                                            "Suppose you walk 2 kilometers in the morning and 3 in the afternoon. Youve walked 2 + 3 = 5 km in total. To add mentally, start with the bigger number (3), then count on: 4, 5.",
                                            "You bought 7 pens and your friend gave you 6 more. Now you have 7 + 6 = 13 pens. A trick for faster addition is to make tens  for example, 7 + 3 = 10, and then add the remaining 3: 10 + 3 = 13.",
                                            "Addition helps in combining scores too. If your team scores 24 points in the first half and 18 in the second, the total is 24 + 18 = 42. To add larger numbers, break them into parts: (20 + 10) + (4 + 8). Add each part, then combine.",
                                            "If you're baking cookies and make 12 chocolate and 8 vanilla, youve made 12 + 8 = 20 total. To add quickly, round one number up and subtract later: 12 + 8 = (12 + 10) - 2 = 20.",
                                            "You get 5 messages in the morning, 9 during lunch, and 6 in the evening. Total messages: 5 + 9 + 6 = 20. To add several numbers, you can group them: (5 + 6 = 11), then (11 + 9 = 20).",
                                            "Addition is also used in estimating. If something costs $29 and another item costs $31, you can quickly estimate: 30 + 30 = 60. Estimation helps with mental math when exact totals aren't needed right away.",
                                            "To add decimal numbers, like 2.5 + 3.7, line up the decimal points and add each place value just like whole numbers. 2.5 + 3.7 = 6.2. Addition works with all kinds of numbers: small, big, fractions, or decimals."
                                        ],
                                        "How do i give my answer ?": [
                                            `Click one of the options below the question`,
                                            `Click on one the ${alloptions.length} options, below the question`,
                                            `Click on one of the ${alloptions.length} options`,
                                            `Choose one of the ${alloptions.length} options, below the current question`
                                        ],
                                        "How do i skip ?": [
                                            `Click the skip button, in the top right corner. if you don't see the button there, you have reached your skip limit.`,
                                            `Click the skip botton. if you do not see the skip button, in the top right corner, then you have probably reached your skip limit.`,
                                            `If you can't see the skip button, you have probably reached your skip limit.`,
                                            `If you don't see the skip button, you probably reached the skip limit.`
                                        ],
                                        "How many questions are left ?": [
                                            `you got only ${maxprogress - progress} questions to go `,
                                            `you got ${maxprogress - progress} questions to go `,
                                            `there are ${maxprogress - progress} questions left`,
                                            `there are ${maxprogress - progress} more questions to go `,
                                            `there are ${maxprogress - progress} unanswered questions left`,
                                            `you are almost done. only ${maxprogress - progress} more questions to go `
                                        ],
                                        "How many questions have I answered ?": [
                                            `you have answered ${progress} questions`,
                                            `you answered ${progress} questions `
                                        ],
                                        "how many questions are there ?": [
                                            `${maxprogress} questions`,
                                            `there are ${maxprogress} questions`,
                                            `there are ${maxprogress} questions, in your current exercize`,
                                            `${maxprogress} questions, not too little and not too much`
                                        ]
                                    }
                                }
                                alloptions.forEach((op, index) => {
                                    const div1 = document.createElement('div');
                                    const div2 = document.createElement('div');
                                    const div3 = document.createElement('div');
                                    div1.className = "optionBtn";
                                    div2.className = "optionFill";
                                    div1.id = "optionBtn" + index;
                                    div2.id = "optionFill" + index;
                                    div1.onclick = () => {
                                        if (parseInt(op.percent) > 95) {
                                            div1.classList.add("green2");
                                            div2.classList.add("green1");
                                        } else if (parseInt(op.percent) > 35) {
                                            div1.classList.add("orange2");
                                            div2.classList.add("orange1");
                                        } else {
                                            div1.classList.add("red2");
                                            div2.classList.add("red1");
                                        }
                                        currentProgress += parseInt(op.percent);
                                        if (parseInt(op.percent) > 50) {
                                            points += Math.round(parseInt(op.percent) / 10);
                                        } else {
                                            points -= Math.round((100 - parseInt(op.percent)) / 20);
                                        }
                                        updatePoints();
                                        div2.style.width = op.percent + "%";
                                        div1.onclick = null;
                                        alloptions.forEach((el, index2) => {
                                            if (index != index2) {
                                                const op = document.getElementById("optionBtn" + index2);
                                                const opfill = document.getElementById("optionFill" + index2);
                                                const opText = document.getElementById("optionTitle" + index2);
                                                opfill.style.width = el.percent + "%";
                                                op.onclick = null;
                                                if (el.correct == true && op && opfill) {
                                                    opfill.classList.add("green1");
                                                    op.classList.add("green2");
                                                } else if (op && opfill) {
                                                    opfill.classList.add("defaultFill");
                                                    op.classList.add("defaultBg");
                                                    //opText.textContent = el.result;
                                                }
                                            }
                                        });
                                        rindex++;
                                        progress = rindex;
                                        const percentage = (progress / maxprogress) * 100;
                                        progresses[currentProgressElement].style.width = `${percentage}%`;
                                        countDown(() => {
                                            addQuestionAuto(rindex);
                                        });
                                    };
                                    div3.className = "optionTitle";
                                    div3.id = "optionTitle" + index;
                                    div3.textContent = op.text;
                                    //div2.textContent = op.percent;
                                    //div1.textContent = "option" + index;
                                    div1.appendChild(div2);
                                    div1.appendChild(div3);
                                    div1.style.pointerEvents = "none";
                                    setTimeout(() => {
                                        learnContent.appendChild(div1);
                                        if (index == alloptions.length - 1) {
                                            skipBtn.style.display = skipdisplay;
                                            backBtn.style.display = quitdisplay;
                                            alloptions.forEach((el, index2) => {
                                                const op = document.getElementById("optionBtn" + index2);
                                                op.style.pointerEvents = "auto";
                                            });
                                        }
                                    }, index * 100);
                                });
                            } else {
                                currentChatMessageOptions = {
                                    options: {
                                        "What's Multiplication ?": [
                                            "If you hold up 3 fingers and tap them on the table 4 times, thats the same as 3 + 3 + 3 + 3. Instead of adding 3 four times, you can use multiplication: 3  4 = 12. Thats what multiplication does  it repeats a number quickly.",
                                            "Each of your hands has 5 fingers. So if you look at both of them, thats 2 hands  5 fingers per hand = 10 fingers. You can count them one by one, but multiplication helps you find the total faster.",
                                            "Imagine stacking 2 blocks at a time. If you do that 6 times, youve placed 2 + 2 + 2 + 2 + 2 + 2 = 12 blocks. Thats 2  6. Multiplication just means you're repeating the same number multiple times.",
                                            "If you and 3 friends each hold up 4 fingers, thats 4  4. You could add 4 + 4 + 4 + 4, or just multiply: 4  4 = 16. This is like having 4 groups of 4 fingers.",
                                            "If you get 1 sticker every day for 5 days, you could count them: 1 + 1 + 1 + 1 + 1 = 5. Or you can say 1  5 = 5. Multiplying by 1 gives you the same number, just faster.",
                                            "Imagine a room with 5 rows of chairs, and each row has 3 chairs. Thats 5  3 = 15 chairs. Instead of counting each chair one at a time, you group them in rows and multiply.",
                                            "If you give 2 candies to each of 5 people, thats 2  5 = 10 candies. Its like having 5 groups of 2. You can add 2 five times, or multiply once.",
                                            "Lets say each of your 10 fingers has 10 tiny stickers on it. Thats 10  10 = 100 stickers. You could count all of them slowly, or multiply to get the total in one step.",
                                            "Instead of adding the same number again and again, multiplication helps you find the total in fewer steps. For example, 8  4 is the same as 4 + 4 + 4 + 4 + 4 + 4 + 4 + 4 = 32.",
                                            "If you high-five 3 people, and each high five uses your 5 fingers, then you used your hand 3 times. Thats 5  3 = 15 fingers used. Its the same as adding 5 + 5 + 5."
                                        ],
                                        "What's Subtraction?": [
                                            "If you have 5 cookies and eat 2, how many are left? You can count: 5 - 2 = 3. Subtraction helps you find out what remains after taking something away.",
                                            "Imagine 10 balloons, but 3 float away. You started with 10 and lost 3. So, 10 - 3 = 7 balloons left.",
                                            "You had 8 toy cars, but gave 4 to your friend. Now you only have 4. Thats subtraction: 8 - 4 = 4.",
                                            "If there are 6 apples in a basket and you take out 1, youre left with 5. Thats 6 - 1 = 5. Subtraction tells you whats still there after something is gone.",
                                            "There are 9 ducks swimming. 5 swim away. How many are still there? 9 - 5 = 4. Subtraction shows whats left.",
                                            "You got 7 stickers, but 2 fell off. 7 - 2 = 5 stickers still stuck. Subtraction tells you whats missing or gone.",
                                            "If you build a tower with 10 blocks and remove 3, there are 7 blocks left. Thats 10 - 3 = 7. Subtraction is like taking pieces away.",
                                            "You have 12 candies. You eat 6. Now you have 12 - 6 = 6 candies. Subtraction helps you find out whats left after you use or lose some.",
                                            "Imagine 20 people at a party, and 8 go home. 20 - 8 = 12 people still there. Subtraction is how we count what's left.",
                                            "You saved 15 coins, but you spent 5. Thats 15 - 5 = 10 coins remaining. Subtraction is like checking your balance after spending."
                                        ],
                                        "What's Division?": [
                                            "Division is the process of splitting something into equal parts or groups. For example, if you have 12 cookies and 4 people, division helps you figure out how many cookies each person gets: 12  4 = 3. To divide, you ask: How many times does 4 fit into 12? You can count: 4, 8, 12  thats 3 times.",
                                            "Imagine you have 20 pencils and want to pack them into boxes with 5 pencils each. How many boxes do you need? 20  5 = 4. To divide, keep subtracting 5 until you reach 0: 20, 15, 10, 5, 0  you subtracted 5 a total of 4 times. Thats your answer.",
                                            "Division is also repeated subtraction. If you subtract 4 from 16 repeatedly  16, 12, 8, 4, 0  you did that 4 times. So 16  4 = 4. To divide like this, just keep subtracting the divisor (4) until you reach 0, and count the steps.",
                                            "Lets say a pizza has 8 slices and 2 people want to share it evenly. 8  2 = 4. To divide, ask: how many times does 2 fit into 8? Or think: what times 2 gives 8? The answer is 4. You can use multiplication facts to help divide.",
                                            "Suppose you're handing out 30 flyers to 6 students. Each should get the same amount. 30  6 = 5. To divide, think: 6 times what equals 30? The answer is 5. You can write it as a fact family: 6  5 = 30, so 30  6 = 5.",
                                            "Not all divisions are exact. If you have 10 apples and divide them among 4 people, 10  4 = 2.5. First, ask how many whole times 4 fits into 10  thats 2 (4  2 = 8), and then 2 are left. So its 2 with a remainder of 2, or 2.5 if split evenly.",
                                            "Division is closely related to multiplication. If 7  6 = 42, then 42  7 = 6 and 42  6 = 7. To divide, you can reverse a multiplication fact you know. That makes dividing faster and easier.",
                                            "If you have $120 and want to spend it evenly over 4 weeks, divide: 120  4 = 30. To do this, ask how many times 4 goes into 120. You can use long division or break 120 into chunks (40 + 40 + 40). Either way, the result is 30 per week.",
                                            "Division helps in measuring and scaling. For example, a 100-meter race divided into 4 equal parts is 100  4 = 25 meters each. You divide by thinking: how many times does 4 fit into 100? You can break it down as 40 + 40 + 20 (which is 4  25).",
                                            "Whether you're dividing ingredients, time, or tasks, division helps you break things down equally. To divide, take the total amount and subtract or break it into equal parts  either using subtraction, known multiplication facts, or long division  until you reach your result."
                                        ],
                                        "What's Addition?": [
                                            "Addition is the process of combining two or more values to find a total. For example, if you have 3 apples and pick 2 more, you now have 3 + 2 = 5 apples. To add, simply count upward from the first number: 3, 4, 5.",
                                            "Imagine you're saving money. One day you save $10, the next day $15. To find out how much you saved in total: 10 + 15 = 25. To add multi-digit numbers, line them up by place value and add column by column, starting from the right.",
                                            "Addition can be visual too. If one row of chairs has 4 seats and the next has 5, you add 4 + 5 = 9 to know there are 9 seats total. You can count on fingers or group objects to find the sum.",
                                            "Suppose you walk 2 kilometers in the morning and 3 in the afternoon. Youve walked 2 + 3 = 5 km in total. To add mentally, start with the bigger number (3), then count on: 4, 5.",
                                            "You bought 7 pens and your friend gave you 6 more. Now you have 7 + 6 = 13 pens. A trick for faster addition is to make tens  for example, 7 + 3 = 10, and then add the remaining 3: 10 + 3 = 13.",
                                            "Addition helps in combining scores too. If your team scores 24 points in the first half and 18 in the second, the total is 24 + 18 = 42. To add larger numbers, break them into parts: (20 + 10) + (4 + 8). Add each part, then combine.",
                                            "If you're baking cookies and make 12 chocolate and 8 vanilla, youve made 12 + 8 = 20 total. To add quickly, round one number up and subtract later: 12 + 8 = (12 + 10) - 2 = 20.",
                                            "You get 5 messages in the morning, 9 during lunch, and 6 in the evening. Total messages: 5 + 9 + 6 = 20. To add several numbers, you can group them: (5 + 6 = 11), then (11 + 9 = 20).",
                                            "Addition is also used in estimating. If something costs $29 and another item costs $31, you can quickly estimate: 30 + 30 = 60. Estimation helps with mental math when exact totals aren't needed right away.",
                                            "To add decimal numbers, like 2.5 + 3.7, line up the decimal points and add each place value just like whole numbers. 2.5 + 3.7 = 6.2. Addition works with all kinds of numbers: small, big, fractions, or decimals."
                                        ],
                                        "How do i give my answer ?": [
                                            `Enter your answer in the input field, below the current question`,
                                            `Type out your answer in the input field, below the current question`,
                                            `Enter your answer in the input field, below the question`,
                                            `Type out your answer in the input field, below the question`
                                        ],
                                        "How do i skip ?": [
                                            `Click the skip button, in the top right corner. if you don't see the button there, you have reached your skip limit.`,
                                            `Click the skip botton. if you do not see the skip button, in the top right corner, then you have probably reached your skip limit.`,
                                            `If you can't see the skip button, you have probably reached your skip limit.`,
                                            `If you don't see the skip button, you probably reached the skip limit.`
                                        ],
                                        "How many questions are left ?": [
                                            `you got only ${maxprogress - progress} questions to go `,
                                            `you got ${maxprogress - progress} questions to go `,
                                            `there are ${maxprogress - progress} questions left`,
                                            `there are ${maxprogress - progress} more questions to go `,
                                            `there are ${maxprogress - progress} unanswered questions left`,
                                            `you are almost done. only ${maxprogress - progress} more questions to go `
                                        ],
                                        "How many questions have I answered ?": [
                                            `you have answered ${progress} questions`,
                                            `you answered ${progress} questions `
                                        ],
                                        "how many questions are there ?": [
                                            `${maxprogress} questions`,
                                            `there are ${maxprogress} questions`,
                                            `there are ${maxprogress} questions, in your current exercize`,
                                            `${maxprogress} questions, not too little and not too much`
                                        ]
                                    }
                                }
                                const inputEl = document.createElement("input");
                                inputEl.type = "text";
                                inputEl.className = "LearnInputField";
                                inputEl.placeholder = "Enter your answer here...";
                                function userAnswerSubmit() {
                                    const inputValue = formatNumberSmart(parseFloat(inputEl.value));
                                    
                                    if (isNaN(inputValue)) {
                                        inputEl.classList.add("red1");
                                        points -= 5;
                                        addCorrectAnswerToSection(learnContent, correctAnswer);
                                    } else if (inputValue == correctAnswer) {
                                        inputEl.classList.add("green2");
                                        points += 10;
                                        currentProgress += 100;
                                        confirmCorrectAnswer(learnContent, correctAnswer);
                                    } else if (inputValue < correctAnswer + 10 && inputValue > correctAnswer - 10) {
                                        inputEl.classList.add("orange1");
                                        points += 5;
                                        currentProgress += 50;
                                        addCorrectAnswerToSection(learnContent, correctAnswer);
                                    } else {
                                        inputEl.classList.add("red1");
                                        points -= 5;
                                        addCorrectAnswerToSection(learnContent, correctAnswer);
                                    }
                                    updatePoints();
                                    rindex++;
                                    progress = rindex;
                                    const percentage = (progress / maxprogress) * 100;
                                    progresses[currentProgressElement].style.width = `${percentage}%`;
                                    countDown(() => {
                                        addQuestionAuto(rindex);
                                    });
                                }
                                inputEl.onkeydown = (event) => {
                                    if (event.key == "Enter") {
                                        inputEl.disabled = true;
                                        inputEl.onkeydown = null;
                                        userAnswerSubmit();
                                    }
                                };
                                learnContent.appendChild(inputEl);
                                skipBtn.style.display = skipdisplay;
                            }
                        }
                        else if (randomTypeOfExercise == "multiplication") {
                            function randomNumbeGen() {
                                if (level == "easy") {
                                    return Math.floor(Math.random() * 9);
                                } else if (level == "medium") {
                                    return Math.floor(Math.random() * 25);
                                }
                                return Math.floor(Math.random() * 100);
                            }
                            const firstNum = randomNumbeGen();
                            const secondNum = randomNumbeGen();
                            
                            addQuestionText(`What is ${firstNum}  ${secondNum} ?`, learnContent);
                            const correctAnswer = firstNum * secondNum;
                            
                            const multiopOrInput = Math.floor(Math.random() * 2);
                            if (multiopOrInput == 1) {
                                let alloptions1 = [
                                    {
                                        "text": `${correctAnswer}`,
                                        "result": "correct",
                                        "percent": "100",
                                        "correct": true
                                    }
                                ];
                                
                                const randomAmout = Math.floor(Math.random() * 5) + 3;
                                let allOps = [correctAnswer];
                                for (let i = 0; i < randomAmout; i++) {
                                    let firstWrongNum = randomNumbeGen();
                                    let secondWrongNum = randomNumbeGen();
                                    let whileTries = 0;
                                    while (whileTries <= 20 && (allOps.includes(formatNumberSmart(firstWrongNum * secondWrongNum)) || !Number.isFinite(formatNumberSmart(firstWrongNum * secondWrongNum)))) {
                                        firstWrongNum = randomNumbeGen();
                                        secondWrongNum = randomNumbeGen();
                                        whileTries++;
                                    }
                                    const oneWrongAnswer = firstWrongNum * secondWrongNum;
                                    /*let difference = correctAnswer > oneWrongAnswer ?
                                        correctAnswer - oneWrongAnswer :
                                        oneWrongAnswer - correctAnswer;*/
                                    let difference = Math.abs(correctAnswer - oneWrongAnswer);
                                    let scale = Math.abs(correctAnswer) > 0 ? Math.abs(correctAnswer) : 1;
                                    
                                    let percent = 100 - (difference / scale * 100);
                                    percent = Math.max(0, Math.min(100, percent));
                                    if (!allOps.includes(oneWrongAnswer)) {
                                        allOps.push(oneWrongAnswer);
                                        alloptions1.push({
                                            "text": `${oneWrongAnswer}`,
                                            "result": `Incorrect`,
                                            "percent": percent,
                                            "correct": false
                                        });
                                    }
                                }
                                const alloptions = shuffleArray(alloptions1);
                                currentChatMessageOptions = {
                                    options: {
                                        "What's Multiplication ?": [
                                            "If you hold up 3 fingers and tap them on the table 4 times, thats the same as 3 + 3 + 3 + 3. Instead of adding 3 four times, you can use multiplication: 3  4 = 12. Thats what multiplication does  it repeats a number quickly.",
                                            "Each of your hands has 5 fingers. So if you look at both of them, thats 2 hands  5 fingers per hand = 10 fingers. You can count them one by one, but multiplication helps you find the total faster.",
                                            "Imagine stacking 2 blocks at a time. If you do that 6 times, youve placed 2 + 2 + 2 + 2 + 2 + 2 = 12 blocks. Thats 2  6. Multiplication just means you're repeating the same number multiple times.",
                                            "If you and 3 friends each hold up 4 fingers, thats 4  4. You could add 4 + 4 + 4 + 4, or just multiply: 4  4 = 16. This is like having 4 groups of 4 fingers.",
                                            "If you get 1 sticker every day for 5 days, you could count them: 1 + 1 + 1 + 1 + 1 = 5. Or you can say 1  5 = 5. Multiplying by 1 gives you the same number, just faster.",
                                            "Imagine a room with 5 rows of chairs, and each row has 3 chairs. Thats 5  3 = 15 chairs. Instead of counting each chair one at a time, you group them in rows and multiply.",
                                            "If you give 2 candies to each of 5 people, thats 2  5 = 10 candies. Its like having 5 groups of 2. You can add 2 five times, or multiply once.",
                                            "Lets say each of your 10 fingers has 10 tiny stickers on it. Thats 10  10 = 100 stickers. You could count all of them slowly, or multiply to get the total in one step.",
                                            "Instead of adding the same number again and again, multiplication helps you find the total in fewer steps. For example, 8  4 is the same as 4 + 4 + 4 + 4 + 4 + 4 + 4 + 4 = 32.",
                                            "If you high-five 3 people, and each high five uses your 5 fingers, then you used your hand 3 times. Thats 5  3 = 15 fingers used. Its the same as adding 5 + 5 + 5."
                                        ],
                                        "How do i give my answer ?": [
                                            `Click one of the options below the question`,
                                            `Click on one the ${alloptions.length} options, below the question`,
                                            `Click on one of the ${alloptions.length} options`,
                                            `Choose one of the ${alloptions.length} options, below the current question`
                                        ],
                                        "How do i skip ?": [
                                            `Click the skip button, in the top right corner. if you don't see the button there, you have reached your skip limit.`,
                                            `Click the skip botton. if you do not see the skip button, in the top right corner, then you have probably reached your skip limit.`,
                                            `If you can't see the skip button, you have probably reached your skip limit.`,
                                            `If you don't see the skip button, you probably reached the skip limit.`
                                        ],
                                        "How many questions are left ?": [
                                            `you got only ${maxprogress - progress} questions to go `,
                                            `you got ${maxprogress - progress} questions to go `,
                                            `there are ${maxprogress - progress} questions left`,
                                            `there are ${maxprogress - progress} more questions to go `,
                                            `there are ${maxprogress - progress} unanswered questions left`,
                                            `you are almost done. only ${maxprogress - progress} more questions to go `
                                        ],
                                        "How many questions have I answered ?": [
                                            `you have answered ${progress} questions`,
                                            `you answered ${progress} questions `
                                        ],
                                        "how many questions are there ?": [
                                            `${maxprogress} questions`,
                                            `there are ${maxprogress} questions`,
                                            `there are ${maxprogress} questions, in your current exercize`,
                                            `${maxprogress} questions, not too little and not too much`
                                        ]
                                    }
                                }
                                alloptions.forEach((op, index) => {
                                    const div1 = document.createElement('div');
                                    const div2 = document.createElement('div');
                                    const div3 = document.createElement('div');
                                    div1.className = "optionBtn";
                                    div2.className = "optionFill";
                                    div1.id = "optionBtn" + index;
                                    div2.id = "optionFill" + index;
                                    div1.onclick = () => {
                                        if (parseInt(op.percent) > 85) {
                                            div1.classList.add("green2");
                                            div2.classList.add("green1");
                                        } else if (parseInt(op.percent) > 35) {
                                            div1.classList.add("orange2");
                                            div2.classList.add("orange1");
                                        } else {
                                            div1.classList.add("red2");
                                            div2.classList.add("red1");
                                        }
                                        currentProgress += parseInt(op.percent);
                                        if (parseInt(op.percent) > 50) {
                                            points += Math.round(parseInt(op.percent) / 10);
                                        } else {
                                            points -= Math.round((100 - parseInt(op.percent)) / 20);
                                        }
                                        updatePoints();
                                        div2.style.width = op.percent + "%";
                                        div1.onclick = null;
                                        alloptions.forEach((el, index2) => {
                                            if (index != index2) {
                                                const op = document.getElementById("optionBtn" + index2);
                                                const opfill = document.getElementById("optionFill" + index2);
                                                const opText = document.getElementById("optionTitle" + index2);
                                                opfill.style.width = el.percent + "%";
                                                op.onclick = null;
                                                if (el.correct == true && op && opfill) {
                                                    opfill.classList.add("green1");
                                                    op.classList.add("green2");
                                                } else if (op && opfill) {
                                                    opfill.classList.add("defaultFill");
                                                    op.classList.add("defaultBg");
                                                    //opText.textContent = el.result;
                                                }
                                            }
                                        });
                                        rindex++;
                                        progress = rindex;
                                        const percentage = (progress / maxprogress) * 100;
                                        progresses[currentProgressElement].style.width = `${percentage}%`;
                                        countDown(() => {
                                            addQuestionAuto(rindex);
                                        });
                                    };
                                    div3.className = "optionTitle";
                                    div3.id = "optionTitle" + index;
                                    div3.textContent = op.text;
                                    //div2.textContent = op.percent;
                                    //div1.textContent = "option" + index;
                                    div1.appendChild(div2);
                                    div1.appendChild(div3);
                                    div1.style.pointerEvents = "none";
                                    setTimeout(() => {
                                        learnContent.appendChild(div1);
                                        if (index == alloptions.length - 1) {
                                            skipBtn.style.display = skipdisplay;
                                            backBtn.style.display = quitdisplay;
                                            alloptions.forEach((el, index2) => {
                                                const op = document.getElementById("optionBtn" + index2);
                                                op.style.pointerEvents = "auto";
                                            });
                                        }
                                    }, index * 100);
                                });
                            } else {
                                currentChatMessageOptions = {
                                    options: {
                                        "What's Multiplication ?": [
                                            "If you hold up 3 fingers and tap them on the table 4 times, thats the same as 3 + 3 + 3 + 3. Instead of adding 3 four times, you can use multiplication: 3  4 = 12. Thats what multiplication does  it repeats a number quickly.",
                                            "Each of your hands has 5 fingers. So if you look at both of them, thats 2 hands  5 fingers per hand = 10 fingers. You can count them one by one, but multiplication helps you find the total faster.",
                                            "Imagine stacking 2 blocks at a time. If you do that 6 times, youve placed 2 + 2 + 2 + 2 + 2 + 2 = 12 blocks. Thats 2  6. Multiplication just means you're repeating the same number multiple times.",
                                            "If you and 3 friends each hold up 4 fingers, thats 4  4. You could add 4 + 4 + 4 + 4, or just multiply: 4  4 = 16. This is like having 4 groups of 4 fingers.",
                                            "If you get 1 sticker every day for 5 days, you could count them: 1 + 1 + 1 + 1 + 1 = 5. Or you can say 1  5 = 5. Multiplying by 1 gives you the same number, just faster.",
                                            "Imagine a room with 5 rows of chairs, and each row has 3 chairs. Thats 5  3 = 15 chairs. Instead of counting each chair one at a time, you group them in rows and multiply.",
                                            "If you give 2 candies to each of 5 people, thats 2  5 = 10 candies. Its like having 5 groups of 2. You can add 2 five times, or multiply once.",
                                            "Lets say each of your 10 fingers has 10 tiny stickers on it. Thats 10  10 = 100 stickers. You could count all of them slowly, or multiply to get the total in one step.",
                                            "Instead of adding the same number again and again, multiplication helps you find the total in fewer steps. For example, 8  4 is the same as 4 + 4 + 4 + 4 + 4 + 4 + 4 + 4 = 32.",
                                            "If you high-five 3 people, and each high five uses your 5 fingers, then you used your hand 3 times. Thats 5  3 = 15 fingers used. Its the same as adding 5 + 5 + 5."
                                        ],
                                        "How do i give my answer ?": [
                                            `Enter your answer in the input field, below the current question`,
                                            `Type out your answer in the input field, below the current question`,
                                            `Enter your answer in the input field, below the question`,
                                            `Type out your answer in the input field, below the question`
                                        ],
                                        "How do i skip ?": [
                                            `Click the skip button, in the top right corner. if you don't see the button there, you have reached your skip limit.`,
                                            `Click the skip botton. if you do not see the skip button, in the top right corner, then you have probably reached your skip limit.`,
                                            `If you can't see the skip button, you have probably reached your skip limit.`,
                                            `If you don't see the skip button, you probably reached the skip limit.`
                                        ],
                                        "How many questions are left ?": [
                                            `you got only ${maxprogress - progress} questions to go `,
                                            `you got ${maxprogress - progress} questions to go `,
                                            `there are ${maxprogress - progress} questions left`,
                                            `there are ${maxprogress - progress} more questions to go `,
                                            `there are ${maxprogress - progress} unanswered questions left`,
                                            `you are almost done. only ${maxprogress - progress} more questions to go `
                                        ],
                                        "How many questions have I answered ?": [
                                            `you have answered ${progress} questions`,
                                            `you answered ${progress} questions `
                                        ],
                                        "how many questions are there ?": [
                                            `${maxprogress} questions`,
                                            `there are ${maxprogress} questions`,
                                            `there are ${maxprogress} questions, in your current exercize`,
                                            `${maxprogress} questions, not too little and not too much`
                                        ]
                                    }
                                }
                                const inputEl = document.createElement("input");
                                inputEl.type = "text";
                                inputEl.className = "LearnInputField";
                                inputEl.placeholder = "Enter your answer here...";
                                function userAnswerSubmit() {
                                    const inputValue = parseInt(inputEl.value);
                                    
                                    if (isNaN(inputValue)) {
                                        inputEl.classList.add("red1");
                                        points -= 5;
                                        addCorrectAnswerToSection(learnContent, correctAnswer);
                                    } else if (inputValue == correctAnswer) {
                                        inputEl.classList.add("green2");
                                        points += 10;
                                        currentProgress += 100;
                                        confirmCorrectAnswer(learnContent, correctAnswer);
                                    } else if (inputValue < correctAnswer + 10 && inputValue > correctAnswer - 10) {
                                        inputEl.classList.add("orange1");
                                        points += 5;
                                        currentProgress += 50;
                                        addCorrectAnswerToSection(learnContent, correctAnswer);
                                    } else {
                                        inputEl.classList.add("red1");
                                        points -= 5;
                                        addCorrectAnswerToSection(learnContent, correctAnswer);
                                    }
                                    updatePoints();
                                    rindex++;
                                    progress = rindex;
                                    const percentage = (progress / maxprogress) * 100;
                                    progresses[currentProgressElement].style.width = `${percentage}%`;
                                    countDown(() => {
                                        addQuestionAuto(rindex);
                                    });
                                }
                                inputEl.onkeydown = (event) => {
                                    if (event.key == "Enter") {
                                        inputEl.disabled = true;
                                        inputEl.onkeydown = null;
                                        userAnswerSubmit();
                                    }
                                };
                                learnContent.appendChild(inputEl);
                                skipBtn.style.display = skipdisplay;
                            }
                        }
                        else if (randomTypeOfExercise == "shape") {
                            startLoad();
                            fetch("/questions/math/shapes.json")
                                .then(response => {
                                    if (!response.ok) throw new Error("Not found");
                                    return response.json();
                                })
                                .then(shapeQuestionDataList => {
                                    stopLoad();
                                    const randomObject = shapeQuestionDataList[Math.floor(Math.random() * shapeQuestionDataList.length)];
                                    learnContent.innerHTML = "";
                                    function add3del() {
                                        const shapeContainer = document.createElement("div");
                                        shapeContainer.className = "shape-container";
                                        const scene = document.createElement("div");
                                        scene.className = "scene";
                                        scene.id = "scene";
                                        shapeContainer.appendChild(scene);
                                        if (randomObject.name == "squarebasedpyramid") {
                                            const pyramid = document.createElement("div");
                                            pyramid.className = "pyramid";
                                            scene.appendChild(pyramid);
                                            
                                            const face1 = document.createElement("div");
                                            face1.className = "face face1";
                                            pyramid.appendChild(face1);
                                            const face2 = document.createElement("div");
                                            face2.className = "face face2";
                                            pyramid.appendChild(face2);
                                            const face3 = document.createElement("div");
                                            face3.className = "face face3";
                                            pyramid.appendChild(face3);
                                            const face4 = document.createElement("div");
                                            face4.className = "face face4";
                                            pyramid.appendChild(face4);
                                            const base = document.createElement("div");
                                            base.className = "base";
                                            pyramid.appendChild(base);
                                            
                                            learnContent.appendChild(shapeContainer);
                                        } else if (randomObject.name == "cylinder") {
                                            const cylinder = document.createElement("div");
                                            cylinder.className = "cylinder";
                                            scene.appendChild(cylinder);
                                            
                                            const cylinderSide = document.createElement("div");
                                            cylinderSide.className = "cylinder-side";
                                            cylinderSide.id = "cylinder-side";
                                            cylinder.appendChild(cylinderSide);
                                            const cylinderTop = document.createElement("div");
                                            cylinderTop.className = "cylinder-top";
                                            cylinder.appendChild(cylinderTop);
                                            const cylinderBottom = document.createElement("div");
                                            cylinderBottom.className = "cylinder-bottom";
                                            cylinder.appendChild(cylinderBottom);
                                            
                                            const segments = 36;
                                            for (let i = 0; i < segments; i++) {
                                                const segment = document.createElement('div');
                                                segment.className = 'segment';
                                                const angle = (360 / segments) * i;
                                                segment.style.transform = `rotateY(${angle}deg) translateZ(70px)`;
                                                cylinderSide.appendChild(segment);
                                            }
                                            
                                            learnContent.appendChild(shapeContainer);
                                        } else if (randomObject.name == "cone") {
                                            const cone = document.createElement("div");
                                            cone.className = "cone";
                                            scene.appendChild(cone);
                                            
                                            const coneSide = document.createElement("div");
                                            coneSide.className = "cone-side";
                                            coneSide.id = "cone-side";
                                            cone.appendChild(coneSide);
                                            const coneBase = document.createElement("div");
                                            coneBase.className = "cone-base";
                                            cone.appendChild(coneBase);
                                            
                                            const segments = 60;
                                            const radius = 85;
                                            const height = 120;
                                            for (let i = 0; i < segments; i++) {
                                                const segment = document.createElement('div');
                                                segment.className = 'segment';
                                                
                                                const angleY = (360 / segments) * i;
                                                const angleRad = (angleY * Math.PI) / 180;
                                                
                                                // Segmentposition in Kreis (x,z)
                                                const x = radius * Math.sin(angleRad);
                                                const z = radius * Math.cos(angleRad);
                                                
                                                // Vektor zur Spitze (0, -height, 0) - (x, 0, z)
                                                const dx = -x;
                                                const dy = -height;
                                                const dz = -z;
                                                
                                                // Neigungswinkel berechnen (zwischen Segmentrichtung und Vektor zur Spitze)
                                                const horizontalDistance = Math.sqrt(dx * dx + dz * dz);
                                                const tiltAngle = Math.atan2(horizontalDistance, height) * (180 / Math.PI);
                                                
                                                // Transform: zuerst zur Mitte kippen, dann um Y drehen, dann rausrcken
                                                segment.style.transform = `
                                                    rotateY(${angleY}deg)
                                                    rotateX(${tiltAngle}deg)
                                                    translateZ(${radius}px)
                                                  `;
                                                
                                                coneSide.appendChild(segment);
                                            }
                                            
                                            learnContent.appendChild(shapeContainer);
                                        } else if (randomObject.name == "triangularprism") {
                                            const triangularPrism = document.createElement("div");
                                            triangularPrism.className = "triangular-prism";
                                            scene.appendChild(triangularPrism);
                                            
                                            const face1 = document.createElement("div");
                                            face1.className = "face triangle face1";
                                            triangularPrism.appendChild(face1);
                                            const face2 = document.createElement("div");
                                            face2.className = "face triangle face2";
                                            triangularPrism.appendChild(face2);
                                            const face3 = document.createElement("div");
                                            face3.className = "face rectangle face3";
                                            triangularPrism.appendChild(face3);
                                            const face4 = document.createElement("div");
                                            face4.className = "face rectangle face4";
                                            triangularPrism.appendChild(face4);
                                            const face5 = document.createElement("div");
                                            face5.className = "face rectangle face5";
                                            triangularPrism.appendChild(face5);
                                            
                                            learnContent.appendChild(shapeContainer);
                                        } else if (randomObject.name == "cuboid") {
                                            const cuboid = document.createElement("div");
                                            cuboid.className = "cuboid";
                                            scene.appendChild(cuboid);
                                            
                                            const face1 = document.createElement("div");
                                            face1.className = "face face-front";
                                            cuboid.appendChild(face1);
                                            const face2 = document.createElement("div");
                                            face2.className = "face face-back";
                                            cuboid.appendChild(face2);
                                            const face3 = document.createElement("div");
                                            face3.className = "face face-left";
                                            cuboid.appendChild(face3);
                                            const face4 = document.createElement("div");
                                            face4.className = "face face-right";
                                            cuboid.appendChild(face4);
                                            const face5 = document.createElement("div");
                                            face5.className = "face face-top";
                                            cuboid.appendChild(face5);
                                            const face6 = document.createElement("div");
                                            face6.className = "face face-bottom";
                                            cuboid.appendChild(face6);
                                            
                                            learnContent.appendChild(shapeContainer);
                                        } else if (randomObject.name == "cube") {
                                            const cube = document.createElement("div");
                                            cube.className = "cube";
                                            scene.appendChild(cube);
                                            
                                            const face1 = document.createElement("div");
                                            face1.className = "face face-front";
                                            cube.appendChild(face1);
                                            const face2 = document.createElement("div");
                                            face2.className = "face face-back";
                                            cube.appendChild(face2);
                                            const face3 = document.createElement("div");
                                            face3.className = "face face-left";
                                            cube.appendChild(face3);
                                            const face4 = document.createElement("div");
                                            face4.className = "face face-right";
                                            cube.appendChild(face4);
                                            const face5 = document.createElement("div");
                                            face5.className = "face face-top";
                                            cube.appendChild(face5);
                                            const face6 = document.createElement("div");
                                            face6.className = "face face-bottom";
                                            cube.appendChild(face6);
                                            
                                            learnContent.appendChild(shapeContainer);
                                        }
                                        else if (randomObject.name == "tetrahedron") {
                                            const tetrahedron = document.createElement("div");
                                            tetrahedron.className = "tetrahedron";
                                            scene.appendChild(tetrahedron);
                                            
                                            const face1 = document.createElement("div");
                                            face1.className = "triangle-face face1";
                                            tetrahedron.appendChild(face1);
                                            const face2 = document.createElement("div");
                                            face2.className = "triangle-face face2";
                                            tetrahedron.appendChild(face2);
                                            const face3 = document.createElement("div");
                                            face3.className = "triangle-face face3";
                                            tetrahedron.appendChild(face3);
                                            const face4 = document.createElement("div");
                                            face4.className = "base";
                                            tetrahedron.appendChild(face4);
                                            
                                            learnContent.appendChild(shapeContainer);
                                        }
                                        let isDragging = false;
                                            let startX, startY;
                                            let rotationX = -19;
                                            let rotationY = 6;
                                            
                                            function onPointerDown(e) {
                                                isDragging = true;
                                                startX = e.clientX || e.touches[0].clientX;
                                                startY = e.clientY || e.touches[0].clientY;
                                            }
                                            
                                            function onPointerMove(e) {
                                                if (!scene || !scene.parentElement) {
                                                    isDragging = false;
                                                    startX = null;
                                                    startY = null;
                                                    rotationX = 0;
                                                    rotationY = 0;
                                                    // Mouse events
                                                    scene.removeEventListener('mousedown', onPointerDown);
                                                    document.removeEventListener('mousemove', onPointerMove);
                                                    document.removeEventListener('mouseup', onPointerUp);
                                                    
                                                    // Touch events
                                                    scene.removeEventListener('touchstart', onPointerDown, { passive: false });
                                                    document.removeEventListener('touchmove', onPointerMove, { passive: false });
                                                    document.removeEventListener('touchend', onPointerUp);
                                                }
                                                if (!isDragging) return;
                                                const x = e.clientX || e.touches[0].clientX;
                                                const y = e.clientY || e.touches[0].clientY;
                                                
                                                const dx = x - startX;
                                                const dy = y - startY;
                                                
                                                rotationY += dx * 0.5;
                                                rotationX -= dy * 0.5;
                                                
                                                startX = x;
                                                startY = y;
                                                
                                                updateTransform();
                                            }
                                            
                                            function onPointerUp() {
                                                isDragging = false;
                                            }
                                            
                                            // Mouse events
                                            scene.addEventListener('mousedown', onPointerDown);
                                            document.addEventListener('mousemove', onPointerMove);
                                            document.addEventListener('mouseup', onPointerUp);
                                            
                                            // Touch events
                                            scene.addEventListener('touchstart', onPointerDown, { passive: false });
                                            document.addEventListener('touchmove', onPointerMove, { passive: false });
                                            document.addEventListener('touchend', onPointerUp);
                                            function updateTransform() {
                                                
                                                scene.style.transform = `rotateX(${rotationX}deg) rotateY(${rotationY}deg)`;
                                            }
                                    }
                                    const add3Dmodel = Math.floor(Math.random() * 5);
                                    
                                    const questionText = randomObject.text[Math.floor(Math.random() * randomObject.text.length)];
                                    learnContent.innerHTML = "";
                                    if (level != "hard" && add3Dmodel != 1) {
                                        add3del();
                                    }
                                    
                                    addQuestionText(questionText, learnContent, false);
                                    
                                    const alloptions = shuffleArray(randomObject.options);
                                    currentChatMessageOptions = {
                                        options: {
                                            "How do i give my answer ?": [
                                                `Click one of the options below the question`,
                                                `Click on one the ${alloptions.length} options, below the question`,
                                                `Click on one of the ${alloptions.length} options`,
                                                `Choose one of the ${alloptions.length} options, below the current question`
                                            ],
                                            "How do i skip ?": [
                                                `Click the skip button, in the top right corner. if you don't see the button there, you have reached your skip limit.`,
                                                `Click the skip botton. if you do not see the skip button, in the top right corner, then you have probably reached your skip limit.`,
                                                `If you can't see the skip button, you have probably reached your skip limit.`,
                                                `If you don't see the skip button, you probably reached the skip limit.`
                                            ],
                                            "How many questions are left ?": [
                                                `you got only ${maxprogress - progress} questions to go `,
                                                `you got ${maxprogress - progress} questions to go `,
                                                `there are ${maxprogress - progress} questions left`,
                                                `there are ${maxprogress - progress} more questions to go `,
                                                `there are ${maxprogress - progress} unanswered questions left`,
                                                `you are almost done. only ${maxprogress - progress} more questions to go `
                                            ],
                                            "How many questions have I answered ?": [
                                                `you have answered ${progress} questions`,
                                                `you answered ${progress} questions `
                                            ],
                                            "how many questions are there ?": [
                                                `${maxprogress} questions`,
                                                `there are ${maxprogress} questions`,
                                                `there are ${maxprogress} questions, in your current exercize`,
                                                `${maxprogress} questions, not too little and not too much`
                                            ]
                                        }
                                    }
                                    alloptions.forEach((op, index) => {
                                            const div1 = document.createElement('div');
                                            const div2 = document.createElement('div');
                                            const div3 = document.createElement('div');
                                            div1.className = "optionBtn";
                                            div2.className = "optionFill";
                                            div1.id = "optionBtn" + index;
                                            div2.id = "optionFill" + index;
                                            if (isNaN(op.text) && op.text.trim() !== "") {
                                                addAudioButton(div1, op.text);
                                            }
                                            div1.onclick = (event) => {
                                                if (event.target && event.target.classList.contains('audio-button')) return;
                                                if (parseInt(op.percent) > 85) {
                                                    div1.classList.add("green2");
                                                } else if (parseInt(op.percent) > 35) {
                                                    div1.classList.add("orange2");
                                                } else {
                                                    div1.classList.add("red2");
                                                }
                                                if (parseInt(op.percent) > 85) {
                                                    div2.classList.add("green1");
                                                } else if (parseInt(op.percent) > 35) {
                                                    div2.classList.add("orange1");
                                                } else {
                                                    div2.classList.add("red1");
                                                }
                                                currentProgress += parseInt(op.percent);
                                                if (parseInt(op.percent) > 50) {
                                                    points += Math.round(parseInt(op.percent) / 10);
                                                } else {
                                                    points -= Math.round((100 - parseInt(op.percent)) / 20);
                                                }
                                                updatePoints();
                                                div2.style.width = op.percent + "%";
                                                div1.onclick = null;
                                                alloptions.forEach((el, index2) => {
                                                    if (index != index2) {
                                                        const op = document.getElementById("optionBtn" + index2);
                                                        const opfill = document.getElementById("optionFill" + index2);
                                                        const opText = document.getElementById("optionTitle" + index2);
                                                        opfill.style.width = el.percent + "%";
                                                        op.onclick = null;
                                                        if (el.correct == true && op && opfill) {
                                                            opfill.classList.add("green1");
                                                            op.classList.add("green2");
                                                        } else if (op && opfill) {
                                                            opfill.classList.add("defaultFill");
                                                            op.classList.add("defaultBg");
                                                            //opText.textContent = el.result;
                                                        }
                                                    }
                                                });
                                                rindex++;
                                                progress = rindex;
                                                const percentage = (progress / maxprogress) * 100;
                                                progresses[currentProgressElement].style.width = `${percentage}%`;
                                                countDown(() => {
                                                    addQuestionAuto(rindex);
                                                });
                                            };
                                            div3.className = "optionTitle";
                                            div3.id = "optionTitle" + index;
                                            div3.textContent = op.text;
                                            //div2.textContent = op.percent;
                                            //div1.textContent = "option" + index;
                                            div1.appendChild(div2);
                                            div1.appendChild(div3);
                                            div1.style.pointerEvents = "none";
                                            setTimeout(() => {
                                                learnContent.appendChild(div1);
                                                if (index == alloptions.length - 1) {
                                                    skipBtn.style.display = skipdisplay;
                                                    backBtn.style.display = quitdisplay;
                                                    alloptions.forEach((el, index2) => {
                                                        const op = document.getElementById("optionBtn" + index2);
                                                        op.style.pointerEvents = "auto";
                                                    });
                                                }
                                            }, index * 100);
                                        });
                                })
                                .catch(error => {
                                    learnContent.innerHTML = "<p>questions not found.</p>";
                                    alert("questions not found.");
                                });
                        }
                    }
                    addQuestionAuto();
                })
                .catch(error => {
                    learnContent.innerHTML = "<p>Questions not found.</p>" + error;
                    alert("Questions not found.");
                });
        }
        function addTimeOptions(data, callback) {
            learnContent.innerHTML = ""; // alte Buttons entfernen
            
            const keys = Object.keys(data);
            for (const key of keys) {
                if (key == "hard") {
                    const mathLevelOption = document.createElement("div");
                    mathLevelOption.className = "TimeLevelOption hard";
                    const btngrid = document.createElement("div");
                    btngrid.className = "btngrid";
                    mathLevelOption.appendChild(btngrid);
                    const text = document.createElement("div");
                    text.className = "text";
                    const hinge = document.createElement("div");
                    hinge.className = "hinge";
                    const part1 = document.createElement("div");
                    part1.className = "part1";
                    hinge.appendChild(part1);
                    const part2 = document.createElement("div");
                    part2.className = "part2";
                    hinge.appendChild(part2);
                    text.textContent = key;
                    text.appendChild(hinge);
                    mathLevelOption.appendChild(text);
                    mathLevelOption.addEventListener("click", () => {
                        callback(key); // z.B. "easy", "medium", "hard"
                    });
                    learnContent.appendChild(mathLevelOption);
                }else if (key == "medium") {
                    const mathLevelOption = document.createElement("div");
                    mathLevelOption.className = "TimeLevelOption medium";
                    const text = document.createElement("div");
                    text.className = "text";
                    const mathSymbols = [ '', '', '', '', '', '', '', '', '', '', '', ];
                    for (let i = 0; i < 50; i++) {
                        const symbol = document.createElement("div");
                        symbol.className = "mathsimbol";
                        symbol.textContent = mathSymbols[Math.floor(Math.random() * mathSymbols.length)];
                        mathLevelOption.appendChild(symbol);
                        const x = Math.floor(Math.random() * 100);
                        const y = Math.floor(Math.random() * 100);
                        symbol.style.top = y + "%";
                        symbol.style.left = i * 2 + "%";
                    }
                    text.textContent = key;
                    mathLevelOption.appendChild(text);
                    mathLevelOption.addEventListener("click", () => {
                        callback(key); // z.B. "easy", "medium", "hard"
                    });
                    learnContent.appendChild(mathLevelOption);
                }else if (key == "easy") {
                    const mathLevelOption = document.createElement("div");
                    mathLevelOption.className = "TimeLevelOption easy";
                    const text = document.createElement("div");
                    text.className = "text";
                    text.textContent = key;
                    mathLevelOption.appendChild(text);
                    mathLevelOption.addEventListener("click", () => {
                        callback(key); // z.B. "easy", "medium", "hard"
                    });
                    learnContent.appendChild(mathLevelOption);
                }
            }
        }
        function addTimeQuestions(rdata, level) {
            const fileName = "questions/time/" + level + "time.json";
            startLoad();
            fetch(fileName)
                .then(response => {
                    if (response.ok) {
                        return response.json();
                    }
                })
                .then(data => {
                    stopLoad();
                    const shuffled = shuffleArray(cutArray(data));
                    function addQuestionAuto(rindex = -0) {
                        skipBtn.style.display = "none";
                        maxprogress = 19;
                        if (rindex == maxprogress) {
                            claimPointsOverlay(maxprogress, () => {
                                stopQuestions();
                                fetchQuestions("/questions/questions.json");
                            });
                            return;
                        }
                        let randomTypeOfExercise = rdata[Math.floor(Math.random() * rdata.length)];
                        while (randomTypeOfExercise == "quiz" && (!data || data.length === 0)) {
                            randomTypeOfExercise = rdata[Math.floor(Math.random() * rdata.length)];
                        }
                        if (currentProgressElement != progresses.length - 1) {
                            skipBtn.onclick = () => {
                                currentProgressElement++;
                                rindex++;
                                if (currentProgressElement == progresses.length - 1) {
                                    skipdisplay = "none";
                                    skipBtn.style.display = "none";
                                }
                                addQuestionAuto(rindex);
                            };
                        }
                        function shuffleArray(array) {
                            for (let i = array.length - 1; i > 0; i--) {
                                const j = Math.floor(Math.random() * (i + 1)); // random index from 0 to i
                                [array[i], array[j]] = [array[j], array[i]]; // swap
                            }
                            return array;
                        }
                        function formatNumberSmart(num) {
                            return parseFloat(num.toFixed(2));
                        }
                        function addCorrectAnswerToSection(questionsection, correctAnswer) {
                            const resultspantag = document.createElement('span');
                            resultspantag.textContent = " correct answer: " + correctAnswer;
                            questionsection.appendChild(resultspantag);
                        }
                        
                        if (randomTypeOfExercise == "quiz"){
                            const randomObject = shuffled[Math.floor(Math.random() * shuffled.length)];
                            const questionText = randomObject.text[Math.floor(Math.random() * randomObject.text.length)];
                            addQuestionText(questionText, learnContent);
                            const alloptions = shuffleArray(randomObject.options);
                            currentChatMessageOptions = {
                                options: {
                                    "How do i give my answer ?": [
                                        `Click one of the options below the question`,
                                        `Click on one the ${alloptions.length} options, below the question`,
                                        `Click on one of the ${alloptions.length} options`,
                                        `Choose one of the ${alloptions.length} options, below the current question`
                                    ],
                                    "How do i skip ?": [
                                        `Click the skip button, in the top right corner. if you don't see the button there, you have reached your skip limit.`,
                                        `Click the skip botton. if you do not see the skip button, in the top right corner, then you have probably reached your skip limit.`,
                                        `If you can't see the skip button, you have probably reached your skip limit.`,
                                        `If you don't see the skip button, you probably reached the skip limit.`
                                    ],
                                    "How many questions are left ?": [
                                        `you got only ${maxprogress - progress} questions to go `,
                                        `you got ${maxprogress - progress} questions to go `,
                                        `there are ${maxprogress - progress} questions left`,
                                        `there are ${maxprogress - progress} more questions to go `,
                                        `there are ${maxprogress - progress} unanswered questions left`,
                                        `you are almost done. only ${maxprogress - progress} more questions to go `
                                    ],
                                    "How many questions have I answered ?": [
                                        `you have answered ${progress} questions`,
                                        `you answered ${progress} questions `
                                    ],
                                    "how many questions are there ?": [
                                        `${maxprogress} questions`,
                                        `there are ${maxprogress} questions`,
                                        `there are ${maxprogress} questions, in your current exercize`,
                                        `${maxprogress} questions, not too little and not too much`
                                    ]
                                }
                            }
                            alloptions.forEach((op, index) => {
                                const div1 = document.createElement('div');
                                const div2 = document.createElement('div');
                                const div3 = document.createElement('div');
                                div1.className = "optionBtn";
                                div2.className = "optionFill";
                                div1.id = "optionBtn" + index;
                                div2.id = "optionFill" + index;
                                if (isNaN(op.text) && op.text.trim() !== "") {
                                    addAudioButton(div1, op.text);
                                }
                                div1.onclick = (event) => {
                                    if (event.target && event.target.classList.contains('audio-button')) return;
                                    if (parseInt(op.percent) > 85) {
                                        div1.classList.add("green2");
                                    } else if (parseInt(op.percent) > 35) {
                                        div1.classList.add("orange2");
                                    } else {
                                        div1.classList.add("red2");
                                    }
                                    if (parseInt(op.percent) > 85) {
                                        div2.classList.add("green1");
                                    } else if (parseInt(op.percent) > 35) {
                                        div2.classList.add("orange1");
                                    } else {
                                        div2.classList.add("red1");
                                    }
                                    if (parseInt(op.percent) > 50) {
                                        points += Math.round(parseInt(op.percent) / 10);
                                    } else {
                                        points -= Math.round((100 - parseInt(op.percent)) / 20);
                                    }
                                    updatePoints();
                                    currentProgress += parseInt(op.percent);
                                    div2.style.width = op.percent + "%";
                                    div1.onclick = null;
                                    alloptions.forEach((el, index2) => {
                                        if (index != index2) {
                                            const op = document.getElementById("optionBtn" + index2);
                                            const opfill = document.getElementById("optionFill" + index2);
                                            const opText = document.getElementById("optionTitle" + index2);
                                            opfill.style.width = el.percent + "%";
                                            op.onclick = null;
                                            if (el.correct == true && op && opfill) {
                                                opfill.classList.add("green1");
                                                op.classList.add("green2");
                                            } else if (op && opfill) {
                                                opfill.classList.add("defaultFill");
                                                op.classList.add("defaultBg");
                                                //opText.textContent = el.result;
                                            }
                                        }
                                    });
                                    rindex++;
                                    progress = rindex;
                                    const percentage = (progress / maxprogress) * 100;
                                    progresses[currentProgressElement].style.width = `${percentage}%`;
                                    countDown(() => {
                                        addQuestionAuto(rindex);
                                    });
                                };
                                div3.className = "optionTitle";
                                div3.id = "optionTitle" + index;
                                div3.textContent = op.text;
                                //div2.textContent = op.percent;
                                //div1.textContent = "option" + index;
                                div1.appendChild(div2);
                                div1.appendChild(div3);
                                div1.style.pointerEvents = "none";
                                setTimeout(() => {
                                    learnContent.appendChild(div1);
                                    if (index == alloptions.length - 1) {
                                        skipBtn.style.display = skipdisplay;
                                        backBtn.style.display = quitdisplay;
                                        alloptions.forEach((el, index2) => {
                                            const op = document.getElementById("optionBtn" + index2);
                                            op.style.pointerEvents = "auto";
                                        });
                                    }
                                }, index * 100);
                            });
                        }
                        else if (randomTypeOfExercise == "clocktime") {
                            function randomHourNumGen() {
                                return Math.floor(Math.random() * 11);
                            }
                            function randomMinuteNumGen() {
                                return Math.floor(Math.random() * 59);
                            }
                            const firstNum = randomHourNumGen();
                            const secondNum = randomMinuteNumGen();
                            addQuestionText(`What is the time on the clock ?`, learnContent);
                            createAnalogClock(learnContent, firstNum, secondNum, 120);
                            
                            const correctAnswer = normalizeTimeString(`${firstNum}:${secondNum}`);
                            const multiopOrInput = Math.floor(Math.random() * 2);
                            if (multiopOrInput == 1) {
                                let alloptions1 = [
                                    {
                                        "text": `${correctAnswer}`,
                                        "result": "correct",
                                        "percent": "100",
                                        "correct": true
                                    }
                                ];
                                
                                const randomAmout = Math.floor(Math.random() * 5) + 3;
                                let allOps = [correctAnswer];
                                for (let i = 0; i < randomAmout; i ++) {
                                    let firstWrongNum = randomHourNumGen();
                                    let secondWrongNum = randomMinuteNumGen();
                                    let oneWrongAnswer = normalizeTimeString(`${firstWrongNum}:${secondWrongNum}`);
                                    let whileTries = 0;
                                    while (whileTries <= 20 && (allOps.includes(oneWrongAnswer))) {
                                        firstWrongNum = randomHourNumGen();
                                        secondWrongNum = randomMinuteNumGen();
                                        oneWrongAnswer = normalizeTimeString(`${firstWrongNum}:${secondWrongNum}`);
                                        whileTries++;
                                    }
                                    /*let difference = correctAnswer > oneWrongAnswer ?
                                        correctAnswer - oneWrongAnswer :
                                        oneWrongAnswer - correctAnswer;*/
                                    
                                    let percent = 100 - timeDifferencePercent(correctAnswer, oneWrongAnswer);
                                    if (!allOps.includes(oneWrongAnswer)) {
                                        allOps.push(oneWrongAnswer);
                                        alloptions1.push({
                                            "text": `${oneWrongAnswer}`,
                                            "result": `Incorrect`,
                                            "percent": Math.round(percent),
                                            "correct": false
                                        });
                                    }
                                }
                                const alloptions = shuffleArray(alloptions1);
                                currentChatMessageOptions = {
                                    options: {
                                        "What's the hour hand ?": [
                                            `The thicker and/or smaller hand, is the hour hand`,
                                            `The thicker and/or smaller hand`,
                                            `The hour hand, is the thicker and/or smaller hand`,
                                            `The thicker and smaller hand, is the hour hand `
                                        ],
                                        "What's the minute hand ?": [
                                            `The longer hand, is the minute hand`,
                                            `The longer hand`,
                                            `The minute hand, is the longer hand`,
                                            `The longer hand, is the minute hand `
                                        ],
                                        "How many questions are left ?": [
                                            `you got only ${maxprogress - progress} questions to go `,
                                            `you got ${maxprogress - progress} questions to go `,
                                            `there are ${maxprogress - progress} questions left`,
                                            `there are ${maxprogress - progress} more questions to go `,
                                            `there are ${maxprogress - progress} unanswered questions left`,
                                            `you are almost done. only ${maxprogress - progress} more questions to go `
                                        ],
                                        "How many questions have I answered ?": [
                                            `you have answered ${progress} questions`,
                                            `you answered ${progress} questions `
                                        ],
                                        "how many questions are there ?": [
                                            `${maxprogress} questions`,
                                            `there are ${maxprogress} questions`,
                                            `there are ${maxprogress} questions, in your current exercize`,
                                            `${maxprogress} questions, not too little and not too much`
                                        ],
                                        "How do i give my answer ?": [
                                            `Click one of the options below the question`,
                                            `Click on one the ${alloptions.length} options, below the question`,
                                            `Click on one of the ${alloptions.length} options`,
                                            `Choose one of the ${alloptions.length} options, below the current question`
                                        ],
                                        "How do i skip ?": [
                                            `Click the skip button, in the top right corner. if you don't see the button there, you have reached your skip limit.`,
                                            `Click the skip botton. if you do not see the skip button, in the top right corner, then you have probably reached your skip limit.`,
                                            `If you can't see the skip button, you have probably reached your skip limit.`,
                                            `If you don't see the skip button, you probably reached the skip limit.`
                                        ]
                                    }
                                }
                                alloptions.forEach((op, index) => {
                                    const div1 = document.createElement('div');
                                    const div2 = document.createElement('div');
                                    const div3 = document.createElement('div');
                                    div1.className = "optionBtn";
                                    div2.className = "optionFill";
                                    div1.id = "optionBtn" + index;
                                    div2.id = "optionFill" + index;
                                    div1.onclick = () => {
                                        if (parseInt(op.percent) > 95) {
                                            div1.classList.add("green2");
                                            div2.classList.add("green1");
                                        } else if (parseInt(op.percent) > 35) {
                                            div1.classList.add("orange2");
                                            div2.classList.add("orange1");
                                        } else {
                                            div1.classList.add("red2");
                                            div2.classList.add("red1");
                                        }
                                        currentProgress += parseInt(op.percent);
                                        if (parseInt(op.percent) > 50) {
                                            points += Math.round(parseInt(op.percent) / 10);
                                        } else {
                                            points -= Math.round((100 - parseInt(op.percent)) / 20);
                                        }
                                        updatePoints();
                                        div2.style.width = op.percent + "%";
                                        div1.onclick = null;
                                        alloptions.forEach((el, index2) => {
                                            if (index != index2) {
                                                const op = document.getElementById("optionBtn" + index2);
                                                const opfill = document.getElementById("optionFill" + index2);
                                                const opText = document.getElementById("optionTitle" + index2);
                                                opfill.style.width = el.percent + "%";
                                                op.onclick = null;
                                                if (el.correct == true && op && opfill) {
                                                    opfill.classList.add("green1");
                                                    op.classList.add("green2");
                                                } else if (op && opfill) {
                                                    opfill.classList.add("defaultFill");
                                                    op.classList.add("defaultBg");
                                                    //opText.textContent = el.result;
                                                }
                                            }
                                        });
                                        rindex++;
                                        progress = rindex;
                                        const percentage = (progress / maxprogress) * 100;
                                        progresses[currentProgressElement].style.width = `${percentage}%`;
                                        countDown(() => {
                                            addQuestionAuto(rindex);
                                        });
                                    };
                                    div3.className = "optionTitle";
                                    div3.id = "optionTitle" + index;
                                    div3.textContent = op.text;
                                    //div2.textContent = op.percent;
                                    //div1.textContent = "option" + index;
                                    div1.appendChild(div2);
                                    div1.appendChild(div3);
                                    div1.style.pointerEvents = "none";
                                    setTimeout(() => {
                                        learnContent.appendChild(div1);
                                        if (index == alloptions.length - 1) {
                                            skipBtn.style.display = skipdisplay;
                                            backBtn.style.display = quitdisplay;
                                            alloptions.forEach((el, index2) => {
                                                const op = document.getElementById("optionBtn" + index2);
                                                op.style.pointerEvents = "auto";
                                            });
                                        }
                                    }, index * 100);
                                });
                            } else {
                                currentChatMessageOptions = {
                                    options: {
                                        "What's the hour hand ?": [
                                            `The thicker and/or smaller hand, is the hour hand`,
                                            `The thicker and/or smaller hand`,
                                            `The hour hand, is the thicker and/or smaller hand`,
                                            `The thicker and smaller hand, is the hour hand `
                                        ],
                                        "What's the minute hand ?": [
                                            `The longer hand, is the minute hand`,
                                            `The longer hand`,
                                            `The minute hand, is the longer hand`,
                                            `The longer hand, is the minute hand `
                                        ],
                                        "How many questions are left ?": [
                                            `you got only ${maxprogress - progress} questions to go `,
                                            `you got ${maxprogress - progress} questions to go `,
                                            `there are ${maxprogress - progress} questions left`,
                                            `there are ${maxprogress - progress} more questions to go `,
                                            `there are ${maxprogress - progress} unanswered questions left`,
                                            `you are almost done. only ${maxprogress - progress} more questions to go `
                                        ],
                                        "How many questions have I answered ?": [
                                            `you have answered ${progress} questions`,
                                            `you answered ${progress} questions `
                                        ],
                                        "how many questions are there ?": [
                                            `${maxprogress} questions`,
                                            `there are ${maxprogress} questions`,
                                            `there are ${maxprogress} questions, in your current exercize`,
                                            `${maxprogress} questions, not too little and not too much`
                                        ],
                                        "How do i give my answer ?": [
                                            `Enter the hour, before the ':', like this: 00:, and then the mintes after the ':', like this: 00:00 and then click the "Enter" button, on your keyboard. Your result should be structured like this: hour:minute`,
                                            `Type out the hour, displayed on the clock, before the ':' and the minute, displayed on the clock, after the ':'. Your answer should be structured like this: hour:minute`,
                                            `Enter your answer into the input field, below the clock. structure your answer like this: hour:minute`,
                                            `Type out your answer into the input field, below the clock. structure your answer like this: hour:minute`
                                        ],
                                        "How do i skip ?": [
                                            `Click the skip button, in the top right corner. if you don't see the button there, you have reached your skip limit.`,
                                            `Click the skip botton. if you do not see the skip button, in the top right corner, then you have probably reached your skip limit.`,
                                            `If you can't see the skip button, you have probably reached your skip limit.`,
                                            `If you don't see the skip button, you probably reached the skip limit.`
                                        ]
                                    }
                                }
                                const inputEl = document.createElement("input");
                                inputEl.type = "text";
                                inputEl.className = "LearnInputField";
                                inputEl.placeholder = "00:00";
                                inputEl.style.width = "120px";
                                inputEl.style.textAlign = "center";
                                inputEl.style.marginTop = "20px";
                                inputEl.maxLength = "5";
                                function userAnswerSubmit() {
                                    const inputValue = normalizeTimeString(inputEl.value);
                                    
                                    
                                    const percent = 100 - timeDifferencePercent(correctAnswer, inputValue);
                                    
                                    if (percent != 100) {
                                        addCorrectAnswerToSection(learnContent, correctAnswer);
                                    } else if (percent == 100) {
                                        confirmCorrectAnswer(learnContent, correctAnswer);
                                    }
                                    if (percent > 95) {
                                        inputEl.classList.add("green2");
                                    } else if (percent > 35) {
                                        inputEl.classList.add("orange1");
                                    } else {
                                        inputEl.classList.add("red1");
                                    }
                                    if (percent > 50) {
                                        points += Math.round(percent / 10);
                                    } else {
                                        points -= Math.round((100 - percent) / 20);
                                    }
                                    currentProgress += Math.round(percent);
                                    updatePoints();
                                    rindex++;
                                    progress = rindex;
                                    const percentage = (progress / maxprogress) * 100;
                                    progresses[currentProgressElement].style.width = `${percentage}%`;
                                    countDown(() => {
                                        addQuestionAuto(rindex);
                                    });
                                }
                                inputEl.onkeydown = (event) => {
                                    if (event.key == "Enter") {
                                        inputEl.disabled = true;
                                        inputEl.onkeydown = null;
                                        userAnswerSubmit();
                                    }
                                };
                                learnContent.appendChild(inputEl);
                                skipBtn.style.display = skipdisplay;
                            }
                        }
                        else if (randomTypeOfExercise == "clockhour") {
                            function randomHourNumGen() {
                                return Math.floor(Math.random() * 11);
                            }
                            function randomMinuteNumGen() {
                                return Math.floor(Math.random() * 59);
                            }
                            const firstNum = randomHourNumGen();
                            const secondNum = randomMinuteNumGen();
                            addQuestionText(`What is the hour on the clock ?`, learnContent);
                            createAnalogClock(learnContent, firstNum, secondNum, 120);
                            
                            const correctAnswer = normalizeTimeString(`${firstNum}:00`);
                            
                            const multiopOrInput = Math.floor(Math.random() * 2);
                            if (multiopOrInput == 1) {
                                let alloptions1 = [
                                    {
                                        "text": `${correctAnswer}`,
                                        "result": "correct",
                                        "percent": "100",
                                        "correct": true
                                    }
                                ];
                                
                                const randomAmout = Math.floor(Math.random() * 5) + 3;
                                let allOps = [correctAnswer];
                                for (let i = 0; i < randomAmout; i ++) {
                                    let firstWrongNum = randomHourNumGen();
                                    let oneWrongAnswer = normalizeTimeString(`${firstWrongNum}:00`);
                                    let whileTries = 0;
                                    while (whileTries <= 20 && (allOps.includes(oneWrongAnswer))) {
                                        firstWrongNum = randomHourNumGen();
                                        oneWrongAnswer = normalizeTimeString(`${firstWrongNum}:00`);
                                        whileTries++;
                                    }
                                    /*let difference = correctAnswer > oneWrongAnswer ?
                                        correctAnswer - oneWrongAnswer :
                                        oneWrongAnswer - correctAnswer;*/
                                    
                                    let percent = 100 - timeDifferencePercent(correctAnswer, oneWrongAnswer);
                                    if (!allOps.includes(oneWrongAnswer)) {
                                        allOps.push(oneWrongAnswer);
                                        alloptions1.push({
                                            "text": `${oneWrongAnswer}`,
                                            "result": `Incorrect`,
                                            "percent": Math.round(percent),
                                            "correct": false
                                        });
                                    }
                                }
                                const alloptions = shuffleArray(alloptions1);
                                currentChatMessageOptions = {
                                    options: {
                                        "What's the hour hand ?": [
                                            `The thicker and/or smaller hand, is the hour hand`,
                                            `The thicker and/or smaller hand`,
                                            `The hour hand, is the thicker and/or smaller hand`,
                                            `The thicker and smaller hand, is the hour hand `
                                        ],
                                        "How many questions are left ?": [
                                            `you got only ${maxprogress - progress} questions to go `,
                                            `you got ${maxprogress - progress} questions to go `,
                                            `there are ${maxprogress - progress} questions left`,
                                            `there are ${maxprogress - progress} more questions to go `,
                                            `there are ${maxprogress - progress} unanswered questions left`,
                                            `you are almost done. only ${maxprogress - progress} more questions to go `
                                        ],
                                        "How many questions have I answered ?": [
                                            `you have answered ${progress} questions`,
                                            `you answered ${progress} questions `
                                        ],
                                        "how many questions are there ?": [
                                            `${maxprogress} questions`,
                                            `there are ${maxprogress} questions`,
                                            `there are ${maxprogress} questions, in your current exercize`,
                                            `${maxprogress} questions, not too little and not too much`
                                        ],
                                        "How do i give my answer ?": [
                                            `Click one of the options below the question`,
                                            `Click on one the ${alloptions.length} options, below the question`,
                                            `Click on one of the ${alloptions.length} options`,
                                            `Choose one of the ${alloptions.length} options, below the current question`
                                        ],
                                        "How do i skip ?": [
                                            `Click the skip button, in the top right corner. if you don't see the button there, you have reached your skip limit.`,
                                            `Click the skip botton. if you do not see the skip button, in the top right corner, then you have probably reached your skip limit.`,
                                            `If you can't see the skip button, you have probably reached your skip limit.`,
                                            `If you don't see the skip button, you probably reached the skip limit.`
                                        ]
                                    }
                                }
                                alloptions.forEach((op, index) => {
                                    const div1 = document.createElement('div');
                                    const div2 = document.createElement('div');
                                    const div3 = document.createElement('div');
                                    div1.className = "optionBtn";
                                    div2.className = "optionFill";
                                    div1.id = "optionBtn" + index;
                                    div2.id = "optionFill" + index;
                                    div1.onclick = () => {
                                        if (parseInt(op.percent) > 95) {
                                            div1.classList.add("green2");
                                            div2.classList.add("green1");
                                        } else if (parseInt(op.percent) > 35) {
                                            div1.classList.add("orange2");
                                            div2.classList.add("orange1");
                                        } else {
                                            div1.classList.add("red2");
                                            div2.classList.add("red1");
                                        }
                                        currentProgress += parseInt(op.percent);
                                        if (parseInt(op.percent) > 50) {
                                            points += Math.round(parseInt(op.percent) / 10);
                                        } else {
                                            points -= Math.round((100 - parseInt(op.percent)) / 20);
                                        }
                                        updatePoints();
                                        div2.style.width = op.percent + "%";
                                        div1.onclick = null;
                                        alloptions.forEach((el, index2) => {
                                            if (index != index2) {
                                                const op = document.getElementById("optionBtn" + index2);
                                                const opfill = document.getElementById("optionFill" + index2);
                                                const opText = document.getElementById("optionTitle" + index2);
                                                opfill.style.width = el.percent + "%";
                                                op.onclick = null;
                                                if (el.correct == true && op && opfill) {
                                                    opfill.classList.add("green1");
                                                    op.classList.add("green2");
                                                } else if (op && opfill) {
                                                    opfill.classList.add("defaultFill");
                                                    op.classList.add("defaultBg");
                                                    //opText.textContent = el.result;
                                                }
                                            }
                                        });
                                        rindex++;
                                        progress = rindex;
                                        const percentage = (progress / maxprogress) * 100;
                                        progresses[currentProgressElement].style.width = `${percentage}%`;
                                        countDown(() => {
                                            addQuestionAuto(rindex);
                                        });
                                    };
                                    div3.className = "optionTitle";
                                    div3.id = "optionTitle" + index;
                                    div3.textContent = op.text;
                                    //div2.textContent = op.percent;
                                    //div1.textContent = "option" + index;
                                    div1.appendChild(div2);
                                    div1.appendChild(div3);
                                    div1.style.pointerEvents = "none";
                                    setTimeout(() => {
                                        learnContent.appendChild(div1);
                                        if (index == alloptions.length - 1) {
                                            skipBtn.style.display = skipdisplay;
                                            backBtn.style.display = quitdisplay;
                                            alloptions.forEach((el, index2) => {
                                                const op = document.getElementById("optionBtn" + index2);
                                                op.style.pointerEvents = "auto";
                                            });
                                        }
                                    }, index * 100);
                                });
                            } else {
                                currentChatMessageOptions = {
                                    options: {
                                        "What's the hour hand ?": [
                                            `The thicker and/or smaller hand, is the hour hand`,
                                            `The thicker and/or smaller hand`,
                                            `The hour hand, is the thicker and/or smaller hand`,
                                            `The thicker and smaller hand, is the hour hand `
                                        ],
                                        "How many questions are left ?": [
                                            `you got only ${maxprogress - progress} questions to go `,
                                            `you got ${maxprogress - progress} questions to go `,
                                            `there are ${maxprogress - progress} questions left`,
                                            `there are ${maxprogress - progress} more questions to go `,
                                            `there are ${maxprogress - progress} unanswered questions left`,
                                            `you are almost done. only ${maxprogress - progress} more questions to go `
                                        ],
                                        "How many questions have I answered ?": [
                                            `you have answered ${progress} questions`,
                                            `you answered ${progress} questions `
                                        ],
                                        "how many questions are there ?": [
                                            `${maxprogress} questions`,
                                            `there are ${maxprogress} questions`,
                                            `there are ${maxprogress} questions, in your current exercize`,
                                            `${maxprogress} questions, not too little and not too much`
                                        ],
                                        "How do i give my answer ?": [
                                            `Enter the hour, before the ':', like this: 00:, and then click the "Enter" button, on your keyboard. Example: 12:00 or 12:`,
                                            `Type out the hour, displayed on the clock, before the ':'. Your answer should be structured like this: hour:00. An example: 11:00`,
                                            `Enter your answer into the input field, below the clock. structure your answer like this: hour:00. Example: 11:00`,
                                            `Type out your answer into the input field, below the clock. structure your answer like this: hour:00. Example: 11:00`
                                        ],
                                        "How do i skip ?": [
                                            `Click the skip button, in the top right corner. if you don't see the button there, you have reached your skip limit.`,
                                            `Click the skip botton. if you do not see the skip button, in the top right corner, then you have probably reached your skip limit.`,
                                            `If you can't see the skip button, you have probably reached your skip limit.`,
                                            `If you don't see the skip button, you probably reached the skip limit.`
                                        ]
                                    }
                                }
                                const inputEl = document.createElement("input");
                                inputEl.type = "text";
                                inputEl.className = "LearnInputField";
                                inputEl.placeholder = "00:";
                                inputEl.style.width = "120px";
                                inputEl.style.textAlign = "center";
                                inputEl.style.marginTop = "20px";
                                inputEl.maxLength = "5";
                                function userAnswerSubmit() {
                                    if (!inputEl.value.includes(':')) {
                                        inputEl.value = inputEl.value + ":";
                                    }
                                    const inputValue = normalizeTimeString(inputEl.value);
                                    
                                    const percent = 100 - timeDifferencePercent(correctAnswer, inputValue);
                                    
                                    if (percent != 100) {
                                        addCorrectAnswerToSection(learnContent, correctAnswer);
                                    } else if (percent == 100) {
                                        confirmCorrectAnswer(learnContent, correctAnswer);
                                    }
                                    if (percent > 95) {
                                        inputEl.classList.add("green2");
                                    } else if (percent > 35) {
                                        inputEl.classList.add("orange1");
                                    } else {
                                        inputEl.classList.add("red1");
                                    }
                                    if (percent > 50) {
                                        points += Math.round(percent / 10);
                                    } else {
                                        points -= Math.round((100 - percent) / 20);
                                    }
                                    currentProgress += Math.round(percent);
                                    updatePoints();
                                    rindex++;
                                    progress = rindex;
                                    const percentage = (progress / maxprogress) * 100;
                                    progresses[currentProgressElement].style.width = `${percentage}%`;
                                    countDown(() => {
                                        addQuestionAuto(rindex);
                                    });
                                }
                                inputEl.onkeydown = (event) => {
                                    if (event.key == "Enter") {
                                        inputEl.disabled = true;
                                        inputEl.onkeydown = null;
                                        userAnswerSubmit();
                                    }
                                };
                                learnContent.appendChild(inputEl);
                                skipBtn.style.display = skipdisplay;
                            }
                        }
                        else if (randomTypeOfExercise == "clockminute") {
                            function randomHourNumGen() {
                                return Math.floor(Math.random() * 11);
                            }
                            function randomMinuteNumGen() {
                                return Math.floor(Math.random() * 59);
                            }
                            const firstNum = randomHourNumGen();
                            const secondNum = randomMinuteNumGen();
                            addQuestionText(`What is the minute on the clock ?`, learnContent);
                            createAnalogClock(learnContent, firstNum, secondNum, 120);
                            
                            const correctAnswer = normalizeTimeString(`00:${secondNum}`);
                            
                            const multiopOrInput = Math.floor(Math.random() * 2);
                            if (multiopOrInput == 1) {
                                let alloptions1 = [
                                    {
                                        "text": `${correctAnswer}`,
                                        "result": "correct",
                                        "percent": "100",
                                        "correct": true
                                    }
                                ];
                                
                                const randomAmout = Math.floor(Math.random() * 5) + 3;
                                let allOps = [correctAnswer];
                                for (let i = 0; i < randomAmout; i ++) {
                                    let secondWrongNum = randomMinuteNumGen();
                                    let oneWrongAnswer = normalizeTimeString(`00:${secondWrongNum}`);
                                    let whileTries = 0;
                                    while (whileTries <= 20 && allOps.includes(oneWrongAnswer)) {
                                        secondWrongNum = randomMinuteNumGen();
                                        oneWrongAnswer = normalizeTimeString(`00:${secondWrongNum}`);
                                        whileTries++;
                                    }
                                    /*let difference = correctAnswer > oneWrongAnswer ?
                                        correctAnswer - oneWrongAnswer :
                                        oneWrongAnswer - correctAnswer;*/
                                    
                                    let percent = 100 - minuteDifferencePercent(correctAnswer, oneWrongAnswer);
                                    if (!allOps.includes(oneWrongAnswer)) {
                                        allOps.push(oneWrongAnswer);
                                        alloptions1.push({
                                            "text": `${oneWrongAnswer}`,
                                            "result": `Incorrect`,
                                            "percent": Math.round(percent),
                                            "correct": false
                                        });
                                    }
                                }
                                const alloptions = shuffleArray(alloptions1);
                                currentChatMessageOptions = {
                                    options: {
                                        "What's the minute hand ?": [
                                            `The longer hand, is the minute hand`,
                                            `The longer hand`,
                                            `The minute hand, is the longer hand`,
                                            `The longer hand, is the minute hand `
                                        ],
                                        "How many questions are left ?": [
                                            `you got only ${maxprogress - progress} questions to go `,
                                            `you got ${maxprogress - progress} questions to go `,
                                            `there are ${maxprogress - progress} questions left`,
                                            `there are ${maxprogress - progress} more questions to go `,
                                            `there are ${maxprogress - progress} unanswered questions left`,
                                            `you are almost done. only ${maxprogress - progress} more questions to go `
                                        ],
                                        "How many questions have I answered ?": [
                                            `you have answered ${progress} questions`,
                                            `you answered ${progress} questions `
                                        ],
                                        "how many questions are there ?": [
                                            `${maxprogress} questions`,
                                            `there are ${maxprogress} questions`,
                                            `there are ${maxprogress} questions, in your current exercize`,
                                            `${maxprogress} questions, not too little and not too much`
                                        ],
                                        "How do i give my answer ?": [
                                            `Click one of the options below the question`,
                                            `Click on one the ${alloptions.length} options, below the question`,
                                            `Click on one of the ${alloptions.length} options`,
                                            `Choose one of the ${alloptions.length} options, below the current question`
                                        ],
                                        "How do i skip ?": [
                                            `Click the skip button, in the top right corner. if you don't see the button there, you have reached your skip limit.`,
                                            `Click the skip botton. if you do not see the skip button, in the top right corner, then you have probably reached your skip limit.`,
                                            `If you can't see the skip button, you have probably reached your skip limit.`,
                                            `If you don't see the skip button, you probably reached the skip limit.`
                                        ]
                                    }
                                }
                                alloptions.forEach((op, index) => {
                                    const div1 = document.createElement('div');
                                    const div2 = document.createElement('div');
                                    const div3 = document.createElement('div');
                                    div1.className = "optionBtn";
                                    div2.className = "optionFill";
                                    div1.id = "optionBtn" + index;
                                    div2.id = "optionFill" + index;
                                    div1.onclick = () => {
                                        if (parseInt(op.percent) > 95) {
                                            div1.classList.add("green2");
                                            div2.classList.add("green1");
                                        } else if (parseInt(op.percent) > 35) {
                                            div1.classList.add("orange2");
                                            div2.classList.add("orange1");
                                        } else {
                                            div1.classList.add("red2");
                                            div2.classList.add("red1");
                                        }
                                        currentProgress += parseInt(op.percent);
                                        if (parseInt(op.percent) > 50) {
                                            points += Math.round(parseInt(op.percent) / 10);
                                        } else {
                                            points -= Math.round((100 - parseInt(op.percent)) / 20);
                                        }
                                        updatePoints();
                                        div2.style.width = op.percent + "%";
                                        div1.onclick = null;
                                        alloptions.forEach((el, index2) => {
                                            if (index != index2) {
                                                const op = document.getElementById("optionBtn" + index2);
                                                const opfill = document.getElementById("optionFill" + index2);
                                                const opText = document.getElementById("optionTitle" + index2);
                                                opfill.style.width = el.percent + "%";
                                                op.onclick = null;
                                                if (el.correct == true && op && opfill) {
                                                    opfill.classList.add("green1");
                                                    op.classList.add("green2");
                                                } else if (op && opfill) {
                                                    opfill.classList.add("defaultFill");
                                                    op.classList.add("defaultBg");
                                                    //opText.textContent = el.result;
                                                }
                                            }
                                        });
                                        rindex++;
                                        progress = rindex;
                                        const percentage = (progress / maxprogress) * 100;
                                        progresses[currentProgressElement].style.width = `${percentage}%`;
                                        countDown(() => {
                                            addQuestionAuto(rindex);
                                        });
                                    };
                                    div3.className = "optionTitle";
                                    div3.id = "optionTitle" + index;
                                    div3.textContent = op.text;
                                    //div2.textContent = op.percent;
                                    //div1.textContent = "option" + index;
                                    div1.appendChild(div2);
                                    div1.appendChild(div3);
                                    div1.style.pointerEvents = "none";
                                    setTimeout(() => {
                                        learnContent.appendChild(div1);
                                        if (index == alloptions.length - 1) {
                                            skipBtn.style.display = skipdisplay;
                                            backBtn.style.display = quitdisplay;
                                            alloptions.forEach((el, index2) => {
                                                const op = document.getElementById("optionBtn" + index2);
                                                op.style.pointerEvents = "auto";
                                            });
                                        }
                                    }, index * 100);
                                });
                            } else {
                                currentChatMessageOptions = {
                                    options: {
                                        "What's the minute hand ?": [
                                            `The longer hand, is the minute hand`,
                                            `The longer hand`,
                                            `The minute hand, is the longer hand`,
                                            `The longer hand, is the minute hand `
                                        ],
                                        "How many questions are left ?": [
                                            `you got only ${maxprogress - progress} questions to go `,
                                            `you got ${maxprogress - progress} questions to go `,
                                            `there are ${maxprogress - progress} questions left`,
                                            `there are ${maxprogress - progress} more questions to go `,
                                            `there are ${maxprogress - progress} unanswered questions left`,
                                            `you are almost done. only ${maxprogress - progress} more questions to go `
                                        ],
                                        "How many questions have I answered ?": [
                                            `you have answered ${progress} questions`,
                                            `you answered ${progress} questions `
                                        ],
                                        "how many questions are there ?": [
                                            `${maxprogress} questions`,
                                            `there are ${maxprogress} questions`,
                                            `there are ${maxprogress} questions, in your current exercize`,
                                            `${maxprogress} questions, not too little and not too much`
                                        ],
                                        "How do i give my answer ?": [
                                            `Enter the minute, after the ':', like this: :00, and then click the "Enter" button, on your keyboard. Example: 00:32 or :32`,
                                            `Type out the minute, displayed on the clock, after the ':'. Your answer should be structured like this: 00:minute. An example: 00:45`,
                                            `Enter your answer into the input field, below the clock. structure your answer like this: 00:minute. Example: 00:32`,
                                            `Type out your answer into the input field, below the clock. structure your answer like this: 00:minute. Example: 00:49`
                                        ],
                                        "How do i skip ?": [
                                            `Click the skip button, in the top right corner. if you don't see the button there, you have reached your skip limit.`,
                                            `Click the skip botton. if you do not see the skip button, in the top right corner, then you have probably reached your skip limit.`,
                                            `If you can't see the skip button, you have probably reached your skip limit.`,
                                            `If you don't see the skip button, you probably reached the skip limit.`
                                        ]
                                    }
                                }
                                const inputEl = document.createElement("input");
                                inputEl.type = "text";
                                inputEl.className = "LearnInputField";
                                inputEl.placeholder = ":00";
                                inputEl.style.width = "120px";
                                inputEl.style.textAlign = "center";
                                inputEl.style.marginTop = "20px";
                                inputEl.maxLength = "5";
                                function userAnswerSubmit() {
                                    if (!inputEl.value.includes(':')) {
                                        inputEl.value = ":" + inputEl.value;
                                    }
                                    const inputValue = normalizeTimeString(inputEl.value);
                                    
                                    const percent = 100 - minuteDifferencePercent(correctAnswer, inputValue);
                                    
                                    if (percent != 100) {
                                        addCorrectAnswerToSection(learnContent, correctAnswer);
                                    } else if (percent == 100) {
                                        confirmCorrectAnswer(learnContent, correctAnswer);
                                    }
                                    if (percent > 95) {
                                        inputEl.classList.add("green2");
                                    } else if (percent > 35) {
                                        inputEl.classList.add("orange1");
                                    } else {
                                        inputEl.classList.add("red1");
                                    }
                                    if (percent > 50) {
                                        points += Math.round(percent / 10);
                                    } else {
                                        points -= Math.round((100 - percent) / 20);
                                    }
                                    currentProgress += Math.round(percent);
                                    updatePoints();
                                    rindex++;
                                    progress = rindex;
                                    const percentage = (progress / maxprogress) * 100;
                                    progresses[currentProgressElement].style.width = `${percentage}%`;
                                    countDown(() => {
                                        addQuestionAuto(rindex);
                                    });
                                }
                                inputEl.onkeydown = (event) => {
                                    if (event.key == "Enter") {
                                        inputEl.disabled = true;
                                        inputEl.onkeydown = null;
                                        userAnswerSubmit();
                                    }
                                };
                                learnContent.appendChild(inputEl);
                                skipBtn.style.display = skipdisplay;
                            }
                        }
                        else if (randomTypeOfExercise == "hoursinminutes") {
                            function randomNumbeGen() {
                                if (level == "easy") {
                                    return Math.floor(Math.random() * 200);
                                } else if (level == "medium") {
                                    return Math.floor(Math.random() * 900);
                                }
                                return Math.floor(Math.random() * 1439);
                            }
                            const firstNum = randomNumbeGen();
                            addQuestionText(`How many hours are in ${firstNum} minutes ?`, learnContent);
                            
                            const correctAnswer = Math.floor(firstNum / 60);
                            
                            const multiopOrInput = Math.floor(Math.random() * 2);
                            if (multiopOrInput == 1) {
                                let alloptions1 = [
                                {
                                    "text": `${correctAnswer}`,
                                    "result": "correct",
                                    "percent": "100",
                                    "correct": true
                                }];
                                
                                const randomAmout = Math.floor(Math.random() * 5) + 3;
                                let allOps = [correctAnswer];
                                for (let i = 0; i < randomAmout; i++) {
                                    let firstWrongNum = randomNumbeGen();
                                    let whileTries = 0;
                                    while (whileTries <= 20 && (allOps.includes(firstWrongNum) || !Number.isFinite(Math.floor(firstWrongNum / 60)))) {
                                        firstWrongNum = randomNumbeGen();
                                        whileTries++;
                                    }
                                    const oneWrongAnswer = Math.floor(firstWrongNum / 60);
                                    /*let difference = correctAnswer > oneWrongAnswer ?
                                        correctAnswer - oneWrongAnswer :
                                        oneWrongAnswer - correctAnswer;*/
                                    let difference = Math.abs(correctAnswer - oneWrongAnswer);
                                    let scale = Math.abs(correctAnswer) > 0 ? Math.abs(correctAnswer) : 1;
                                    
                                    let percent = 100 - (difference / scale * 100);
                                    percent = Math.max(0, Math.min(100, percent));
                                    if (!allOps.includes(oneWrongAnswer)) {
                                        allOps.push(oneWrongAnswer);
                                        alloptions1.push({
                                            "text": `${oneWrongAnswer}`,
                                            "result": `Incorrect`,
                                            "percent": percent,
                                            "correct": false
                                        });
                                    }
                                }
                                const alloptions = shuffleArray(alloptions1);
                                currentChatMessageOptions = {
                                    options: {
                                        "How many questions are left ?": [
                                            `you got only ${maxprogress - progress} questions to go `,
                                            `you got ${maxprogress - progress} questions to go `,
                                            `there are ${maxprogress - progress} questions left`,
                                            `there are ${maxprogress - progress} more questions to go `,
                                            `there are ${maxprogress - progress} unanswered questions left`,
                                            `you are almost done. only ${maxprogress - progress} more questions to go `
                                        ],
                                        "How many questions have I answered ?": [
                                            `you have answered ${progress} questions`,
                                            `you answered ${progress} questions `
                                        ],
                                        "how many questions are there ?": [
                                            `${maxprogress} questions`,
                                            `there are ${maxprogress} questions`,
                                            `there are ${maxprogress} questions, in your current exercize`,
                                            `${maxprogress} questions, not too little and not too much`
                                        ],
                                        "How do i give my answer ?": [
                                            `Click one of the options below the question`,
                                            `Click on one the ${alloptions.length} options, below the question`,
                                            `Click on one of the ${alloptions.length} options`,
                                            `Choose one of the ${alloptions.length} options, below the current question`
                                        ],
                                        "How do i skip ?": [
                                            `Click the skip button, in the top right corner. if you don't see the button there, you have reached your skip limit.`,
                                            `Click the skip botton. if you do not see the skip button, in the top right corner, then you have probably reached your skip limit.`,
                                            `If you can't see the skip button, you have probably reached your skip limit.`,
                                            `If you don't see the skip button, you probably reached the skip limit.`
                                        ]
                                    }
                                }
                                alloptions.forEach((op, index) => {
                                    const div1 = document.createElement('div');
                                    const div2 = document.createElement('div');
                                    const div3 = document.createElement('div');
                                    div1.className = "optionBtn";
                                    div2.className = "optionFill";
                                    div1.id = "optionBtn" + index;
                                    div2.id = "optionFill" + index;
                                    div1.onclick = () => {
                                        if (parseInt(op.percent) > 95) {
                                            div1.classList.add("green2");
                                            div2.classList.add("green1");
                                        } else if (parseInt(op.percent) > 35) {
                                            div1.classList.add("orange2");
                                            div2.classList.add("orange1");
                                        } else {
                                            div1.classList.add("red2");
                                            div2.classList.add("red1");
                                        }
                                        currentProgress += parseInt(op.percent);
                                        if (parseInt(op.percent) > 50) {
                                            points += Math.round(parseInt(op.percent) / 10);
                                        } else {
                                            points -= Math.round((100 - parseInt(op.percent)) / 20);
                                        }
                                        updatePoints();
                                        div2.style.width = op.percent + "%";
                                        div1.onclick = null;
                                        alloptions.forEach((el, index2) => {
                                            if (index != index2) {
                                                const op = document.getElementById("optionBtn" + index2);
                                                const opfill = document.getElementById("optionFill" + index2);
                                                const opText = document.getElementById("optionTitle" + index2);
                                                opfill.style.width = el.percent + "%";
                                                op.onclick = null;
                                                if (el.correct == true && op && opfill) {
                                                    opfill.classList.add("green1");
                                                    op.classList.add("green2");
                                                } else if (op && opfill) {
                                                    opfill.classList.add("defaultFill");
                                                    op.classList.add("defaultBg");
                                                    //opText.textContent = el.result;
                                                }
                                            }
                                        });
                                        rindex++;
                                        progress = rindex;
                                        const percentage = (progress / maxprogress) * 100;
                                        progresses[currentProgressElement].style.width = `${percentage}%`;
                                        countDown(() => {
                                            addQuestionAuto(rindex);
                                        });
                                    };
                                    div3.className = "optionTitle";
                                    div3.id = "optionTitle" + index;
                                    div3.textContent = op.text;
                                    //div2.textContent = op.percent;
                                    //div1.textContent = "option" + index;
                                    div1.appendChild(div2);
                                    div1.appendChild(div3);
                                    div1.style.pointerEvents = "none";
                                    setTimeout(() => {
                                        learnContent.appendChild(div1);
                                        if (index == alloptions.length - 1) {
                                            skipBtn.style.display = skipdisplay;
                                            backBtn.style.display = quitdisplay;
                                            alloptions.forEach((el, index2) => {
                                                const op = document.getElementById("optionBtn" + index2);
                                                op.style.pointerEvents = "auto";
                                            });
                                        }
                                    }, index * 100);
                                });
                            } else {
                                currentChatMessageOptions = {
                                    options: {
                                        "How many questions are left ?": [
                                            `you got only ${maxprogress - progress} questions to go `,
                                            `you got ${maxprogress - progress} questions to go `,
                                            `there are ${maxprogress - progress} questions left`,
                                            `there are ${maxprogress - progress} more questions to go `,
                                            `there are ${maxprogress - progress} unanswered questions left`,
                                            `you are almost done. only ${maxprogress - progress} more questions to go `
                                        ],
                                        "How many questions have I answered ?": [
                                            `you have answered ${progress} questions`,
                                            `you answered ${progress} questions `
                                        ],
                                        "how many questions are there ?": [
                                            `${maxprogress} questions`,
                                            `there are ${maxprogress} questions`,
                                            `there are ${maxprogress} questions, in your current exercize`,
                                            `${maxprogress} questions, not too little and not too much`
                                        ],
                                        "How do i give my answer ?": [
                                            `Enter your answer in the input field, below the current question`,
                                            `Type out your answer in the input field, below the current question`,
                                            `Enter your answer in the input field, below the question`,
                                            `Type out your answer in the input field, below the question`
                                        ],
                                        "How do i skip ?": [
                                            `Click the skip button, in the top right corner. if you don't see the button there, you have reached your skip limit.`,
                                            `Click the skip botton. if you do not see the skip button, in the top right corner, then you have probably reached your skip limit.`,
                                            `If you can't see the skip button, you have probably reached your skip limit.`,
                                            `If you don't see the skip button, you probably reached the skip limit.`
                                        ]
                                    }
                                }
                                const inputEl = document.createElement("input");
                                inputEl.type = "text";
                                inputEl.className = "LearnInputField";
                                inputEl.placeholder = "Enter a number...";
                                
                                function userAnswerSubmit() {
                                    const inputValue = parseInt(inputEl.value);
                                    
                                    if (isNaN(inputValue)) {
                                        inputEl.classList.add("red1");
                                        points -= 5;
                                        addCorrectAnswerToSection(learnContent, correctAnswer);
                                    } else if (inputValue == correctAnswer) {
                                        inputEl.classList.add("green2");
                                        points += 10;
                                        currentProgress += 100;
                                        confirmCorrectAnswer(learnContent, correctAnswer);
                                    } else if (inputValue < correctAnswer + 4 && inputValue > correctAnswer - 4) {
                                        inputEl.classList.add("orange1");
                                        points += 5;
                                        currentProgress += 50;
                                        addCorrectAnswerToSection(learnContent, correctAnswer);
                                    } else {
                                        inputEl.classList.add("red1");
                                        points -= 5;
                                        addCorrectAnswerToSection(learnContent, correctAnswer);
                                    }
                                    updatePoints();
                                    rindex++;
                                    progress = rindex;
                                    const percentage = (progress / maxprogress) * 100;
                                    progresses[currentProgressElement].style.width = `${percentage}%`;
                                    countDown(() => {
                                        addQuestionAuto(rindex);
                                    });
                                }
                                inputEl.onkeydown = (event) => {
                                    if (event.key == "Enter") {
                                        inputEl.disabled = true;
                                        inputEl.onkeydown = null;
                                        userAnswerSubmit();
                                    }
                                };
                                learnContent.appendChild(inputEl);
                                skipBtn.style.display = skipdisplay;
                            }
                        }
                        else if (randomTypeOfExercise == "minutesinhours") {
                            function randomNumbeGen() {
                                if (level == "easy") {
                                    return Math.floor(Math.random() * 10);
                                } else if (level == "medium") {
                                    return Math.floor(Math.random() * 24);
                                }
                                return Math.floor(Math.random() * 50);
                            }
                            const firstNum = randomNumbeGen();
                            if (firstNum != 1) {
                                addQuestionText(`How many minutes are in ${firstNum} hours ?`, learnContent);
                            } else {
                                addQuestionText(`How many minutes are in ${firstNum} hour ?`, learnContent);
                            }
                            
                            const correctAnswer = Math.floor(firstNum * 60);
                            
                            const multiopOrInput = Math.floor(Math.random() * 2);
                            if (multiopOrInput == 1) {
                                let alloptions1 = [
                                {
                                    "text": `${correctAnswer}`,
                                    "result": "correct",
                                    "percent": "100",
                                    "correct": true
                                }];
                                
                                const randomAmout = Math.floor(Math.random() * 5) + 3;
                                let allOps = [correctAnswer];
                                for (let i = 0; i < randomAmout; i++) {
                                    let firstWrongNum = randomNumbeGen();
                                    let whileTries = 0;
                                    while (whileTries <= 20 && (allOps.includes(firstWrongNum) || !Number.isFinite(Math.floor(firstWrongNum * 60)))) {
                                        firstWrongNum = randomNumbeGen();
                                        whileTries++;
                                    }
                                    const oneWrongAnswer = Math.floor(firstWrongNum * 60);
                                    /*let difference = correctAnswer > oneWrongAnswer ?
                                        correctAnswer - oneWrongAnswer :
                                        oneWrongAnswer - correctAnswer;*/
                                    let difference = Math.abs(correctAnswer - oneWrongAnswer);
                                    let scale = Math.abs(correctAnswer) > 0 ? Math.abs(correctAnswer) : 1;
                                    
                                    let percent = 100 - (difference / scale * 100);
                                    percent = Math.max(0, Math.min(100, percent));
                                    if (!allOps.includes(oneWrongAnswer)) {
                                        allOps.push(oneWrongAnswer);
                                        alloptions1.push({
                                            "text": `${oneWrongAnswer}`,
                                            "result": `Incorrect`,
                                            "percent": percent,
                                            "correct": false
                                        });
                                    }
                                }
                                const alloptions = shuffleArray(alloptions1);
                                currentChatMessageOptions = {
                                    options: {
                                        "How many questions are left ?": [
                                            `you got only ${maxprogress - progress} questions to go `,
                                            `you got ${maxprogress - progress} questions to go `,
                                            `there are ${maxprogress - progress} questions left`,
                                            `there are ${maxprogress - progress} more questions to go `,
                                            `there are ${maxprogress - progress} unanswered questions left`,
                                            `you are almost done. only ${maxprogress - progress} more questions to go `
                                        ],
                                        "How many questions have I answered ?": [
                                            `you have answered ${progress} questions`,
                                            `you answered ${progress} questions `
                                        ],
                                        "how many questions are there ?": [
                                            `${maxprogress} questions`,
                                            `there are ${maxprogress} questions`,
                                            `there are ${maxprogress} questions, in your current exercize`,
                                            `${maxprogress} questions, not too little and not too much`
                                        ],
                                        "How do i give my answer ?": [
                                            `Click one of the options below the question`,
                                            `Click on one the ${alloptions.length} options, below the question`,
                                            `Click on one of the ${alloptions.length} options`,
                                            `Choose one of the ${alloptions.length} options, below the current question`
                                        ],
                                        "How do i skip ?": [
                                            `Click the skip button, in the top right corner. if you don't see the button there, you have reached your skip limit.`,
                                            `Click the skip botton. if you do not see the skip button, in the top right corner, then you have probably reached your skip limit.`,
                                            `If you can't see the skip button, you have probably reached your skip limit.`,
                                            `If you don't see the skip button, you probably reached the skip limit.`
                                        ]
                                    }
                                }
                                alloptions.forEach((op, index) => {
                                    const div1 = document.createElement('div');
                                    const div2 = document.createElement('div');
                                    const div3 = document.createElement('div');
                                    div1.className = "optionBtn";
                                    div2.className = "optionFill";
                                    div1.id = "optionBtn" + index;
                                    div2.id = "optionFill" + index;
                                    div1.onclick = () => {
                                        if (parseInt(op.percent) > 95) {
                                            div1.classList.add("green2");
                                            div2.classList.add("green1");
                                        } else if (parseInt(op.percent) > 35) {
                                            div1.classList.add("orange2");
                                            div2.classList.add("orange1");
                                        } else {
                                            div1.classList.add("red2");
                                            div2.classList.add("red1");
                                        }
                                        currentProgress += parseInt(op.percent);
                                        if (parseInt(op.percent) > 50) {
                                            points += Math.round(parseInt(op.percent) / 10);
                                        } else {
                                            points -= Math.round((100 - parseInt(op.percent)) / 20);
                                        }
                                        updatePoints();
                                        div2.style.width = op.percent + "%";
                                        div1.onclick = null;
                                        alloptions.forEach((el, index2) => {
                                            if (index != index2) {
                                                const op = document.getElementById("optionBtn" + index2);
                                                const opfill = document.getElementById("optionFill" + index2);
                                                const opText = document.getElementById("optionTitle" + index2);
                                                opfill.style.width = el.percent + "%";
                                                op.onclick = null;
                                                if (el.correct == true && op && opfill) {
                                                    opfill.classList.add("green1");
                                                    op.classList.add("green2");
                                                } else if (op && opfill) {
                                                    opfill.classList.add("defaultFill");
                                                    op.classList.add("defaultBg");
                                                    //opText.textContent = el.result;
                                                }
                                            }
                                        });
                                        rindex++;
                                        progress = rindex;
                                        const percentage = (progress / maxprogress) * 100;
                                        progresses[currentProgressElement].style.width = `${percentage}%`;
                                        countDown(() => {
                                            addQuestionAuto(rindex);
                                        });
                                    };
                                    div3.className = "optionTitle";
                                    div3.id = "optionTitle" + index;
                                    div3.textContent = op.text;
                                    //div2.textContent = op.percent;
                                    //div1.textContent = "option" + index;
                                    div1.appendChild(div2);
                                    div1.appendChild(div3);
                                    div1.style.pointerEvents = "none";
                                    setTimeout(() => {
                                        learnContent.appendChild(div1);
                                        if (index == alloptions.length - 1) {
                                            skipBtn.style.display = skipdisplay;
                                            backBtn.style.display = quitdisplay;
                                            alloptions.forEach((el, index2) => {
                                                const op = document.getElementById("optionBtn" + index2);
                                                op.style.pointerEvents = "auto";
                                            });
                                        }
                                    }, index * 100);
                                });
                            } else {
                                currentChatMessageOptions = {
                                    options: {
                                        "How many questions are left ?": [
                                            `you got only ${maxprogress - progress} questions to go `,
                                            `you got ${maxprogress - progress} questions to go `,
                                            `there are ${maxprogress - progress} questions left`,
                                            `there are ${maxprogress - progress} more questions to go `,
                                            `there are ${maxprogress - progress} unanswered questions left`,
                                            `you are almost done. only ${maxprogress - progress} more questions to go `
                                        ],
                                        "How many questions have I answered ?": [
                                            `you have answered ${progress} questions`,
                                            `you answered ${progress} questions `
                                        ],
                                        "how many questions are there ?": [
                                            `${maxprogress} questions`,
                                            `there are ${maxprogress} questions`,
                                            `there are ${maxprogress} questions, in your current exercize`,
                                            `${maxprogress} questions, not too little and not too much`
                                        ],
                                        "How do i give my answer ?": [
                                            `Enter your answer in the input field, below the current question`,
                                            `Type out your answer in the input field, below the current question`,
                                            `Enter your answer in the input field, below the question`,
                                            `Type out your answer in the input field, below the question`
                                        ],
                                        "How do i skip ?": [
                                            `Click the skip button, in the top right corner. if you don't see the button there, you have reached your skip limit.`,
                                            `Click the skip botton. if you do not see the skip button, in the top right corner, then you have probably reached your skip limit.`,
                                            `If you can't see the skip button, you have probably reached your skip limit.`,
                                            `If you don't see the skip button, you probably reached the skip limit.`
                                        ]
                                    }
                                }
                                const inputEl = document.createElement("input");
                                inputEl.type = "text";
                                inputEl.className = "LearnInputField";
                                inputEl.placeholder = "Enter a number...";
                                
                                function userAnswerSubmit() {
                                    const inputValue = parseInt(inputEl.value);
                                    
                                    if (isNaN(inputValue)) {
                                        inputEl.classList.add("red1");
                                        points -= 5;
                                        addCorrectAnswerToSection(learnContent, correctAnswer);
                                    } else if (inputValue == correctAnswer) {
                                        inputEl.classList.add("green2");
                                        points += 10;
                                        currentProgress += 100;
                                        confirmCorrectAnswer(learnContent, correctAnswer);
                                    } else if (inputValue < correctAnswer + 4 && inputValue > correctAnswer - 4) {
                                        inputEl.classList.add("orange1");
                                        points += 5;
                                        currentProgress += 50;
                                        addCorrectAnswerToSection(learnContent, correctAnswer);
                                    } else {
                                        inputEl.classList.add("red1");
                                        points -= 5;
                                        addCorrectAnswerToSection(learnContent, correctAnswer);
                                    }
                                    updatePoints();
                                    rindex++;
                                    progress = rindex;
                                    const percentage = (progress / maxprogress) * 100;
                                    progresses[currentProgressElement].style.width = `${percentage}%`;
                                    countDown(() => {
                                        addQuestionAuto(rindex);
                                    });
                                }
                                inputEl.onkeydown = (event) => {
                                    if (event.key == "Enter") {
                                        inputEl.disabled = true;
                                        inputEl.onkeydown = null;
                                        userAnswerSubmit();
                                    }
                                };
                                learnContent.appendChild(inputEl);
                                skipBtn.style.display = skipdisplay;
                            }
                        }
                        else if (randomTypeOfExercise == "whatyearisit") {
                            function randomNumbeGen() {
                                if (level == "easy") {
                                    return Math.floor(Math.random() * 100);
                                } else if (level == "medium") {
                                    return Math.floor(Math.random() * 1000);
                                }
                                return Math.floor(Math.random() * 5000);
                            }
                            const aktuellesJahr = new Date().getFullYear();
                            const firstNum = randomNumbeGen();
                            if (firstNum == 1) {
                                addQuestionText(`What year was it ${firstNum} year ago ?`, learnContent);
                            } else if (firstNum == 0) {
                                addQuestionText(`What year is it ?`, learnContent);
                            } else {
                                addQuestionText(`What year was it ${firstNum} years ago ?`, learnContent);
                            }
                            const correctAnswer = aktuellesJahr - firstNum;
                            
                            const multiopOrInput = Math.floor(Math.random() * 2);
                            if (multiopOrInput == 1) {
                                let alloptions1 = [
                                {
                                    "text": `${correctAnswer}`,
                                    "result": "correct",
                                    "percent": "100",
                                    "correct": true
                                }];
                                
                                const randomAmout = Math.floor(Math.random() * 5) + 3;
                                let allOps = [correctAnswer];
                                for (let i = 0; i < randomAmout; i++) {
                                    let firstWrongNum = randomNumbeGen();
                                    let whileTries = 0;
                                    while (whileTries <= 20 && allOps.includes(aktuellesJahr - firstWrongNum)) {
                                        firstWrongNum = randomNumbeGen();
                                        whileTries++;
                                    }
                                    const oneWrongAnswer = aktuellesJahr - firstWrongNum;
                                    /*let difference = correctAnswer > oneWrongAnswer ?
                                        correctAnswer - oneWrongAnswer :
                                        oneWrongAnswer - correctAnswer;*/
                                    let difference = Math.abs(correctAnswer - oneWrongAnswer);
                                    let scale = 60;
                                    let percent = 100 - (difference / scale * 100);
                                    percent = Math.max(0, Math.min(100, percent));
                                    
                                    if (!allOps.includes(oneWrongAnswer)) {
                                        allOps.push(oneWrongAnswer);
                                        alloptions1.push({
                                            "text": `${oneWrongAnswer}`,
                                            "result": `Incorrect`,
                                            "percent": percent,
                                            "correct": false
                                        });
                                    }
                                }
                                const alloptions = shuffleArray(alloptions1);
                                currentChatMessageOptions = {
                                    options: {
                                        "What year is it ?": [
                                            `it is ${new Date().getFullYear()}`,
                                            `you are in the year ${new Date().getFullYear()}`,
                                            `it is currently ${new Date().getFullYear()}`,
                                            `it's currently ${new Date().getFullYear()}`
                                        ],
                                        "How many questions are left ?": [
                                            `you got only ${maxprogress - progress} questions to go `,
                                            `you got ${maxprogress - progress} questions to go `,
                                            `there are ${maxprogress - progress} questions left`,
                                            `there are ${maxprogress - progress} more questions to go `,
                                            `there are ${maxprogress - progress} unanswered questions left`,
                                            `you are almost done. only ${maxprogress - progress} more questions to go `
                                        ],
                                        "How many questions have I answered ?": [
                                            `you have answered ${progress} questions`,
                                            `you answered ${progress} questions `
                                        ],
                                        "how many questions are there ?": [
                                            `${maxprogress} questions`,
                                            `there are ${maxprogress} questions`,
                                            `there are ${maxprogress} questions, in your current exercize`,
                                            `${maxprogress} questions, not too little and not too much`
                                        ],
                                        "How do i give my answer ?": [
                                            `Click one of the options below the question`,
                                            `Click on one the ${alloptions.length} options, below the question`,
                                            `Click on one of the ${alloptions.length} options`,
                                            `Choose one of the ${alloptions.length} options, below the current question`
                                        ],
                                        "How do i skip ?": [
                                            `Click the skip button, in the top right corner. if you don't see the button there, you have reached your skip limit.`,
                                            `Click the skip botton. if you do not see the skip button, in the top right corner, then you have probably reached your skip limit.`,
                                            `If you can't see the skip button, you have probably reached your skip limit.`,
                                            `If you don't see the skip button, you probably reached the skip limit.`
                                        ]
                                    }
                                }
                                alloptions.forEach((op, index) => {
                                    const div1 = document.createElement('div');
                                    const div2 = document.createElement('div');
                                    const div3 = document.createElement('div');
                                    div1.className = "optionBtn";
                                    div2.className = "optionFill";
                                    div1.id = "optionBtn" + index;
                                    div2.id = "optionFill" + index;
                                    div1.onclick = () => {
                                        if (parseInt(op.percent) > 95) {
                                            div1.classList.add("green2");
                                            div2.classList.add("green1");
                                        } else if (parseInt(op.percent) > 35) {
                                            div1.classList.add("orange2");
                                            div2.classList.add("orange1");
                                        } else {
                                            div1.classList.add("red2");
                                            div2.classList.add("red1");
                                        }
                                        currentProgress += parseInt(op.percent);
                                        if (parseInt(op.percent) > 50) {
                                            points += Math.round(parseInt(op.percent) / 10);
                                        } else {
                                            points -= Math.round((100 - parseInt(op.percent)) / 20);
                                        }
                                        updatePoints();
                                        div2.style.width = op.percent + "%";
                                        div1.onclick = null;
                                        alloptions.forEach((el, index2) => {
                                            if (index != index2) {
                                                const op = document.getElementById("optionBtn" + index2);
                                                const opfill = document.getElementById("optionFill" + index2);
                                                const opText = document.getElementById("optionTitle" + index2);
                                                opfill.style.width = el.percent + "%";
                                                op.onclick = null;
                                                if (el.correct == true && op && opfill) {
                                                    opfill.classList.add("green1");
                                                    op.classList.add("green2");
                                                } else if (op && opfill) {
                                                    opfill.classList.add("defaultFill");
                                                    op.classList.add("defaultBg");
                                                    //opText.textContent = el.result;
                                                }
                                            }
                                        });
                                        rindex++;
                                        progress = rindex;
                                        const percentage = (progress / maxprogress) * 100;
                                        progresses[currentProgressElement].style.width = `${percentage}%`;
                                        countDown(() => {
                                            addQuestionAuto(rindex);
                                        });
                                    };
                                    div3.className = "optionTitle";
                                    div3.id = "optionTitle" + index;
                                    div3.textContent = op.text;
                                    //div2.textContent = op.percent;
                                    //div1.textContent = "option" + index;
                                    div1.appendChild(div2);
                                    div1.appendChild(div3);
                                    div1.style.pointerEvents = "none";
                                    setTimeout(() => {
                                        learnContent.appendChild(div1);
                                        if (index == alloptions.length - 1) {
                                            skipBtn.style.display = skipdisplay;
                                            backBtn.style.display = quitdisplay;
                                            alloptions.forEach((el, index2) => {
                                                const op = document.getElementById("optionBtn" + index2);
                                                op.style.pointerEvents = "auto";
                                            });
                                        }
                                    }, index * 100);
                                });
                            } else {
                                currentChatMessageOptions = {
                                    options: {
                                        "What year is it ?": [
                                            `it is ${new Date().getFullYear()}`,
                                            `you are in the year ${new Date().getFullYear()}`,
                                            `it is currently ${new Date().getFullYear()}`,
                                            `it's currently ${new Date().getFullYear()}`
                                        ],
                                        "How many questions are left ?": [
                                            `you got only ${maxprogress - progress} questions to go `,
                                            `you got ${maxprogress - progress} questions to go `,
                                            `there are ${maxprogress - progress} questions left`,
                                            `there are ${maxprogress - progress} more questions to go `,
                                            `there are ${maxprogress - progress} unanswered questions left`,
                                            `you are almost done. only ${maxprogress - progress} more questions to go `
                                        ],
                                        "How many questions have I answered ?": [
                                            `you have answered ${progress} questions`,
                                            `you answered ${progress} questions `
                                        ],
                                        "how many questions are there ?": [
                                            `${maxprogress} questions`,
                                            `there are ${maxprogress} questions`,
                                            `there are ${maxprogress} questions, in your current exercize`,
                                            `${maxprogress} questions, not too little and not too much`
                                        ],
                                        "How do i give my answer ?": [
                                            `Enter your answer in the input field, below the current question`,
                                            `Type out your answer in the input field, below the current question`,
                                            `Enter your answer in the input field, below the question`,
                                            `Type out your answer in the input field, below the question`
                                        ],
                                        "How do i skip ?": [
                                            `Click the skip button, in the top right corner. if you don't see the button there, you have reached your skip limit.`,
                                            `Click the skip botton. if you do not see the skip button, in the top right corner, then you have probably reached your skip limit.`,
                                            `If you can't see the skip button, you have probably reached your skip limit.`,
                                            `If you don't see the skip button, you probably reached the skip limit.`
                                        ]
                                    }
                                }
                                const inputEl = document.createElement("input");
                                inputEl.type = "text";
                                inputEl.className = "LearnInputField";
                                inputEl.placeholder = "Enter a year...";
                                
                                function userAnswerSubmit() {
                                    const inputValue = parseInt(inputEl.value);
                                    
                                    if (isNaN(inputValue)) {
                                        inputEl.classList.add("red1");
                                        points -= 5;
                                        addCorrectAnswerToSection(learnContent, correctAnswer);
                                    } else if (inputValue == correctAnswer) {
                                        inputEl.classList.add("green2");
                                        points += 10;
                                        currentProgress += 100;
                                        confirmCorrectAnswer(learnContent, correctAnswer);
                                    } else if (inputValue < correctAnswer + 4 && inputValue > correctAnswer - 4) {
                                        inputEl.classList.add("orange1");
                                        points += 5;
                                        currentProgress += 50;
                                        addCorrectAnswerToSection(learnContent, correctAnswer);
                                    } else {
                                        inputEl.classList.add("red1");
                                        points -= 5;
                                        addCorrectAnswerToSection(learnContent, correctAnswer);
                                    }
                                    updatePoints();
                                    rindex++;
                                    progress = rindex;
                                    const percentage = (progress / maxprogress) * 100;
                                    progresses[currentProgressElement].style.width = `${percentage}%`;
                                    countDown(() => {
                                        addQuestionAuto(rindex);
                                    });
                                }
                                inputEl.onkeydown = (event) => {
                                    if (event.key == "Enter") {
                                        inputEl.disabled = true;
                                        inputEl.onkeydown = null;
                                        userAnswerSubmit();
                                    }
                                };
                                learnContent.appendChild(inputEl);
                                skipBtn.style.display = skipdisplay;
                            }
                        }
                        else if (randomTypeOfExercise == "weakday") {
                            const daysOfTheWeek = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];

                            function randomIndexGen(maxNum = 7) {
                                return Math.floor(Math.random() * maxNum);
                            }
                            
                            const todayIndex = randomIndexGen(7);
                            const daysAgo = Math.floor(Math.random() * todayIndex) + 1;
                            if (daysAgo == 1) {
                                addQuestionText(`What day was it ${daysAgo} day before ${daysOfTheWeek[todayIndex]} ?`, learnContent);
                            } else {
                                addQuestionText(`What day was it ${daysAgo} days before ${daysOfTheWeek[todayIndex]} ?`, learnContent);
                            }
                            
                            const correctIndex = (todayIndex - daysAgo + 7) % 7;
                            const correctAnswer = daysOfTheWeek[correctIndex];
                            
                            if (correctAnswer) {
                                let alloptions1 = [
                                {
                                    "text": `${correctAnswer}`,
                                    "result": "correct",
                                    "percent": "100",
                                    "correct": true
                                }];
                                
                                const randomAmout = Math.floor(Math.random() * 4) + 3;
                                let allOps = [correctAnswer];
                                for (let i = 0; i < randomAmout; i++) {
                                    let firstWrongNum = randomIndexGen(7);
                                    let whileTries = 0;
                                    while (whileTries <= 20 && (!daysOfTheWeek[firstWrongNum] || allOps.includes(daysOfTheWeek[firstWrongNum]))) {
                                        firstWrongNum = randomIndexGen(7);
                                        whileTries++;
                                    }
                                    const oneWrongAnswer = daysOfTheWeek[firstWrongNum];
                                    /*let difference = correctAnswer > oneWrongAnswer ?
                                        correctAnswer - oneWrongAnswer :
                                        oneWrongAnswer - correctAnswer;*/
                                    function circularDifference(a, b, length) {
                                        const diff = Math.abs(a - b);
                                        return Math.min(diff, length - diff);
                                    }
                                    
                                    let difference = circularDifference(correctIndex, firstWrongNum, 7);
                                    let scale = 3; // frei whlbar
                                    let percent = 100 - (difference / scale * 100);
                                    percent = Math.max(0, Math.min(100, percent));
                                    if (!allOps.includes(oneWrongAnswer)) {
                                        allOps.push(oneWrongAnswer);
                                        alloptions1.push({
                                            "text": `${oneWrongAnswer}`,
                                            "result": `Incorrect`,
                                            "percent": percent,
                                            "correct": false
                                        });
                                    }
                                }
                                const alloptions = shuffleArray(alloptions1);
                                currentChatMessageOptions = {
                                    options: {
                                        "What day is it ?": [
                                            `it is ${daysOfTheWeek[new Date().getDay()]}`,
                                            `Today is a ${daysOfTheWeek[new Date().getDay()]}`,
                                            `today is a ${daysOfTheWeek[new Date().getDay()]}, the ${new Date().getDate()}.${new Date().getMonth() + 1}.${new Date().getFullYear()}`,
                                            `The current date is ${new Date().getDate()}.${new Date().getMonth() + 1}.${new Date().getFullYear()}`
                                        ],
                                        "How many questions are left ?": [
                                            `you got only ${maxprogress - progress} questions to go `,
                                            `you got ${maxprogress - progress} questions to go `,
                                            `there are ${maxprogress - progress} questions left`,
                                            `there are ${maxprogress - progress} more questions to go `,
                                            `there are ${maxprogress - progress} unanswered questions left`,
                                            `you are almost done. only ${maxprogress - progress} more questions to go `
                                        ],
                                        "How many questions have I answered ?": [
                                            `you have answered ${progress} questions`,
                                            `you answered ${progress} questions `
                                        ],
                                        "how many questions are there ?": [
                                            `${maxprogress} questions`,
                                            `there are ${maxprogress} questions`,
                                            `there are ${maxprogress} questions, in your current exercize`,
                                            `${maxprogress} questions, not too little and not too much`
                                        ],
                                        "How do i give my answer ?": [
                                            `Click one of the options below the question`,
                                            `Click on one the ${alloptions.length} options, below the question`,
                                            `Click on one of the ${alloptions.length} options`,
                                            `Choose one of the ${alloptions.length} options, below the current question`
                                        ],
                                        "How do i skip ?": [
                                            `Click the skip button, in the top right corner. if you don't see the button there, you have reached your skip limit.`,
                                            `Click the skip botton. if you do not see the skip button, in the top right corner, then you have probably reached your skip limit.`,
                                            `If you can't see the skip button, you have probably reached your skip limit.`,
                                            `If you don't see the skip button, you probably reached the skip limit.`
                                        ]
                                    }
                                }
                                alloptions.forEach((op, index) => {
                                    const div1 = document.createElement('div');
                                    const div2 = document.createElement('div');
                                    const div3 = document.createElement('div');
                                    div1.className = "optionBtn";
                                    div2.className = "optionFill";
                                    div1.id = "optionBtn" + index;
                                    div2.id = "optionFill" + index;
                                    addAudioButton(div1, op.text);
                                    div1.onclick = (event) => {
                                        if (event.target && event.target.classList.contains('audio-button')) return;
                                        if (parseInt(op.percent) > 95) {
                                            div1.classList.add("green2");
                                            div2.classList.add("green1");
                                        } else if (parseInt(op.percent) > 35) {
                                            div1.classList.add("orange2");
                                            div2.classList.add("orange1");
                                        } else {
                                            div1.classList.add("red2");
                                            div2.classList.add("red1");
                                        }
                                        currentProgress += parseInt(op.percent);
                                        if (parseInt(op.percent) > 50) {
                                            points += Math.round(parseInt(op.percent) / 10);
                                        } else {
                                            points -= Math.round((100 - parseInt(op.percent)) / 20);
                                        }
                                        updatePoints();
                                        div2.style.width = op.percent + "%";
                                        div1.onclick = null;
                                        alloptions.forEach((el, index2) => {
                                            if (index != index2) {
                                                const op = document.getElementById("optionBtn" + index2);
                                                const opfill = document.getElementById("optionFill" + index2);
                                                const opText = document.getElementById("optionTitle" + index2);
                                                opfill.style.width = el.percent + "%";
                                                op.onclick = null;
                                                if (el.correct == true && op && opfill) {
                                                    opfill.classList.add("green1");
                                                    op.classList.add("green2");
                                                } else if (op && opfill) {
                                                    opfill.classList.add("defaultFill");
                                                    op.classList.add("defaultBg");
                                                    //opText.textContent = el.result;
                                                }
                                            }
                                        });
                                        rindex++;
                                        progress = rindex;
                                        const percentage = (progress / maxprogress) * 100;
                                        progresses[currentProgressElement].style.width = `${percentage}%`;
                                        countDown(() => {
                                            addQuestionAuto(rindex);
                                        });
                                    };
                                    div3.className = "optionTitle";
                                    div3.id = "optionTitle" + index;
                                    div3.textContent = op.text;
                                    //div2.textContent = op.percent;
                                    //div1.textContent = "option" + index;
                                    div1.appendChild(div2);
                                    div1.appendChild(div3);
                                    div1.style.pointerEvents = "none";
                                    setTimeout(() => {
                                        learnContent.appendChild(div1);
                                        if (index == alloptions.length - 1) {
                                            skipBtn.style.display = skipdisplay;
                                            backBtn.style.display = quitdisplay;
                                            alloptions.forEach((el, index2) => {
                                                const op = document.getElementById("optionBtn" + index2);
                                                op.style.pointerEvents = "auto";
                                            });
                                        }
                                    }, index * 100);
                                });
                            }
                        }
                        else if (randomTypeOfExercise == "months") {
                            const monthsOfTheYear = [
                                'January', 'February', 'March', 'April', 'May', 'June',
                                'July', 'August', 'September', 'October', 'November', 'December'
                            ];
                            
                            function randomIndexGen(maxNum = 12) {
                                return Math.floor(Math.random() * maxNum); // 011
                            }
                            
                            const currentMonthIndex = randomIndexGen(12);
                            const monthsAgo = Math.floor(Math.random() * currentMonthIndex) + 1;
                            
                            if (monthsAgo === 1) {
                                addQuestionText(`What month was it ${monthsAgo} month before ${monthsOfTheYear[currentMonthIndex]}?`, learnContent);
                            } else {
                                addQuestionText(`What month was it ${monthsAgo} months before ${monthsOfTheYear[currentMonthIndex]}?`, learnContent);
                            }
                            
                            const correctIndex = (currentMonthIndex - monthsAgo + 12) % 12;
                            const correctAnswer = monthsOfTheYear[correctIndex];
                            
                            if (correctAnswer) {
                                let alloptions1 = [
                                {
                                    "text": `${correctAnswer}`,
                                    "result": "correct",
                                    "percent": "100",
                                    "correct": true
                                }];
                                
                                const randomAmout = Math.floor(Math.random() * 5) + 3;
                                let allOps = [correctAnswer];
                                for (let i = 0; i < randomAmout; i++) {
                                    let firstWrongNum = randomIndexGen(12);
                                    let whileTries = 0;
                                    while (whileTries <= 20 && (!monthsOfTheYear[firstWrongNum] || allOps.includes(monthsOfTheYear[firstWrongNum]))) {
                                        firstWrongNum = randomIndexGen(12);
                                        whileTries++;
                                    }
                                    const oneWrongAnswer = monthsOfTheYear[firstWrongNum];
                                    /*let difference = correctAnswer > oneWrongAnswer ?
                                        correctAnswer - oneWrongAnswer :
                                        oneWrongAnswer - correctAnswer;*/
                                    function circularDifference(a, b, length) {
                                        const diff = Math.abs(a - b);
                                        return Math.min(diff, length - diff);
                                    }
                                    
                                    let difference = circularDifference(correctIndex, firstWrongNum, 12);
                                    let scale = 3;
                                    let percent = 100 - (difference / scale * 100);
                                    percent = Math.max(0, Math.min(100, percent));
                                    if (!allOps.includes(oneWrongAnswer)) {
                                        allOps.push(oneWrongAnswer);
                                        alloptions1.push({
                                            "text": `${oneWrongAnswer}`,
                                            "result": `Incorrect`,
                                            "percent": percent,
                                            "correct": false
                                        });
                                    }
                                }
                                const alloptions = shuffleArray(alloptions1);
                                currentChatMessageOptions = {
                                    options: {
                                        "What month is it ?": [
                                            `it is ${monthsOfTheYear[new Date().getMonth()]}`,
                                            `It is currently ${monthsOfTheYear[new Date().getMonth()]}`,
                                            `It's ${monthsOfTheYear[new Date().getMonth()]}, the ${new Date().getDate()}.${new Date().getMonth() + 1}.${new Date().getFullYear()}, to be exact`,
                                            `The current date is ${new Date().getDate()}.${new Date().getMonth() + 1}.${new Date().getFullYear()}`
                                        ],
                                        "How many questions are left ?": [
                                            `you got only ${maxprogress - progress} questions to go `,
                                            `you got ${maxprogress - progress} questions to go `,
                                            `there are ${maxprogress - progress} questions left`,
                                            `there are ${maxprogress - progress} more questions to go `,
                                            `there are ${maxprogress - progress} unanswered questions left`,
                                            `you are almost done. only ${maxprogress - progress} more questions to go `
                                        ],
                                        "How many questions have I answered ?": [
                                            `you have answered ${progress} questions`,
                                            `you answered ${progress} questions `
                                        ],
                                        "how many questions are there ?": [
                                            `${maxprogress} questions`,
                                            `there are ${maxprogress} questions`,
                                            `there are ${maxprogress} questions, in your current exercize`,
                                            `${maxprogress} questions, not too little and not too much`
                                        ],
                                        "How do i give my answer ?": [
                                            `Click one of the options below the question`,
                                            `Click on one the ${alloptions.length} options, below the question`,
                                            `Click on one of the ${alloptions.length} options`,
                                            `Choose one of the ${alloptions.length} options, below the current question`
                                        ],
                                        "How do i skip ?": [
                                            `Click the skip button, in the top right corner. if you don't see the button there, you have reached your skip limit.`,
                                            `Click the skip botton. if you do not see the skip button, in the top right corner, then you have probably reached your skip limit.`,
                                            `If you can't see the skip button, you have probably reached your skip limit.`,
                                            `If you don't see the skip button, you probably reached the skip limit.`
                                        ]
                                    }
                                }
                                alloptions.forEach((op, index) => {
                                    const div1 = document.createElement('div');
                                    const div2 = document.createElement('div');
                                    const div3 = document.createElement('div');
                                    div1.className = "optionBtn";
                                    div2.className = "optionFill";
                                    div1.id = "optionBtn" + index;
                                    div2.id = "optionFill" + index;
                                    addAudioButton(div1, op.text);
                                    div1.onclick = (event) => {
                                        if (event.target && event.target.classList.contains('audio-button')) return;
                                        if (parseInt(op.percent) > 95) {
                                            div1.classList.add("green2");
                                            div2.classList.add("green1");
                                        } else if (parseInt(op.percent) > 35) {
                                            div1.classList.add("orange2");
                                            div2.classList.add("orange1");
                                        } else {
                                            div1.classList.add("red2");
                                            div2.classList.add("red1");
                                        }
                                        currentProgress += parseInt(op.percent);
                                        if (parseInt(op.percent) > 50) {
                                            points += Math.round(parseInt(op.percent) / 10);
                                        } else {
                                            points -= Math.round((100 - parseInt(op.percent)) / 20);
                                        }
                                        updatePoints();
                                        div2.style.width = op.percent + "%";
                                        div1.onclick = null;
                                        alloptions.forEach((el, index2) => {
                                            if (index != index2) {
                                                const op = document.getElementById("optionBtn" + index2);
                                                const opfill = document.getElementById("optionFill" + index2);
                                                const opText = document.getElementById("optionTitle" + index2);
                                                opfill.style.width = el.percent + "%";
                                                op.onclick = null;
                                                if (el.correct == true && op && opfill) {
                                                    opfill.classList.add("green1");
                                                    op.classList.add("green2");
                                                } else if (op && opfill) {
                                                    opfill.classList.add("defaultFill");
                                                    op.classList.add("defaultBg");
                                                    //opText.textContent = el.result;
                                                }
                                            }
                                        });
                                        rindex++;
                                        progress = rindex;
                                        const percentage = (progress / maxprogress) * 100;
                                        progresses[currentProgressElement].style.width = `${percentage}%`;
                                        countDown(() => {
                                            addQuestionAuto(rindex);
                                        });
                                    };
                                    div3.className = "optionTitle";
                                    div3.id = "optionTitle" + index;
                                    div3.textContent = op.text;
                                    //div2.textContent = op.percent;
                                    //div1.textContent = "option" + index;
                                    div1.appendChild(div2);
                                    div1.appendChild(div3);
                                    div1.style.pointerEvents = "none";
                                    setTimeout(() => {
                                        learnContent.appendChild(div1);
                                        if (index == alloptions.length - 1) {
                                            skipBtn.style.display = skipdisplay;
                                            backBtn.style.display = quitdisplay;
                                            alloptions.forEach((el, index2) => {
                                                const op = document.getElementById("optionBtn" + index2);
                                                op.style.pointerEvents = "auto";
                                            });
                                        }
                                    }, index * 100);
                                });
                            }
                        }
                    }
                    addQuestionAuto();
                })
                .catch(error => {
                    learnContent.innerHTML = "<p>Questions not found.</p>" + error;
                    alert("Questions not found.");
                });
        }
        function startQuestions(file) {
            startLoad();
            
            fetch("/questions/" + file)
                .then(response => {
                    if (!response.ok) throw new Error("Not found");
                    return response.json();
                })
                .then(data => {
                    stopLoad();
                    skipdisplay = "inline";
                    quitdisplay = "inline";
                    if (file === "math.json") {
                        chooseContent.style.display = "none";
                        learnContent.style.display = "block";
                        backBtn.style.display = quitdisplay;
                        addMathOptions(data, (level) => {
                            skipdisplay = "inline";
                            quitdisplay = "inline";
                            progressBarContainer.style.display = "flex";
                            progressBarContainer.style.animation = "none";
                            void progressBarContainer.offsetWidth;
                            progressBarContainer.style.animation = "progressBarAnimation 0.5s ease";
                            setTimeout(() => {
                                progressBarContainer.style.marginTop = "0";
                            }, 300);
                            addMathQuestions(data[level], level);
                        });
                    } else if (file === "time.json") {
                        chooseContent.style.display = "none";
                        learnContent.style.display = "block";
                        backBtn.style.display = quitdisplay;
                        addTimeOptions(data, (level) => {
                            skipdisplay = "inline";
                            quitdisplay = "inline";
                            progressBarContainer.style.display = "flex";
                            progressBarContainer.style.animation = "none";
                            void progressBarContainer.offsetWidth;
                            progressBarContainer.style.animation = "progressBarAnimation 0.5s ease";
                            setTimeout(() => {
                                progressBarContainer.style.marginTop = "0";
                            }, 300);
                            addTimeQuestions(data[level], level);
                        });
                    } else {
                        // Fr alle anderen Dateien (kein "math.json"):
                        chooseContent.style.display = "none";
                        learnContent.style.display = "block";
                        progressBarContainer.style.display = "flex";
                        progressBarContainer.style.animation = "none";
                        void progressBarContainer.offsetWidth;
                        progressBarContainer.style.animation = "progressBarAnimation 0.5s ease";
                        setTimeout(() => {
                            progressBarContainer.style.marginTop = "0";
                        }, 300);
                        
                        const shuffled = shuffleArray(cutArray(data));
                        function addQuestionAuto(rindex = -0) {
                            addQuestion(shuffled, (ind) => {
                                addQuestionAuto(ind);
                            }, rindex);
                        }
                        addQuestionAuto();
                    }
                })
                .catch(error => {
                    learnContent.innerHTML = "<p>questions not found.</p>";
                    alert("questions not found.");
                });
        }
        function stopQuestions() {
            currentChatMessageOptions = {};
            continueLoop = false;
            skipdisplay = "none";
            quitdisplay = "none";
            skipBtn.style.display = "none";
            timerContainer.style.display = "none";
            currentProgressElement = 0;
            progress = 0;
            currentProgress = 0;
            backBtn.style.display = "none";
            skipBtn.style.display = "none";
            chooseContent.style.display = "block";
            learnContent.style.display = "none";
            progressBarContainer.style.animation = "none";
            void progressBarContainer.offsetWidth;
            progressBarContainer.style.animation = "progressBarAnimationOut 0.5s ease";
            
            progress1.style.width = "0";
            progress2.style.width = "0";
            progress3.style.width = "0";
            progress4.style.width = "0";
            
            
            setTimeout(() => {
                progressBarContainer.style.marginTop = "-100px";
                progressBarContainer.style.display = "none";
            }, 300);
        }
        
        backBtn.onclick = () => {
            stopQuestions();
        };
        
        function addChooseOp(text, file, img) {
            const button = document.createElement('button');
            button.textContent = text;
            button.style.backgroundImage = `url(${img})`;
            button.onclick = () => {
                startQuestions(file);
            };
            chooseContent.appendChild(button);
        }
        
        function fetchQuestions(file) {
            startLoad();
            fetch(file)
              .then(response => {
                  if (response.ok) {
                      return response.json();
                  }
              })
              .then(data => {
                  stopLoad();
                  chooseContent.innerHTML = "<p>choose an Exercise</p>";
                  data.forEach(question => {
                    addChooseOp(question.text, question.file, question.img);
                });
              })
              .catch(error => {
                    learnContent.innerHTML = "<p>Exercises not found.</p>";
                    alert("Exercises not found.");
                });
        }
        fetchQuestions("/questions/questions.json");
    </script>
</body>
</html>
